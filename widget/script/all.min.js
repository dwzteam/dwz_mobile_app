var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dwz=function t(e,a){return new t.prototype.init(e,a)};window.$=window.$||dwz,dwz.version="mobile 1.0.0",dwz.rootNodeRE=/^(?:body|html)$/i,dwz.config={pageInfo:{pageNum:"pageNum"},statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},unitBox:"unitBox",rreturn:/\r/g,r20:/%20/g,rCRLF:/\r?\n/g,rsubmitterTypes:/^(?:submit|button|image|reset|file)$/i,rsubmittable:/^(?:input|select|textarea|keygen)/i,rcheckableType:/^(?:checkbox|radio)$/i,rnotwhite:/\S+/g,frag:{}},dwz.regPlugins=[],dwz.extend=function(){var t,e=arguments[0]||{},a=1,n=arguments.length;for("boolean"==typeof e&&(e=arguments[1]||{},a=2),"object"===(void 0===e?"undefined":_typeof(e))||e||(e={}),n==a&&(e=this,--a);a<n;a++)if(null!=(t=arguments[a]))for(var i in t){e[i];var r=t[i];e!==r&&void 0!==r&&(e[i]=r)}return e},dwz.extend({eavl:function(t){return t?(0,eval)(t):null},isFunction:function(t){return"function"==typeof t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},instanceOf:function(t){return!!t&&t instanceof dwz.prototype.init},inArray:function(t,e,a){return null==e?-1:-1!=[].indexOf.call(e,t,a)},makeArray:function(t,e){e=e||[];return null!=t&&[].push.call(e,t),e},merge:function(t,e){for(var a=+e.length,n=0,i=t.length;n<a;n++)t[i++]=e[n];return t.length=i,t},each:function(t,e,a){if(dwz.isArray(t)){for(var n=[],i=0;i<t.length;i++){var r=e.call(t[i],i,t[i],a);if(void 0!==r&&n.push(r),!1===r)break}return n}for(var o=[],s=0;s<t.length;s++){var l=t.get(s),c=e.call(l,s,l,a);if(!c&&void 0!==c||o.push(l),!1===c)break}return dwz(o)},get:function(t,e){return dwz.instanceOf(t)?t.get(e):t},isSameTag:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},error:function(t){throw new Error(t)},urlInterceptor:null,getUrlInterceptor:function(t){if(!t)return dwz.urlInterceptor;t=t.getParams();return t.dwz_interceptor?dwz.eavl(t.dwz_interceptor):dwz.urlInterceptor},getUrlCallback:function(t){if(!t)return null;t=t.getParams();return t.dwz_callback?dwz.eavl(t.dwz_callback):null},eval:function(t){t="(false || "+t+")";return window.execScript?window.execScript(t):window.eval(t)},execHelperFn:function(t,e,a){var n;a.dwz_helper?(n=dwz.eavl(a.dwz_helper))&&n.call(t,e,a):e.script&&"function"==a.dwz_script&&dwz.eval(e.script).call(t,e,a)},templateWrap:function(t){var e={html:t||"",script:""},t=/<script(.|\n)*?>(.|\n|\r\n)*?<\/script>/gi,a=e.html.match(t);if(a)for(var n=/<script(.|\n)*?>((.|\n|\r\n)*)?<\/script>/im,i=a.length,r=0;r<i;r++){var o=$(a[r]),s=o.attr("type"),l=o.attr("id"),o=a[r].match(n);"text/html"==s?e[l||"default"]=o[2]:e.script||(e.script=o[2])}return e.html=e.html.replace(t,""),e}}),dwz.config.selector={":input":"input, select, textarea, button",":text":"input:not([type=radio]):not([type=checkbox]):not([type=submit]):not([type=reset]):not([type=button]):not([type=file]):not([type=hidden]):not([type=image])",":password":"input[type=password]",":radio":"input[type=radio]",":checkbox":"input[type=checkbox]",":submit":"input[type=submit], button[type=submit]",":reset":"input[type=reset], button[type=reset]",":button":"input[type=button], input[type=submit], input[type=reset], input[type=image], button",":file":"input[type=file]",":image":"input[type=image]",":hidden":"input[type=hidden]"},dwz.prototype.init=function(t,e){if(this.selector=t,this.context=e,this.elements=[],this.length,!t)return this;var a=1;if("string"==typeof t)if(t.startsWith(">")&&(t=":scope"+t),e&&("string"==typeof e?e=document.querySelector(e):dwz.instanceOf(e)&&(e=1<(a=e.elements.length)?e.elements:e.elements[0])),this.context=e||document,1<a)for(var n=0;n<this.context.length;n++){var i=this.context[n].querySelectorAll(dwz.config.selector[t]||t);Array.prototype.push.apply(this.elements,i)}else 0<=t.indexOf("<")&&0<=t.indexOf(">")?this.elements=dwz.parseHTML(t,!0):this.elements=this.context.querySelectorAll(dwz.config.selector[t]||t);else{if(dwz.instanceOf(t))return t;if(t instanceof Element||t===document||t===window)this.elements=[t];else if(t instanceof NodeList||dwz.isArray(t))this.elements=t;else if(dwz.isFunction(t))return document.addEventListener("DOMContentLoaded",t),window.onload}return this.context||(this.context=document),this.length=this.elements.length,this},dwz.fn=dwz.extend(dwz.prototype.init.prototype,{extend:function(t){dwz.extend(dwz.fn,t)},toArray:function(){return this.elements},size:function(){return this.length},eq:function(t){return dwz(this.elements[t])},get:function(t){return void 0===t?this.elements:this.elements[t]},first:function(){return this.eq(0)},last:function(){return this.eq(this.elements.length-1)},parentNode:function(){return this.get(0).parentNode},parent:function(){return $(this.parentNode())},parentsUntil:function(t){for(var e=this.get(0),a=document.getElementsByTagName("body"),n=0;n<100;){if(e=e.parentNode,t.call(e,n))return dwz(e);if(e==a||e==document)break;n++}return dwz()},parentsUnitBox:function(t){return this.parentsUntil(function(){return dwz.hasClass(this,t||dwz.config.unitBox)})},parentsByTag:function(t){return this.parentsUntil(function(){return dwz.isSameTag(this,t)})},children:function(t){return this.find(":scope > "+(t||"*"))},find:function(t){return 0==this.size()?this:dwz(t,this)},filter:function(t){for(var e=[],a=0;a<this.length;a++){var n=this.get(a);t.call(n,a)&&e.push(n)}return dwz(e)},each:function(t,e){return dwz.each(this,t,e)},is:function(t){var e=!1,a=this.get(0);return $(t,this.parentNode()).each(function(){this==a&&(e=!0)}),e}}),dwz.extend({getStorage:function(t){t=localStorage.getItem(t);if(t)return JSON.parse(t)},setStorage:function(t,e){localStorage.setItem(t,JSON.stringify(e))},removeStorage:function(t){localStorage.removeItem(t)},clientX:function(t){return t.pageX||t.clientX||(t.targetTouches?t.targetTouches[0].clientX:0)},clientY:function(t){return t.pageY||t.clientY||(t.targetTouches?t.targetTouches[0].clientY:0)},speed:{pre:{x:0,y:0,speedX:0,speedY:0,time:0},init:!1,getX:function(){return dwz.speed.pre.speedX},getY:function(){return dwz.speed.pre.speedY},cal:function(t){dwz.speed.init||(dwz.speed.init=!0,dwz.speed.pre.x=t.clientX,dwz.speed.pre.y=t.clientY,dwz.speed.pre.time=(new Date).getTime());var e=dwz.clientX(t),a=dwz.clientY(t),n=e-dwz.speed.pre.x,i=a-dwz.speed.pre.y,r=(new Date).getTime(),t=r-dwz.speed.pre.time;return dwz.speed.pre.speedX=0<t?n/t*1e3:n,dwz.speed.pre.speedY=0<t?i/t*1e3:i,dwz.speed.pre.x=e,dwz.speed.pre.y=a,dwz.speed.pre.time=r,dwz.speed.pre}},event:{hasTouch:"ontouchstart"in window,type:{pageClear:"pageClear",pageShow:"pageShow",pageHide:"pageHide"},add:function(a,t,n,i){var r=dwz.data(a,"_events")||{};i||(i=n,n=void 0),dwz.each(t.split(/\s+/),function(t){function e(t){void 0!==n&&(t.data=n),!1===i.call(a,t)&&(t.stopPropagation(),t.preventDefault())}r[this]=r[this]||[],r[this].push({handler:e,fn:i}),a.addEventListener(this,e,!1)}),dwz.data(a,"_events",r)},remove:function(n,t,i){var r=dwz.data(n,"_events")||{};dwz.each(t.split(/\s+/),function(t){var e=this;if(r[e]){for(var a=0;a<r[e].length;a++)if(i){if(i===r[e][a].fn){n.removeEventListener(e,r[e][a].handler,!1),r[e].splice(a,1);break}}else n.removeEventListener(e,r[e][a].handler,!1);void 0===i&&(r[e]=[])}}),dwz.data(n,"_events",r)},trigger:function(t,e,a){e=new Event(e);void 0!==a&&(e.data=a),t.dispatchEvent(e)},isBind:function(t,e,a){var n=dwz.data(t,"_events")||{};if(n[e]&&0<n[e].length){if(void 0===a)return!0;for(var i=0;i<n[e].length;i++)if(a===n[e][i].fn)return!0}return!1},getDistance:function(t,e,a,n){t=Math.abs(a-t),e=Math.abs(n-e);return Math.sqrt(t*t+e*e)},getCenterPos:function(t,e,a,n){var i=Math.min(t,a),t=Math.max(t,a),a=Math.min(e,n);return{x:i+(t-i)/2,y:a+(Math.max(e,n)-a)/2}}},contains:document.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e=e&&e.parentNode;)if(e===t)return!0;return!1},offset:function(t){t=t.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},position:function(t){if(t){var e=dwz.offsetParent(t),a=dwz.offset(t),n=dwz.rootNodeRE.test(e.nodeName)?{top:0,left:0}:dwz.offset(e);return a.top-=parseFloat(t.style.marginTop)||0,a.left-=parseFloat(t.style.marginLeft)||0,n.top+=parseFloat(e.style.borderTopWidth)||0,n.left+=parseFloat(e.style.borderLeftWidth)||0,{top:a.top-n.top,left:a.left-n.left}}},offsetParent:function(t){for(var e=t.offsetParent||document.body;e&&!dwz.rootNodeRE.test(e.nodeName)&&"static"==e.style.position;)e=e.offsetParent;return e},hasClass:function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},addClass:function(t,e){var a=t.className.replace(/[\t\r\n]/g," ");return dwz.each(e.split(/\s+/),function(){dwz.hasClass(t,this)||(a+=" "+this)}),t.className=a.replace(/^\s+|\s+$/g,""),t},removeClass:function(t,e){var a=" "+t.className.replace(/[\t\r\n]/g," ")+" ";return dwz.each(e.split(/\s+/),function(){for(;0<=a.indexOf(" "+this+" ");)a=a.replace(" "+this+" "," ")}),t.className=a.replace(/^\s+|\s+$/g,""),t},toggleClass:function(t,e){return this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e),t},attr:function(t,e,a){return t!==document&&t!==window&&(void 0===a?t.getAttribute(e):void(null===a?t.removeAttribute(e):t.setAttribute(e,a)))},prop:function(t,e,a){return!!$.inArray(e,["checked","selected","disabled"])&&(void 0===a?t[e]:void(t[e]=a&&!0))},css:function(t,e,a){if(void 0!==a)t.style[e]=a;else{if("string"==typeof e)return(t.currentStyle||document.defaultView.getComputedStyle(t,null))[e];for(var n in e)t.style[n]=e[n]}},data:function(t,e,a){if(t.dwz_data=t.dwz_data||{},void 0===e)return t.dwz_data;if("string"==typeof e){var n=dwz.camelCase(e);if(void 0===a)return t.dwz_data[n];t.dwz_data[n]=a}else if("object"===(void 0===e?"undefined":_typeof(e)))for(var i in e){var r=dwz.camelCase(i);t.dwz_data[r]=e[i]}},removeData:function(t,e){t.dwz_data&&delete t.dwz_data[e]},cacheCss:function(t,e,a){var n=dwz.data(t,"_css")||{},i=dwz.css(t,e);return a&&i!=a&&(n[e]=i,dwz.data(t,"_css",n)),n[e]},camelCase:function(t){return t.replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})},html:function(t,e){if(void 0===e)return t.innerHTML;"string"==typeof e?t.innerHTML=e.replace(/<script(.|\n)*?>(.|\n|\r\n)*?<\/script>/gi,""):dwz.instanceOf(e)?(t.innerHTML="",e.each(function(){t.appendChild(this)})):t.innerHTML=e},text:function(t,e){if(void 0===e){var a=t.innerText||t.textContent;return a?a.trim():""}void 0!==t.innerText?t.innerText=e:t.textContent=e},selectionPos:function(t){var e,a=$.extend({top:0,left:0,width:0,heigth:0,start:0,paddingLeft:0},dwz.offset(t));return a.paddingLeft=parseInt(dwz.css(t,"padding-left")),document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),a.start=e.text.length):!t.selectionStart&&"0"!=t.selectionStart||(a.cursorStart=t.selectionStart),a},param:function(t){var e="";if(dwz.isArray(t))for(var a=0;a<t.length;a++)e+=(e?"&":"")+t[a].name+"="+(t[a].value+"").encodeParam();else for(var n in t)e+=(e?"&":"")+n+"="+(t[n]+"").encodeParam();return e},parseJSON:function(t){return JSON.parse(t+"")},parseXML:function(t){var e=void 0;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||dwz.error("Invalid XML: "+t),e},parseHTML:function(t,e){var a=document.createElement("div");return a.innerHTML=t,e?a.querySelectorAll(":scope > *"):a.querySelector("*")}}),dwz.extend(String.prototype,{encodeUnicode:function(){for(var t=[],e=0;e<this.length;e++)t[e]=("00"+this.charCodeAt(e).toString(16)).slice(-4);return"\\u"+t.join("\\u")},decodeUnicode:function(){var t=this.replace(/\\/g,"%");return unescape(t)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return 0<=e&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},getRequestURI:function(){var t=this.indexOf("?");return-1==t?this+"":this.substr(0,t)},getParams:function(t){var e={},a=this.indexOf("?");if(-1!=a)for(var n=this.substr(a+1).split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=t?r[1].encodeParam():r[1];e[r[0]]=1<r.length?o:""}return e},encodeParam:function(){return encodeURIComponent(this).replace(dwz.config.rCRLF,"\r\n").replace(dwz.config.r20,"+")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replaceTm:function(e){return e?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(t){return e[t.replace(/[{}]+/g,"")]}):this},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(){return new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this)},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isMobile:function(){return new RegExp(/(^[0-9]{11,11}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%#&=:]*)$/).test(this)},parseCurrency:function(t){var e=parseFloat(this);return parseFloat(e.toFixed(t||2))}}),dwz.extend(Number.prototype,{roundFloat:function(t){var e=0<arguments.length&&void 0!==t?t:3;return Math.round(this*Math.pow(10,e))/Math.pow(10,e)},formatCurrency:function(t){var e=(e=this).toString().replace(/\$|\,/g,"");isNaN(e)&&(e="0");var a=e==(e=Math.abs(e)),n=(e=Math.floor(100*e+.50000000001))%100;if(e=Math.floor(e/100).toString(),n<10&&(n="0"+n),t)for(var i=0;i<Math.floor((e.length-(1+i))/3);i++)e=e.substring(0,e.length-(4*i+3))+","+e.substring(e.length-(4*i+3));return(a?"":"-")+e+"."+n},parseCurrency:function(t){return parseFloat(this.toFixed(t||2))}}),dwz.fn.extend({initUI:function(){return this.each(function(){var e=$(this);$.each(dwz.regPlugins,function(t){this(e)})})},on:function(t,e,a){return this.each(function(){dwz.event.add(this,t,e,a)})},off:function(t,e){return this.each(function(){dwz.event.remove(this,t,e)})},trigger:function(t,e){return this.each(function(){dwz.event.trigger(this,t,e)})},isBind:function(t,e){return dwz.event.isBind(this.get(0),t,e)},onPageClear:function(t,e){return this.on(dwz.event.type.pageClear,t,e)},offPageClear:function(t,e){return this.off(dwz.event.type.pageClear,t,e)},triggerPageClear:function(t){return this.trigger(dwz.event.type.pageClear,t)},click:function(t,e){return $.event.hasTouch&&$.fn.touchwipe?this.touchwipe({touch:e||t,data:e?t:void 0}):this.on($.event.hasTouch?"touchstart":"click",t,e)},change:function(t,e){return this.on("change",t,e)},offset:function(){return dwz.offset(this.get(0))},position:function(){return dwz.position(this.get(0))},offsetParent:function(){return dwz.offsetParent(this.get(0))},show:function(){return this.each(function(){var t=dwz.cacheCss(this,"display","none")||"block";this.style.display=t})},hide:function(){return this.each(function(){dwz.cacheCss(this,"display","none"),this.style.display="none"})},toggle:function(){return this.each(function(){var t=dwz.cacheCss(this,"display","none")||"block";this.style.display="none"==this.style.display?t:"none"})},hasClass:function(t){return 0===this.size()||dwz.hasClass(this.get(0),t)},addClass:function(t){return this.each(function(){dwz.addClass(this,t)})},removeClass:function(t){return this.each(function(){dwz.removeClass(this,t)})},toggleClass:function(t){return this.each(function(){dwz.toggleClass(this,t)})},attr:function(t,e){return void 0===e?dwz.attr(this.get(0),t):this.each(function(){dwz.attr(this,t,e)})},removeAttr:function(t){return this.each(function(){dwz.attr(this,t,null)})},prop:function(t,e){return void 0===e?dwz.prop(this.get(0),t):this.each(function(){dwz.prop(this,t,e)})},data:function(t,e){return"object"===(void 0===t?"undefined":_typeof(t))||void 0===e?dwz.data(this.get(0),t):this.each(function(){dwz.data(this,t,e)})},css:function(e,t){return void 0!==t?this.each(function(){this.style[e]=t}):void 0===e?this.get(0).style:"string"==typeof e?dwz.css(this.get(0),e):this.each(function(){for(var t in e)this.style[t]=e[t]})},width:function(t){var e=parseFloat(this.css("width"));return t&&(e+=parseFloat(this.css("marginLeft")),e+=parseFloat(this.css("marginRight"))),e},height:function(t){var e=parseFloat(this.css("height"));return t&&(e+=parseFloat(this.css("marginTop")),e+=parseFloat(this.css("marginBottom"))),e},outerWidth:function(t){return this.width(t)+parseFloat(this.css("borderLeft"))+parseFloat(this.css("borderRight"))},outerHeight:function(t){return this.height(t)+parseFloat(this.css("borderTop"))+parseFloat(this.css("borderTop"))},html:function(t){var e=dwz.html(this.get(0),t);return void 0===t?e:this},text:function(t){var e=dwz.text(this.get(0),t);return void 0===t?e:this},prepend:function(t){var e=this.get(0);return $(t).each(function(){e.insertBefore(this,e.firstChild)}),this},append:function(t){var e=this.get(0);return $(t).each(function(){e.appendChild(this)}),this},after:function(t){return this.parent().append(t)},prependTo:function(e){return dwz.instanceOf(e)&&(e=e.get(0)),this.each(function(t){e.insertBefore(this,e.firstChild)}),this},appendTo:function(e){return dwz.instanceOf(e)&&(e=e.get(0)),this.each(function(t){e.appendChild(this)}),this},afterTo:function(t){return dwz.instanceOf(t)&&(t=t.get(0)),this.appendTo(t.parentNode)},remove:function(){return this.each(function(t){this.parentNode.removeChild(this)})},wrap:function(e){var a=dwz.isFunction(e);return this.each(function(t){t=dwz.parseHTML(a?e.call(this,t):e);this.parentNode.appendChild(t),t.appendChild(this)})},clone:function(){return dwz(this.get(0).cloneNode(!0))},selectionPos:function(){return dwz.selectionPos(this.get(0))},serialize:function(){return dwz.param(this.serializeArray())},serializeArray:function(){var a=[];return this.is("form")&&this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)&&(this.checked||!dwz.config.rcheckableType.test(t))}).each(function(){var t=$(this).val()||"",e=this.name;a.push({name:e,value:t})}),a},serializeMap:function(){var e={};return this.is("form")&&this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)&&(this.checked||!dwz.config.rcheckableType.test(t))}).each(function(){var t=$(this).val()||"";e[this.name]="number"==this.type||"range"==this.type?parseFloat(t)||0:t}),e},getPagerForm:function(t){var e=$(this.attr("rel")),a=e.get(0);return a&&("number"==typeof t?a[dwz.config.pageInfo.pageNum].value=t:"next"==t&&(a[dwz.config.pageInfo.pageNum].value=parseInt(a[dwz.config.pageInfo.pageNum].value)+1)),e},val:function(a){var n,i=void 0,t=void 0,e=this.get(0);return arguments.length?(n=dwz.isFunction(a),this.each(function(t){var e=void 0;1===this.nodeType&&(null==(e=n?a.call(this,t,dwz(this).val()):a)?e="":"number"==typeof e?e+="":dwz.isArray(e)&&(e=dwz.each(e,function(){return null==this?"":this+""})),(i=dwz.valHooks[this.type]||dwz.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=dwz.valHooks[e.type]||dwz.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(dwz.config.rreturn,""):null==t?"":t:void 0},hrefFix:function(){return this.each(function(){var t=$(this),e=t.attr("href");e&&"javascript:"!=e&&t.attr("data-href",e).attr("href","javascript:")})}}),dwz.extend({valHooks:{option:{get:function(t){var e=dwz.attr(t,"value");return null!=e?e:dwz.text(t)}},select:{get:function(t){for(var e,a,n=t.options,i=t.selectedIndex,r="select-one"===t.type||i<0,o=r?null:[],s=r?i+1:n.length,l=i<0?s:r?i:0;l<s;l++)if(((a=n[l]).selected||l===i)&&!a.disabled&&(!a.parentNode.disabled||!dwz.nodeName(a.parentNode,"optgroup"))){if(e=dwz(a).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var a=void 0,n=void 0,i=t.options,r=dwz.makeArray(e),o=i.length;o--;)((n=i[o]).selected=dwz.inArray(n.value,r))&&(a=!0);return a||(t.selectedIndex=-1),r}}}}),dwz.each(["radio","checkbox"],function(){dwz.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"1":t.value},set:function(t,e){if(dwz.isArray(e))return t.checked=dwz.inArray(dwz(t).val(),e)}}}),dwz.extend({active:0,ajaxSettings:{type:"POST",global:!1,cache:!1,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"*",headers:{"X-Requested-With":"XMLHttpRequest"},accepts:{"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{json:dwz.parseJSON,xml:dwz.parseXML}},ajaxSetup:function(t){return dwz.extend(dwz.ajaxSettings,t)},dataFilter:function(t,e){var a=t[e.responseFields[e.dataType]||e.responseFields.text]||t.responseText,e=e.converters[e.dataType];return e&&(a=e.call(t,a)),a},ajax:function(t){var e=dwz.extend({},dwz.ajaxSettings,t);e.type=e.type.toUpperCase(),e.header&&dwz.extend(e.headers,e.header),e.global&&0==dwz.active++&&dwz.event.trigger(document,"ajaxStart");var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHttp"),n=e.url,i="";e.cache||(n=e.url+(-1==e.url.indexOf("?")?"?":"&")+"t="+(new Date).getTime()),"GET"!=e.type||!e.data||(t="string"==typeof e.data?e.data:dwz.param(e.data))&&(n+=(-1==n.indexOf("?")?"?":"&")+t),window.debuggap&&0!==n.indexOf("http")&&(n=window.location.origin+"/"+n),a.open(e.type,n,e.async);var r,n=(n=e.accepts[e.dataType])?n+", "+e.accepts["*"]+"; q=0.01":e.accepts["*"];for(r in a.setRequestHeader("Accept",n),e.headers)a.setRequestHeader(r,e.headers[r]);"POST"==e.type&&e.data&&("POST"==e.type&&e.contentType&&a.setRequestHeader("content-type",e.contentType),i="string"==typeof e.data?e.data:dwz.param(e.data)),a.onreadystatechange=function(){var t;4==a.readyState&&(t=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,200<=a.status&&a.status<300||304===a.status||0==a.status&&"file:"==t?(t=dwz.dataFilter(a,e),e.success&&e.success(t,a.status,a)):e.error&&e.error(a,a.status),e.complete&&e.complete(a,a.status),e.global&&!--dwz.active&&dwz.event.trigger(document,"ajaxStop"))},a.send(i)},setRegional:function(t,e){dwz.regional||(dwz.regional={}),dwz.regional[t]=e}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function validateCallback(t,e,a){var n=$(t);if(!n.valid())return!1;var i,r=n.serializeArray();return a&&($.isFunction(a)?(a=a.call(t,n),r.forEach(function(t,e){t.name.startsWith("__")||a.push(t)}),r=a):r.push({name:"_data",value:JSON.stringify(a)})),"application/json"==n.attr("enctype")?(i={},r.forEach(function(t){i[t.name]=t.value}),$.ajax({global:!0,type:t.method||"POST",url:n.attr("action"),data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=UTF-8",cache:!1,success:e||dwz.ajaxDone,error:dwz.ajaxError})):$.ajax({global:!0,type:t.method||"POST",url:n.attr("action"),data:r,dataType:"json",cache:!1,success:e||dwz.ajaxDone,error:dwz.ajaxError}),!1}function iframeCallback(t,e){var a=$(t),n=$("#callbackframe");if(!a.valid())return!1;0==n.size()&&($("body").append('<iframe id="callbackframe" name="callbackframe" src="about:blank" style="display:none"></iframe>'),n=$("#callbackframe")),t.target="callbackframe",_iframeResponse(n,e||dwz.ajaxDone)}function _iframeResponse(n,i){var r=n.get(0),o=$(document);o.trigger("ajaxStart");function s(t){if(n.off("load",s),o.trigger("ajaxStop"),"javascript:'%3Chtml%3E%3C/html%3E';"!=r.src&&"javascript:'<html></html>';"!=r.src){var e=r.contentDocument||r.document;if(!(e.readyState&&"complete"!=e.readyState||e.body&&"false"==e.body.innerHTML)){var a=void 0;if(e.XMLDocument)a=e.XMLDocument;else if(e.body)try{a=r.contentDocument.body.innerText,a=$.parseJSON(a)}catch(t){a=e.body.innerText}else a=e;i(a)}}}n.on("load",s)}function navViewAjaxDone(t){$.ajaxDone(t),$.isAjaxStatusOk(t)&&("closeCurrent"==t.callbackType?$.navView.close():"forward"==t.callbackType&&$.navView.reload({url:t.forwardUrl}),t.navTabId?$.navTab.open({tabid:t.navTabId,url:t.forwardUrl}):t.navViewId&&$.navView.open({rel:t.navViewId,url:t.forwardUrl}))}function navViewAjaxDoneReload(t){$.ajaxDone(t),$.isAjaxStatusOk(t)&&$.navView.getBoxs(3).forEach(function(t){0==t.find("form.dwz-list-form").trigger("submit").size()&&t.data("ajaxDoneReload")&&$.navView.reload()})}function navViewAjaxDoneClose(t){$.isAjaxStatusOk(t)&&$.navView.close(),navViewAjaxDoneReload(t)}function dialogAjaxDone(t){$.ajaxDone(t),$.isAjaxStatusOk(t)&&("closeCurrent"==t.callbackType?$.dialog.close():"forward"==t.callbackType&&$.dialog.open({url:t.forwardUrl}),t.navTabId?$.navTab.open({tabid:t.navTabId,url:t.forwardUrl}):t.navViewId&&$.navView.open({rel:t.navViewId,url:t.forwardUrl}))}!function(t){"use strict";function u(t,e){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}function s(t,e,a,n,i,r){return u((r=u(u(e,t),u(n,r)))<<(i=i)|r>>>32-i,a)}function h(t,e,a,n,i,r,o){return s(e&a|~e&n,t,e,i,r,o)}function p(t,e,a,n,i,r,o){return s(e&n|a&~n,t,e,i,r,o)}function f(t,e,a,n,i,r,o){return s(e^a^n,t,e,i,r,o)}function g(t,e,a,n,i,r,o){return s(a^(e|~n),t,e,i,r,o)}function o(t,e){var a,n,i,r;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var o=1732584193,s=-271733879,l=-1732584194,c=271733878,d=0;d<t.length;d+=16)o=h(a=o,n=s,i=l,r=c,t[d],7,-680876936),c=h(c,o,s,l,t[d+1],12,-389564586),l=h(l,c,o,s,t[d+2],17,606105819),s=h(s,l,c,o,t[d+3],22,-1044525330),o=h(o,s,l,c,t[d+4],7,-176418897),c=h(c,o,s,l,t[d+5],12,1200080426),l=h(l,c,o,s,t[d+6],17,-1473231341),s=h(s,l,c,o,t[d+7],22,-45705983),o=h(o,s,l,c,t[d+8],7,1770035416),c=h(c,o,s,l,t[d+9],12,-1958414417),l=h(l,c,o,s,t[d+10],17,-42063),s=h(s,l,c,o,t[d+11],22,-1990404162),o=h(o,s,l,c,t[d+12],7,1804603682),c=h(c,o,s,l,t[d+13],12,-40341101),l=h(l,c,o,s,t[d+14],17,-1502002290),o=p(o,s=h(s,l,c,o,t[d+15],22,1236535329),l,c,t[d+1],5,-165796510),c=p(c,o,s,l,t[d+6],9,-1069501632),l=p(l,c,o,s,t[d+11],14,643717713),s=p(s,l,c,o,t[d],20,-373897302),o=p(o,s,l,c,t[d+5],5,-701558691),c=p(c,o,s,l,t[d+10],9,38016083),l=p(l,c,o,s,t[d+15],14,-660478335),s=p(s,l,c,o,t[d+4],20,-405537848),o=p(o,s,l,c,t[d+9],5,568446438),c=p(c,o,s,l,t[d+14],9,-1019803690),l=p(l,c,o,s,t[d+3],14,-187363961),s=p(s,l,c,o,t[d+8],20,1163531501),o=p(o,s,l,c,t[d+13],5,-1444681467),c=p(c,o,s,l,t[d+2],9,-51403784),l=p(l,c,o,s,t[d+7],14,1735328473),o=f(o,s=p(s,l,c,o,t[d+12],20,-1926607734),l,c,t[d+5],4,-378558),c=f(c,o,s,l,t[d+8],11,-2022574463),l=f(l,c,o,s,t[d+11],16,1839030562),s=f(s,l,c,o,t[d+14],23,-35309556),o=f(o,s,l,c,t[d+1],4,-1530992060),c=f(c,o,s,l,t[d+4],11,1272893353),l=f(l,c,o,s,t[d+7],16,-155497632),s=f(s,l,c,o,t[d+10],23,-1094730640),o=f(o,s,l,c,t[d+13],4,681279174),c=f(c,o,s,l,t[d],11,-358537222),l=f(l,c,o,s,t[d+3],16,-722521979),s=f(s,l,c,o,t[d+6],23,76029189),o=f(o,s,l,c,t[d+9],4,-640364487),c=f(c,o,s,l,t[d+12],11,-421815835),l=f(l,c,o,s,t[d+15],16,530742520),o=g(o,s=f(s,l,c,o,t[d+2],23,-995338651),l,c,t[d],6,-198630844),c=g(c,o,s,l,t[d+7],10,1126891415),l=g(l,c,o,s,t[d+14],15,-1416354905),s=g(s,l,c,o,t[d+5],21,-57434055),o=g(o,s,l,c,t[d+12],6,1700485571),c=g(c,o,s,l,t[d+3],10,-1894986606),l=g(l,c,o,s,t[d+10],15,-1051523),s=g(s,l,c,o,t[d+1],21,-2054922799),o=g(o,s,l,c,t[d+8],6,1873313359),c=g(c,o,s,l,t[d+15],10,-30611744),l=g(l,c,o,s,t[d+6],15,-1560198380),s=g(s,l,c,o,t[d+13],21,1309151649),o=g(o,s,l,c,t[d+4],6,-145523070),c=g(c,o,s,l,t[d+11],10,-1120210379),l=g(l,c,o,s,t[d+2],15,718787259),s=g(s,l,c,o,t[d+9],21,-343485551),o=u(o,a),s=u(s,n),l=u(l,i),c=u(c,r);return[o,s,l,c]}function l(t){for(var e="",a=32*t.length,n=0;n<a;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}function c(t){var e=[];for(e[(t.length>>2)-1]=void 0,n=0;n<e.length;n+=1)e[n]=0;for(var a=8*t.length,n=0;n<a;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}function n(t){for(var e,a="0123456789abcdef",n="",i=0;i<t.length;i+=1)e=t.charCodeAt(i),n+=a.charAt(e>>>4&15)+a.charAt(15&e);return n}function a(t){return unescape(encodeURIComponent(t))}function i(t){return l(o(c(t=a(t)),8*t.length))}function r(t,e){return function(t,e){var a,n=c(t),i=[],r=[];for(i[15]=r[15]=void 0,16<n.length&&(n=o(n,8*t.length)),a=0;a<16;a+=1)i[a]=909522486^n[a],r[a]=1549556828^n[a];return e=o(i.concat(c(e)),512+8*e.length),l(o(r.concat(e),640))}(a(t),a(e))}function e(t,e,a){return e?a?r(e,t):n(r(e,t)):a?i(t):n(i(t))}"function"==typeof define&&define.amd?define(function(){return e}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=e),t.md5=e}(dwz),function(){var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");function LZ(t){return(t<0||9<t?"":"0")+t}function formatDate(t,e){e+="";var a,n="",i=0,r="",o=t.getYear()+"",s=t.getMonth()+1,l=t.getDate(),c=t.getDay(),d=t.getHours(),u=t.getMinutes(),t=t.getSeconds(),h={};for(o.length<4&&(o=""+(+o+1900)),h.y=""+o,h.yyyy=o,h.yy=o.substring(2,4),h.M=s,h.MM=LZ(s),h.MMM=MONTH_NAMES[s-1],h.NNN=MONTH_NAMES[s+11],h.d=l,h.dd=LZ(l),h.E=DAY_NAMES[c+7],h.EE=DAY_NAMES[c],h.H=d,h.HH=LZ(d),h.h=0==d?12:12<d?d-12:d,h.hh=LZ(h.h),h.K=11<d?d-12:d,h.k=d+1,h.KK=LZ(h.K),h.kk=LZ(h.k),h.a=11<d?"PM":"AM",h.m=u,h.mm=LZ(u),h.s=t,h.ss=LZ(t);i<e.length;){for(a=e.charAt(i),r="";e.charAt(i)==a&&i<e.length;)r+=e.charAt(i++);null!=h[r]?n+=h[r]:n+=r}return n}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,a,n){for(var i=n;a<=i;i--){var r=t.substring(e,e+i);if(r.length<a)return null;if(_isInteger(r))return r}return null}function parseDate(t,e){t+="",e+="";for(var a,n=0,i=0,r="",o=void 0,s=void 0,l=new Date(1900,0,1),c=l.getYear(),d=l.getMonth()+1,u=1,h=l.getHours(),p=l.getMinutes(),f=l.getSeconds(),g="";i<e.length;){for(a=e.charAt(i),r="";e.charAt(i)==a&&i<e.length;)r+=e.charAt(i++);if("yyyy"==r||"yy"==r||"y"==r){if("yyyy"==r&&(s=o=4),"yy"==r&&(s=o=2),"y"==r&&(o=2,s=4),null==(c=_getInt(t,n,o,s)))return 0;n+=c.length,2==c.length&&(c=70<c?+c+1900:+c+2e3)}else if("MMM"==r||"NNN"==r){for(var m=d=0;m<MONTH_NAMES.length;m++){var v=MONTH_NAMES[m];if(t.substring(n,n+v.length).toLowerCase()==v.toLowerCase()&&("MMM"==r||"NNN"==r&&11<m)){12<(d=m+1)&&(d-=12),n+=v.length;break}}if(d<1||12<d)return 0}else if("EE"==r||"E"==r)for(var b=0;b<DAY_NAMES.length;b++){var y=DAY_NAMES[b];if(t.substring(n,n+y.length).toLowerCase()==y.toLowerCase()){n+=y.length;break}}else if("MM"==r||"M"==r){if(null==(d=_getInt(t,n,r.length,2))||d<1||12<d)return 0;n+=d.length}else if("dd"==r||"d"==r){if(null==(u=_getInt(t,n,r.length,2))||u<1||31<u)return 0;n+=u.length}else if("hh"==r||"h"==r){if(null==(h=_getInt(t,n,r.length,2))||h<1||12<h)return 0;n+=h.length}else if("HH"==r||"H"==r){if(null==(h=_getInt(t,n,r.length,2))||h<0||23<h)return 0;n+=h.length}else if("KK"==r||"K"==r){if(null==(h=_getInt(t,n,r.length,2))||h<0||11<h)return 0;n+=h.length}else if("kk"==r||"k"==r){if(null==(h=_getInt(t,n,r.length,2))||h<1||24<h)return 0;n+=h.length,h--}else if("mm"==r||"m"==r){if(null==(p=_getInt(t,n,r.length,2))||p<0||59<p)return 0;n+=p.length}else if("ss"==r||"s"==r){if(null==(f=_getInt(t,n,r.length,2))||f<0||59<f)return 0;n+=f.length}else if("a"==r){if("am"==t.substring(n,n+2).toLowerCase())g="AM";else{if("pm"!=t.substring(n,n+2).toLowerCase())return 0;g="PM"}n+=2}else{if(t.substring(n,n+r.length)!=r)return 0;n+=r.length}}if(n!=t.length)return 0;if(2==d)if(c%4==0&&c%100!=0||c%400==0){if(29<u)return 0}else if(28<u)return 0;return(4==d||6==d||9==d||11==d)&&30<u?0:(h<12&&"PM"==g?h=+h+12:11<h&&"AM"==g&&(h-=12),new Date(c,d-1,u,h,p,f))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),a=this.getMonth()+1,n=this.getDate(),i=1900,r=0,o=1,n=replaceTmEval(t.replaceAll("%y",e).replaceAll("%M",a).replaceAll("%d",n)).split("-");return 0<n.length&&(i=n[0]),1<n.length&&(r=n[1]-1),2<n.length&&(o=n[2]),new Date(i,r,o).formatDate("yyyy-MM-dd")}}(),function(s){s.plus={openImg:function(n){var e=api.require("FNPhotograph"),i=api.require("imageFilter");e.open({path:"fs://savePath",album:!0,quality:"medium"},function(t){var a;"takePhoto"==t.eventType&&(console.log(JSON.stringify(t)),e.close(),a="small_"+(new Date).getTime()+".jpg",i.compress({img:t.imagePath,quality:.5,scale:.5,save:{imgPath:"fs://smallImage",imgName:a}},function(t,e){console.log(JSON.stringify(t)),t.status?(console.log("fs://smallImage/"+a),n("fs://smallImage/"+a)):console.log(JSON.stringify(e))}))})},chooseImage:function(e){var a=this;biz.checkPermission&&!biz.checkPermission("camera","摄像头")||api.actionSheet({title:e.title||"上传图片",cancelTitle:"取消",buttons:["拍照","从手机相册选择"]},function(t){switch(t.buttonIndex){case 0:break;case 1:e.sourceType="camera",a.captureImage(e);break;case 2:e.sourceType="library",a.captureImage(e)}})},captureImage:function(t){var a=s.extend({sourceType:"camera",maxWidth:800,maxHeight:800,callback:null,destinationType:"url"},t);if(biz.checkPermission){if("camera"==a.sourceType&&!biz.checkPermission("camera","摄像头"))return;if("library"==a.sourceType&&!biz.checkPermission("photos","相册"))return}api.getPicture({sourceType:a.sourceType,encodingType:"jpg",mediaValue:"pic",destinationType:a.destinationType,allowEdit:!1,quality:50,targetWidth:a.maxWidth,targetHeight:a.maxHeight,saveToPhotoAlbum:!1},function(t,e){t?a.callback&&a.callback(t.base64Data||t.data):alert(JSON.stringify(e))})},compressImage:function(t){return this.getBase64Image(t)},getBase64Image:function(t){var n=s.extend({imgPath:"",maxWidth:800,maxHeight:800,callback:null},t),i=new Image;i.src=n.imgPath,i.onload=function(){var t=document.createElement("canvas"),e=i.width,a=i.height;a<e?e>n.maxWidth&&(a=Math.round(a*=n.maxWidth/e),e=n.maxWidth):a>n.maxHeight&&(e=Math.round(e*=n.maxHeight/a),a=n.maxHeight),t.width=e,t.height=a,t.getContext("2d").drawImage(i,0,0,e,a);t=t.toDataURL("image/jpeg",.8);n.callback&&n.callback(t)}}},s.fn.extend({previewUploadImg:function(t){var r=s.extend({maxW:80,maxH:80,maxCount:4,inputName:"pics[]",callback:null},t);return this.each(function(){var e=s(this),t=s(e.attr("rel")),a=t.get(0),n=e.find("button"),i=t.find("li").size();i+1>=r.maxCount&&e.hide(),n.touchwipe({touch:function(){(i=t.find("li").size())<r.maxCount&&dwz.plus.chooseImage({maximum:r.maxCount-i,destinationType:"base64",callback:function(t){s.plus.getBase64Image({imgPath:t,maxWidth:r.maxWidth,maxHeight:r.maxHeight,callback:function(t){!function(t,a,e,n,i){var r=document.createElement("li");r.classList.add("thumbnail");var o=document.createElement("img");o.src=a,r.appendChild(o),t.appendChild(r),e=dwz.parseHTML('<input type="hidden" name="'+e+'" value="'+a+'">'),r.appendChild(e),o.onload=function(){var t=o.naturalWidth,e=o.naturalHeight;o.setAttribute("data-width",t),o.setAttribute("data-height",e),o.setAttribute("data-src",a),n&&i&&(e/i<t/n?o.setAttribute("width",n):o.setAttribute("height",i))},s(t).hasClass("dwz-ctl-del")&&s('<a class="img-del"></a>').prependTo(r).click(function(t){s(r).remove(),t.stopPropagation()})}(a,t,r.inputName,r.maxW,r.maxH)}}),i+1>=r.maxCount&&e.hide(),r.callback&&r.callback(t)}})}})})},previewImg:function(t){s.extend({attrW:"data-width",attrH:"data-height",attrSrc:"data-src"},t);return this.each(function(){var a=s(this);a.touchwipe({touch:function(t){t.preventDefault(),t.stopPropagation();var e=a.find("img");s.previewBigImg.open(e,t)}})})}}),s.previewBigImg={isOpen:!1,autoLayout:function(){var t=s("#preview-big-img"),e=document.body.offsetWidth,a=(window.screen.availHeight,t.find(".bd li"));a.each(function(){s(this).css({width:e+"px"})}),t.find(".bd ul").css({width:e*a.size()+"px"})},open:function(t,a){var e=this,n=s("#preview-big-img");0==n.size()&&(s("body").append('<div id="preview-big-img" style="display:none"></div>'),(n=s("#preview-big-img")).touchwipe({touch:function(t){t.preventDefault(),t.stopPropagation(),e.close(!0)}}));document.body.offsetWidth;var i="",r="",o=0;t.each(function(t){var e=s(this),e=e.attr("data-src")||e.attr("src");i+='<li><div class="pop-inner"><img src="'+e+'"></div></li>',r+='<li class="'+(0==t?"on":"")+'"></li>',a.target==this&&(o=t)}),n.html('<div class="dwz-slide" data-auto-play="false" data-loop="false" data-zoom="true" data-open-index="#currentIndex#">\n\t\t\t\t\t<div class="bd"><ul>#li#</ul></div><div class="hd"><ul>#item#</ul></div>\n\t\t\t\t\t</div>'.replaceAll("#li#",i).replaceAll("#item#",r).replaceAll("#currentIndex#",o)).show().initUI(),window.addEventListener("resize",e.autoLayout,!1),e.autoLayout(),s.history&&s.history.add("previewBigImg"),this.isOpen=!0},close:function(t){var e=s("#preview-big-img");0!=e.size()&&(this._scroll&&(this._scroll.destroy(),this._scroll=null),e.html("").hide(),window.removeEventListener("resize",this.autoLayout,!1),s.history&&t&&s.history.pop(),this.isOpen=!1)}}}(dwz),function(n){n.extend({history:{_hash:new Array,_currentHash:"",_isPop:!1,_isHis:!0,init:function(t,e){var a=e||location.hash;a&&(n.history._currentHash=a.skipChar("#").replace("?","|"),n.isFunction(t)&&setTimeout(function(){t(a.skipChar("#").replace("|","?"))},200)),window.onhashchange=n.history._check},_check:function(){var t=location.hash.skipChar("#").replace("?","|");t||n(window).trigger("hash.empty"),!n.history._isHis&&n.history._isPop||!t||t==n.history._currentHash||(n.history._currentHash=t,n.history.load(t)),n.history._isHis=!0},add:function(t,e,a){t=t.replace("?","|").replace(/\?.*$/,""),n.history._isPop=!1,n.history._currentHash=t,n.history._hash.push([t,e,a]),location.hash=t},pop:function(t){t?(n.history._isPop=!0,n.history._isHis=!1):(n.history._isPop=!1,n.history._isHis=!0),0<n.history._hash.length?(n.history._hash.pop(),t&&history.back()):n(window).trigger("hash.empty.pop")},load:function(t){for(var e=0;e<n.history._hash.length;e+=1){var a=n.history._hash[e][1];if(n.history._hash[e][0]==t&&a)return void a(n.history._hash[e][2])}}}})}(dwz),function(y){y.fn.extend({touchwipe:function(t){var b={min_move_x:30,min_move_y:30,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},touch:null,touchstart:null,touchmove:null,touchend:null,longpress:null,direction:"vertical",preventDefaultEvents:!1,stopPropagationEvents:!1,data:null};return t&&y.extend(b,t),this.each(function(){var n=y(this),i=0,r=0,o=0,s=0,l=0,c=0,d=0,u=0,h=null,p=0,f=null,a={dx:0,dy:0};function g(){y.event.remove(n.get(0),"touchmove",m),y.event.remove(n.get(0),"mousemove",m)}function m(t){var e;h&&((e={startX:i,startY:r,endX:l,endY:c,startX2:o,startY2:s,endX2:l,endY2:c,x:("mousemove"==t.type?t:t.touches[0]).pageX,y:("mousemove"==t.type?t:t.touches[0]).pageY,touchType:h}).dx=i-e.x,e.dy=r-e.y,l=e.x,c=e.y,t.touches&&1<t.touches.length&&(e.x2=t.touches[1].pageX,e.y2=t.touches[1].pageY,d=e.x2,u=e.y2),!f&&(Math.abs(e.dx)>b.min_move_x||Math.abs(e.dy)>b.min_move_y)&&(f=Math.abs(e.dx)>Math.abs(e.dy)?"horizontal":"vertical"),Math.abs(e.dx)>a.dx&&(a.dx=e.dx),Math.abs(e.dy)>a.dy&&(a.dy=e.dy),b.touchmove?b.direction!=f&&"all"!=b.direction||b.touchmove.call(this,t,e):Math.abs(e.dx)>=b.min_move_x?(g(),(0<e.dx?b.wipeLeft:b.wipeRight).call(this,t,e)):Math.abs(e.dy)>=b.min_move_y&&(g(),(0<e.dy?b.wipeUp:b.wipeDown).call(this,t,e)),"mousemove"==t.type&&0===t.buttons&&(g(),v(t))),b.longpress&&p&&(clearTimeout(p),p=0)}function t(t){var e,a=this;if(f=null,b.preventDefaultEvents&&t.preventDefault(),b.stopPropagationEvents&&t.stopPropagation(),t.data=b.data,"mousedown"==t.type)i=l=t.pageX,r=c=t.pageY,h="touch",y.event.add(n.get(0),"mousemove",m);else{if(!t.touches.length)return;i=l=t.touches[0].pageX,r=c=t.touches[0].pageY,h="touch",1<t.touches.length&&(o=d=t.touches[1].pageX,s=u=t.touches[1].pageY,h="zoom"),y.event.add(n.get(0),"touchmove",m)}b.touchstart&&(e={x:i,y:r,x2:o,y2:s,touchType:h},b.touchstart.call(this,t,e)),b.longpress&&(p=setTimeout(function(){b.longpress.call(a,t),p=0},500))}function v(t){var e;t.data=b.data,b.touchend&&(e={startX:i,startY:r,x:l,y:c,dx:i-l,dy:r-c,startX2:o,startY2:s,x2:d,y2:u,touchType:h},b.touchend.call(this,t,e)),"touch"==h&&Math.abs(a.dx)<b.min_move_x&&Math.abs(a.dy)<b.min_move_y&&b.touch&&this!==window&&b.touch.call(this,t,{x:i,y:r}),b.longpress&&p&&(clearTimeout(p),p=0),g(),a={dx:0,dy:0}}b.touch&&n.attr("dwz-event-touchwipe-touch")||(b.touch&&n.attr("dwz-event-touchwipe-touch","touch"),"ontouchstart"in window?(y.event.add(n.get(0),"touchstart",t),y.event.add(n.get(0),"touchend",v)):(y.event.add(n.get(0),"mousedown",t),y.event.add(n.get(0),"mouseup",v)),y.event.add(n.get(0),"mousewheel",function(t){b.stopPropagationEvents&&t.stopPropagation();var e={startX:0,startY:0,x:0,y:t.deltaY,dx:0,dy:-t.deltaY,type:"mousewheel"};b.touchmove&&b.touchmove.call(this,t,e)}))})}})}(dwz),function(l){l.extend({_randomColorFactor:function(t){return Math.round(Math.random()*(t||255))},randomColor:function(t,e,a,n){return"rgba("+this._randomColorFactor(e)+", \n\t\t\t\t"+this._randomColorFactor(a)+",\n\t\t\t\t"+this._randomColorFactor(n)+", \n\t\t\t\t"+(t||".3")},animate:function(t,e,a,n,i){for(var r in e){var o,s;"width"==r||"height"==r?(l.transition(t,{transitionType:"all",duration:a,effectType:n}),t.style[r]=e[r]+"px"):(o=e.x||0,s=e.y||0,void 0===e.x&&void 0===e.y||l(t).translate({x:o+"px",y:s+"px",duration:a,effectType:n}))}i&&setTimeout(function(){i.call(t)},(a||1)+10)},transition:function(t,e){e=l.extend({transitionType:"all",duration:0,effectType:"ease"},e),t=l(t);e.duration?(e=e.transitionType+" "+e.duration/1e3+"s "+(e.effectType||"ease"),t.css({"-webkit-transition":"-webkit-"+e,transition:e})):t.css({"-webkit-transition":"",transition:""})}}),l.fn.extend({animate:function(t,e,a,n){return l.animate(this.get(0),t,e,a,n),this},fadeOut:function(t,e){return this.effect([{className:"fadeOut animated",after:function(){this.hide()}}],e)},fadeIn:function(t,e){return this.effect([{className:"fadeIn animated",before:function(){this.show()},after:function(){this.show()}}],e)},translate:function(t){t=l.extend({x:"0px",y:"0px",z:"0px",duration:0,effectType:"ease"},t);return t.transform="translate3d("+t.x+","+t.y+","+t.z+")",this.translateCss(t)},translateCss:function(t){var e=l.extend({transform:"",duration:0,effectType:"ease"},t);return this.each(function(){l.transition(this,{transitionType:"transform",duration:e.duration,effectType:e.effectType}),l(this).css({"-webkit-transform":e.transform,transform:e.transform})})},translateY:function(t,e,a){return this.translate({y:t,duration:e,effectType:a})},translateX:function(t,e,a){return this.translate({x:t,duration:e,effectType:a})},rotate:function(t){var e=l.extend({deg:"0deg",duration:0,effectType:"ease"},t);return this.each(function(){var t="rotate("+e.deg+")";l.transition(this,{transitionType:"transform",duration:e.duration,effectType:e.effectType}),l(this).css({"-webkit-transform":t,transform:t})})},getComputedPos:function(){var t=window.getComputedStyle(this.get(0),null),e=0,a=0,n=1,i=t["-webkit-transform"]||t.transform;return i&&"none"!=i&&(e=+((t=i.replace("matrix(","").split(")")[0].split(", "))[12]||t[4]),a=+(t[13]||t[5]),n=+t[3]),{x:e,y:a,scale:n}},flipCard:function(t){var e=l.extend({},t);return this.each(function(){var t=l(this);t.removeClass("animation-rotate-up").removeClass("animation-rotate-up-back"),t.addClass("animation-rotate-up"),setTimeout(function(){t.addClass("animation-rotate-up-back"),e.callback&&e.callback(t)},500)})},effectBubble:function(t){var i=l.extend({content:"+1",y:-100,duration:500,effectType:"ease",className:"",fontSize:2},t);return this.each(function(){var t=l(this),e=t.offset(),a=t.width(),t="effect-fly-"+(new Date).getTime(),t='<span id="#flyId#" class="effect-bubble-fly #class#" style="top:#top#px;left:#left#px;font-size: #fontSize#rem;">#content#</span>'.replaceAll("#left#",e.left+a/2).replaceAll("#top#",e.top).replaceAll("#flyId#",t).replaceAll("#content#",i.content).replaceAll("#class#",i.className).replaceAll("#fontSize#",i.fontSize),n=l(t).appendTo(l("body").get(0));setTimeout(function(){n.css({top:e.top+i.y+"px"})},10),setTimeout(function(){n.fadeOut(500,function(){n.remove()})},i.duration||500)})},effect:function(r,o){return this.each(function(){var n=l(this),i="webkitAnimationEnd animationend webkitTransitionEnd transitionend";!function e(t){var a;r&&0<r.length&&(a=l.extend({className:"",style:"",before:null,after:null},r.shift()),t&&((t=n.data("orig_style")||n.attr("style"))&&n.data("orig_style",t),n.off(i),n.removeClass(l.animateCls.all+" animated")),n.on(i,function(){var t;n.off(i),0==r.length&&((t=n.data("orig_style"))&&n.attr("style",t),o&&o.call(n,a)),a.className&&n.removeClass(a.className+" animated"),a.after&&a.after.call(n,a),e()}),setTimeout(function(){var t;a.before&&a.before.call(n,a),a.style&&((t=n.data("orig_style")||"")&&!t.endsWith(";")&&(t+=";"),n.attr("style",t+a.style)),a.className&&n.addClass(a.className).addClass("animated")},50))}(!0)})}}),l.animateCls={std_names:"bounce flash pulse rubberBand shake swing tada wobble jello flip hinge jackInTheBox",in_names:"bounceIn bounceInDown bounceInLeft bounceInRight bounceInUp fadeIn fadeInDown fadeInDownBig fadeInLeft fadeInLeftBig fadeInRight fadeInRightBig fadeInUp fadeInUpBig flipInX flipInY lightSpeedIn rollIn rotateIn rotateInDownLeft rotateInDownRight rotateInUpLeft rotateInUpRight slideInUp slideInDown slideInLeft slideInRight zoomIn zoomInDown zoomInLeft zoomInRight zoomInUp",out_names:"bounceOut bounceOutDown bounceOutLeft bounceOutRight bounceOutUp fadeOut fadeOutDown fadeOutDownBig fadeOutLeft fadeOutLeftBig fadeOutRight fadeOutRightBig fadeOutUp fadeOutUpBig flipOutX flipOutY lightSpeedOut rollOut rotateOut rotateOutDownLeft rotateOutDownRight rotateOutUpLeft rotateOutUpRight slideOutUp slideOutDown slideOutLeft slideOutRight zoomOut zoomOutDown zoomOutLeft zoomOutRight zoomOutUp"},l.animateCls.all_names=l.animateCls.std_names+" "+l.animateCls.in_names+" "+l.animateCls.out_names,l.fn.animateCls=function(t,e){var a={className:t};return l.inArray(t,l.animateCls.in_names.split(" "))?(a.before=function(){this.show()},a.after=function(){this.show()}):l.inArray(t,l.animateCls.out_names.split(" "))&&(a.before=function(){this.show()},a.after=function(){this.hide()}),this.effect([a],e)}}(dwz),dwz.extend({ajaxError:function(t,e,a){401!=t.status?$.alert?$.alert.error("<div>Http status: "+t.status+" "+t.statusText+"</div>\n\t\t\t\t<div>ajaxOptions: "+e+"</div>\n\t\t\t\t<div>thrownError: "+a+"</div>\n\t\t\t\t<div>"+t.responseText+"</div>"):alert("Http status: "+t.status+" "+t.statusText+" \najaxOptions: "+e+"\nthrownError: "+a+"\n"+t.responseText):$.gotoLogin()},ajaxDone:function(t){t[dwz.config.keys.statusCode]==dwz.config.statusCode.error?t[dwz.config.keys.message]&&$.alert&&$.alert.error(t[dwz.config.keys.message]):t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok&&(t[dwz.config.keys.message]&&$.alert&&$.alert.success(t[dwz.config.keys.message]),"redirect"==t.callbackType&&t.forwardUrl&&setTimeout(function(){window.location=t.forwardUrl},1500))},isAjaxStatusOk:function(t){return!!$.checkAjaxLogin(t)&&t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok},isAjaxStatusError:function(t){return t[dwz.config.keys.statusCode]==dwz.config.statusCode.error},gotoLogin:function(){$.dialog.open({url:"tpl/user/login.html?dwz_callback=loginRender",pop:"fullscreen"})},checkAjaxLogin:function(t){return t[dwz.config.keys.statusCode]!=dwz.config.statusCode.timeout||($.alert.toast(t[dwz.config.keys.message]||"用户登入"),$.gotoLogin(),!1)}}),function(c){c.fn.extend({valid:function(s){var l=!0;return this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)}).each(function(){var t=c(this),e=t.val(),a=this.required||t.hasClass("required"),n=t.attr("pattern")||t.attr("data-pattern"),i=t.attr("data-error"),r=t.attr("data-min"),o=t.attr("data-max");if(t.hasClass("ignore")||(dwz.config.rcheckableType.test(this.type)?!this.checked&&a&&(l=!1):!e&&a||e&&n&&!new RegExp(n).test(e)?l=!1:e&&r?(l=parseFloat(r)<=parseFloat(e))||(i=t.attr("data-error-min")||i):e&&o&&((l=parseFloat(o)>=parseFloat(e))||(i=t.attr("data-error-max")||i))),!s&&!l&&i&&c.alert)return c.alert.error(i),!1}),l},ajaxTodo:function(t){var e=t.className,s=void 0===e?"active":e,e=t.disabledInvert$,n=void 0===e?"disabled-invert":e,t=t.relCount$,l=void 0===t?"data-rel-count":t;return this.each(function(){function i(t){var e;0<a.size()&&(0<=(e=parseInt(a.text()))+t&&a.text(e+t))}var r=c(this).hrefFix(),a=c(r.attr(l)),o=r.hasClass(n);r.touchwipe({touch:function(t){var e=r.attr("data-href"),a=parseInt(r.attr("data-count")||1),n=r.hasClass(s);e&&"javascript:"!=e?c.ajax({type:"POST",url:e,data:{active:n?0:1},dataType:"json",cache:!1,success:function(t){c.ajaxDone(t),c.isAjaxStatusOk(t)&&(n&&!o?(r.removeClass(s),i(-a)):(r.addClass(s),i(+a)))},error:dwz.ajaxError}):n&&!o?(r.removeClass(s),i(-a)):(r.addClass(s),i(+a)),t.preventDefault(),t.stopPropagation()}})})},bringBack:function(n){return this.each(function(){c(this).find(":input").each(function(){var t,e=c(this),a=e.attr("name");for(t in n)if(t==a){e.val(n[t]);break}})})}})}(dwz),function(c){c.setRegional("alert",{title:{error:"错误",success:"成功",confirm:"确认提示"},btnMsg:{ok:"确定",cancel:"取消"}}),c.alert={config:{box$:"#alertMsgBox",promptFrag:'<div id="alertPromptBox"><div class="alert-mask"></div><div class="alert-dialog"></div></div>',boxFrag:'<div id="alertMsgBox">\t\t\t\t\t<div class="alert-mask"></div>\t\t\t\t\t<div class="alert-dialog">\t\t\t\t\t\t<div class="alert-dialog-hd"><strong class="alert-dialog-title">#title#</strong></div>\t\t\t\t\t\t<div class="alert-dialog-bd">#message#</div>\t\t\t\t\t\t<div class="alert-dialog-ft">#butFragment#</div>\t\t\t\t\t</div>\t\t\t\t</div>',btnFrag:'<a href="javascript:" class="alert-btn-dialog #class#">#butMsg#</a>'},open:function(t,a){var e=t.title,n=void 0===e?c.regional.alert.title.info:e,e=t.msg,e=void 0===e?"":e,t=t.buttons,i=void 0===t?[c.regional.alert.btnMsg.ok]:t;c(this.config.box$).remove();var r="";if(i)for(var o=0;o<i.length;o++)r+=this.config.btnFrag.replace("#butMsg#",i[o]).replace("#class#",0==o?"primary":"default");e=this.config.boxFrag.replace("#title#",n).replace("#message#",e).replace("#butFragment#",r);c("body").append(e);for(var s=c(this.config.box$).find("a.alert-btn-dialog"),l=0;l<i.length;l++)s.eq(l).click(l,function(t){var e=t.data+1;a&&a({buttonIndex:e}),c.alert.close(),t.preventDefault(),t.stopPropagation()})},close:function(t){c("prompt"==(0<arguments.length&&void 0!==t?t:"alert")?"#alertPromptBox":this.config.box$).remove()},error:function(t,e){this.open({title:c.regional.alert.title.error,msg:t},e)},success:function(t,e){this.open({title:c.regional.alert.title.success,msg:t},e)},confirm:function(t,e){var a=t.title,n=void 0===a?c.regional.alert.title.confirm:a,a=t.msg,a=void 0===a?"":a,t=t.buttons,t=void 0===t?[c.regional.alert.btnMsg.ok,c.regional.alert.btnMsg.cancel]:t;this.open({title:n,msg:a,buttons:t},e)},prompt:function(n,t){c(this.config.box$).remove();var i,r=c(c.alert.config.promptFrag).appendTo(c("body").get(0)).find(".alert-dialog");n&&(i=c.extend(n.getParams(),t),c.ajax({type:"GET",url:n,data:t,success:function(t){r.triggerPageClear();var e=dwz.getUrlCallback(n),a=c.templateWrap(t);e?e.call(r,a,i):(r.html(t).initUI(),c.execHelperFn(r,a,i))},error:dwz.ajaxError}))},toast:function(t,e){var a,n,i=this,e=c.extend({msg:t,duration:4e3},e);window.api?api.toast(e):(a=function(){i._timer&&(clearTimeout(i._timer),i._timer=null)},c("#alert-toast").remove(),a(),(n=c('<div id="alert-toast">'+e.msg+"</div>").appendTo(c("body"))).animateCls("fadeInUp"),this._timer=setTimeout(function(){a(),n.animateCls("fadeOutDown",function(){n.remove()})},e.duration))}}}(dwz),function(l){l.setRegional("actionSheet",{cancelTxt:"取消"}),l.actionSheet={config:{box$:"#action-sheet"},open:function(t,a){var e=t.title,n=t.buttons,i=void 0===n?[]:n,t=t.cancelTxt,t=void 0===t?l.regional.actionSheet.cancelTxt:t,t='<div id="action-sheet" onclick="return $.actionSheet.close()">\n\t\t\t\t<div class="action-sheet-pane hide-down">\n\t\t\t\t\t<div class="action-sheet-ul">\n\t\t\t\t\t\t'+(e?'<a class="action-sheet-title">'+e+"</a>":"")+"\n\t\t\t\t\t\t"+i.map(function(t){var e=t.txt||t;return'<a class="action-sheet-item" style="'+(t.style||"")+'">'+e+"</a>"}).join("")+'\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<a class="action-sheet-cancel" onclick="return $.actionSheet.close()">'+t+"</a>\n\t\t\t\t</div>\n\t\t\t</div>";l(this.config.box$).remove();var r=l(t).appendTo(l("body").get(0));setTimeout(function(){r.find(".action-sheet-pane").removeClass("hide-down")},50);var o=r.find("a.action-sheet-item");l.fn.hoverClass&&o.hoverClass();for(var s=0;s<i.length;s++)o.eq(s).click(s,function(t){var e=t.data+1;a&&a({buttonIndex:e}),t.preventDefault(),t.stopPropagation(),setTimeout(function(){l.actionSheet.close()},300)})},close:function(){var t=l(this.config.box$);return t.find(".action-sheet-pane").addClass("hide-down"),setTimeout(function(){t.remove()},300),!1}}}(dwz),function(i){i.inputTip={config:{openClass:"open",frag:'<ul id="input-tip" class="unitBox"></ul>'},$box:null,_init:function(){this.$box||(this.$box=i(i.inputTip.config.frag).appendTo(i("body").get(0)))},open:function(t,a){this._init();var e=template.render('{{each list as item}}<li class="item">{{item.text}}</li>{{/each}}',{list:a});this.$box.addClass(i.inputTip.config.openClass).html(e);e=this.$box.height()+5,e=t.top>e+30?t.top-e:t.top+t.height+5;this.$box.css({left:t.left+t.paddingLeft+"px",top:e+"px"}),this.$box.find("li.item").each(function(t,e){i(e).click(function(){a[t].fn&&a[t].fn.call(e)})}),i("body").off("click touchstart",this._close).on("click touchstart",this._close)},_close:function(){i.inputTip.$box.html("").removeClass(i.inputTip.config.openClass)}},i.fn.clipboardTip=function(t){var n=i.extend({text:"粘贴"},t);return this.each(function(){i(this).touchwipe({longpress:function(){var t,a=i(this);!window.api||"android"!=api.systemType||(t=api.require("clipBoard"))&&t.get(function(t,e){t&&t.value&&i.inputTip.open(a.selectionPos(),[{text:n.text,fn:function(){a.val(t.value).get(0).select()}}])})}})})}}(dwz),function(w){w.setRegional("calendar",{dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),w.fn.calendar=function(t){var l=w.extend({miscBtn:null,miscBtnFn:null,changeDayFn:null,refreshDayFn:null,viewType:"month"},t),m=".dt",b=".ympop",y=".ympopOkBut",x=".ympopCalcelBut",c=".bd",d=".bd .slide-wrap";return this.each(function(){var v=w(this),t={$box:v};v.attr("dateFmt")&&(t.pattern=v.attr("dateFmt")),v.attr("minDate")&&(t.minDate=v.attr("minDate")),v.attr("maxDate")&&(t.maxDate=v.attr("maxDate")),v.addClass("datechooser"),w('<div class="calendar">\t\t<div class="dt">\t\t\t<div class="ym"><a href="javascript:"><span>Month Year</span></a></div>\t\t\t<div class="pr"><a href="javascript:"></a></div>\t\t\t<div class="ne"><a href="javascript:"></a></div>\t\t</div>\t\t<div class="bd">\t\t\t<div class="slide-wrap"></div>\t\t</div>\t\t<div class="ympop" style="display:">\t\t\t<div class="ym">\t\t\t\t<div class="mm">\t\t\t\t\t<ul class="clearfix"></ul>\t\t\t\t</div>\t\t\t\t<div class="yy">\t\t\t\t\t<div class="yt">\t\t\t\t\t\t<div class="pr"><a href="javascript:;"></a></div>\t\t\t\t\t\t<div class="ne"><a href="javascript:;"></a></div>\t\t\t\t\t</div>\t\t\t\t\t<ul class="clearfix"></ul>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="Ft">\t\t\t\t<div class="le"><a class="bt ympopOkBut" href="#OK"><span>确定</span></a></div>\t\t\t\t<div class="ri"><a class="bt ympopCalcelBut" href="#Cancel"><span>取消</span></a></div>\t\t\t</div>\t\t</div>\t</div>').appendTo(v).addClass("view-"+l.viewType);var e,a=v.find(c),p=v.find(d),i=w(m),r=a.width(),o=new u(v.attr("data-value"),t);function f(t,e){var a=w.regional.calendar.monthNames,n=v.find(b);g(o),i.find(".ym span").text(a[e-1]+" "+t),l.changeYearMonthFn&&l.changeYearMonthFn.call(n,{year:t,month:e})}function n(a,t){for(var e=a.getDateWrap(),n=v.find(m),i=v.find(b),r=i.find(".yy ul.clearfix"),o=i.find(".mm ul.clearfix"),s=a.getMinDate().getFullYear(),l=a.getMaxDate().getFullYear(),c="",d="",u=e.year-4;u<e.year+6;u++){var h=e.year==u?"selected":"";(u<s||l<u)&&(h+="disabled"),c+='<li value="'+u+'" class="'+h+'"><a href="javascript:">'+u+"</a></li>"}r.html(c),w.each(w.regional.calendar.monthNames,function(t){t+=1;d+='<li value="'+t+'"'+(e.month==t?' class="selected"':"")+'><a href="javascript:">'+this+"</a></li>"}),o.html(d),r.find("li").filter(function(){return!w(this).hasClass("disabled")}).click(function(){var t=w(this);t.parent().find("li.selected").removeClass("selected"),t.addClass("selected")}),o.find("li").click(function(){var t=w(this);t.parent().find("li.selected").removeClass("selected"),t.addClass("selected")}),i.attr("event-ympop")||(i.attr("event-ympop",1),v.find(y).click(function(){var t=r.find("li.selected"),e=o.find("li.selected");if(t.hasClass("disabled")||e.hasClass("disabled"))return!1;n.find(".ym span").text(e.find("a").text()+" "+t.find("a").text());t=parseInt(t.attr("value")),e=parseInt(e.attr("value"));a.changeDate(t,e),g(a),i.hide(),a.hasDay()||p.find("td.selected").trigger("click")}),v.find(x).click(function(){i.hide()}),n.find(".pr a").click(function(){a.lastMonthFn(f)}),n.find(".ne a").click(function(){a.nextMonthFn(f)}),i.find(".yy .pr a").click(function(){r.find(":scope>li").each(function(t){var e=w(this),a=parseInt(e.attr("value"))-10;a<s?e.addClass("disabled"):e.removeClass("disabled"),0==t?e.addClass("selected"):e.removeClass("selected"),e.attr("value",a).find(":scope>a").text(a)})}),i.find(".yy .ne a").click(function(){r.find(":scope>li").each(function(t){var e=w(this),a=parseInt(e.attr("value"))+10;l<a?e.addClass("disabled"):e.removeClass("disabled"),0==t?e.addClass("selected"):e.removeClass("selected"),e.attr("value",a).find(":scope>a").text(a)})})),n.find(".ym span").text(o.find("li.selected").text()+" "+r.find("li.selected").text()),t&&i.show()}function s(t,e){return("week"==l.viewType?function(t,e){"last"==(e=w.extend({type:"current"},e)).type?(t=t.clone()).dayWeek({type:"last"}):"next"==e.type&&(t=t.clone()).dayWeek({type:"next"});for(var a=t.getDateWrap(),n=t.getMinDate(),i=t.getMaxDate(),r=new Array,o=v.attr("data-value"),s=0;s<=6;s++){var l=t.clone(),c=l.dayWeek({dayInWeek:s}),d=c.date,u=n<=d&&d<=i?"":"disabled";o==l.formatDate(d)&&(u+=" selected"),r.push('<td align="center" class="'+u+'" day="'+c.day+'" chMonth="'+(c.month-a.month)+'"><a href="javascript:">'+c.day+"</a></td>")}var h="",p="";return w.each(w.regional.calendar.dayNames,function(t){h+="<th><span>"+this+"</span></th>"}),h="<tr>"+h+"</tr>",w.each(r,function(t){t%7==0&&(p+="<tr>"),p+=this,t%7==6&&(p+="</tr>")}),'<table class="di '+e.type+'">'+h+p+"</table>"}:function(t,e){var a=w.extend({type:"current"},e);"last"==a.type?(t=t.clone()).lastMonthFn():"next"==a.type&&(t=t.clone()).nextMonthFn();var n=t.getDateWrap(),i=t.getMinDate(),r=t.getMaxDate(),o=(e=new Date(n.year,n.month-1,1)).getDay(),s=new Array;if(0<o){e.setMonth(e.getMonth()-1);for(var l=t.getDateWrap(e),c=l.days-o+1;c<=l.days;c++)s.push('<td class="inactive disabled" align="center"><a href="javascript:">'+c+"</a></td>")}for(var d=v.attr("data-value"),u=1;u<=n.days;u++){var h=new Date(n.year,n.month-1,u),p=i<=h&&h<=r?"":"disabled";d==t.formatDate(h)?s.push('<td align="center" class="selected '+p+'" day="'+u+'"><a href="javascript:">'+u+"</a></td>"):s.push('<td align="center" class="'+p+'" day="'+u+'"><a href="javascript:">'+u+"</a></td>")}for(var f=1;f<=42-o-n.days;f++)s.push('<td class="inactive disabled" align="center"><a href="javascript:">'+f+"</a></td>");var g="",m="";return w.each(w.regional.calendar.dayNames,function(t){g+="<th><span>"+this+"</span></th>"}),g="<tr>"+g+"</tr>",w.each(s,function(t){t%7==0&&(m+="<tr>"),m+=this,t%7==6&&(m+="</tr>")}),'<table class="di '+a.type+'">'+g+m+"</table>"})(t,e)}function g(a){var t=s(a,{type:"current"}),n=(n=p.html(t).find("td")).filter(function(){return!w(this).hasClass("disabled")}).touchwipe({touch:function(){var t=w(this),e=a.formatDate(a.changeDay(t.attr("day"),t.attr("chMonth")));v.attr("data-value",e),n.removeClass("selected"),t.addClass("selected"),l.changeDayFn&&l.changeDayFn.call(t,e)}});l.changeDayFn&&(0<(e=n.filter(function(){return w(this).hasClass("selected")})).size()?(t=v.attr("data-value"),l.changeDayFn.call(e.eq(0),t)):l.changeDayFn.call(e,"")),l.refreshDayFn&&l.refreshDayFn.call(v,n,a.getDateWrap());var e=s(a,{type:"last"});p.prepend(e);e=s(a,{type:"next"});p.append(e),p.translateX(-r+"px")}"week"==l.viewType&&v.find(".dt .pr, .dt .ne").hide(),p.touchwipe({direction:"horizontal",touchstart:function(){},touchmove:function(t,e){p.translateX(-r-e.dx+"px")},touchend:function(t,e){e.dx<-40?p.animate({x:0},300,"ease",function(){"week"==l.viewType?o.dayWeek({type:"last",callback:f}):o.lastMonthFn(f)}):40<e.dx?p.animate({x:-2*r},300,"ease",function(){"week"==l.viewType?o.dayWeek({type:"next",callback:f}):o.nextMonthFn(f)}):p.animate({x:-r},300,"ease")}}),g(o),n(o),"month"==l.viewType&&i.find(".ym a").click(function(){n(o,!0)}),l.miscBtn&&(e=w(l.miscBtn).appendTo(i).addClass("miscBtn")).touchwipe({touch:function(){var t;l.miscBtnFn&&(t=v.attr("data-value"),l.miscBtnFn.call(e,t))}})})};var u=function(t,e){this.opts=w.extend({pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",$box:null},e);e=new Date;this.opts.minDate=e.formatDateTm(this.opts.minDate),this.opts.maxDate=e.formatDateTm(this.opts.maxDate),t?this.sDate=t.trim():(this.sDate=(new Date).formatDate(this.opts.pattern),this.opts.$box.attr("data-value",this.sDate))};w.extend(u.prototype,{clone:function(){return new u(this.sDate,this.opts)},get:function(t){return this.opts[t]},_getDays:function(t,e){return 2==e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},_minMaxDate:function(t){var e=t.split("-").length-1,a="y-M-d";return 1==e?a="y-M":0==e&&(a="y"),t.parseDate(a)},getMinDate:function(){return this._minMaxDate(this.opts.minDate)},getMaxDate:function(){var t=this.opts.maxDate,e=t.split("-").length-1,a=this._minMaxDate(t);return e<2&&(t=this._getDays(a.getFullYear(),a.getMonth()+1),a.setDate(t),0==e&&a.setMonth(11)),a},getDateWrap:function(t){var e=(t=t||(this.parseDate(this.sDate)||new Date)).getFullYear(),a=t.getMonth()+1,n=this._getDays(e,a);return{year:e,month:a,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:n,date:t}},changeDate:function(t,e,a){a=new Date(t,e-1,a||1);return this.sDate=this.formatDate(a),a},changeDay:function(t,e){e=e||0;var a=this.getDateWrap();return new Date(a.year,a.month+parseInt(e)-1,t)},lastMonthFn:function(t){var e,a=this.getDateWrap(),n=this.getMinDate().getFullYear();(1<a.month||a.year>n)&&(e=a.year,n=a.month-1,1==a.month&&(e--,n=12),this.changeDate(e,n),t&&t(e,n))},nextMonthFn:function(t){var e,a=this.getDateWrap(),n=this.getMaxDate().getFullYear();(a.month<12||a.year<n)&&(e=a.year,n=a.month+1,12==a.month&&(e++,n=1),this.changeDate(e,n),t&&t(e,n))},dayWeek:function(t){var e=w.extend({dayInWeek:0,type:"current"},t),a=this.getDateWrap(),t=a.date.getDay(),t=e.dayInWeek-t;"last"==e.type?t=-7:"next"==e.type&&(t=7);a=a.date.getTime()+864e5*t,t=new Date(a),a=this.getDateWrap(t);return this.sDate=this.formatDate(t),e.callback&&e.callback(a.year,a.month),a},parseDate:function(t){return t?t.parseDate(this.opts.pattern):null},formatDate:function(t){return t.formatDate(this.opts.pattern)},hasDay:function(){return-1!=this.opts.pattern.indexOf("d")},hasHour:function(){return-1!=this.opts.pattern.indexOf("H")},hasMinute:function(){return-1!=this.opts.pattern.indexOf("m")},hasSecond:function(){return-1!=this.opts.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=["y","M","d","E"],e=0;e<t.length;e++)if(-1!=this.opts.pattern.indexOf(t[e]))return!0;return!1}})}(dwz),function(f){f.fn.extend({scrollTo:function(a){return this.each(function(){var t,e=f(this).children().eq(0);"end"==a.y?0<(t=e.height()-f(this).height())&&(a.y=-t+"px",e.translate(a)):e.translate(a)})},scroll:function(t){var p=f.extend({scrollX:!1,scrollY:!0,delayTime:400,touchstart:null,touchmove:null,touchend:null,scroll$:".scroll",topBtn$:".top-btn",stopPropagationEvents:!1},t);return this.each(function(){var r=f(this),o=r.find(p.scroll$),s=r.find(p.topBtn$),l=0;function c(){var t=o.get(0).clientWidth-r.get(0).clientWidth;return 0<t?t:0}function d(){var t=o.get(0).clientHeight-r.get(0).clientHeight;return 0<t?t:0}s.click(function(t){t.stopPropagation(),l=(new Date).getTime(),r.scrollTo({y:0,duration:800}),s.addClass("hide")});var u=0,h={x:0,y:0},t="vertical";p.scrollX&&(t=p.scrollY?"all":"horizontal"),r.touchwipe({direction:t,stopPropagationEvents:p.stopPropagationEvents,touchstart:function(t,e){h=o.getComputedPos(),p.scrollY&&o.translateY(h.y+"px",0),p.scrollX&&o.translateX(h.x+"px",0),p.touchstart&&p.touchstart.call(o,t,e)},touchmove:function(t,e){var a,n,i=(new Date).getTime();300<i-u&&Math.abs(e.dx)<10&&Math.abs(e.dy)<10||(p.scrollY&&(a=d(),0<(n=-Math.round(e.dy-h.y))?n/=3:n<-a&&(n=(n+a)/3-a),o.translateY(n+"px",0),0<s.size()&&(n<-100?s.removeClass("hide"):s.addClass("hide")),e.scrollH=a,e.scrollY=n),p.scrollX&&(a=c(),0<(n=-Math.round(e.dx-h.x))?n/=3:n<-a&&(n=(n+a)/3-a),o.translateX(n+"px",0,"linear"),e.scrollW=a,e.scrollX=n),p.touchmove&&p.touchmove.call(o,t,e))},touchend:function(t,e){var a,n,i;(u=(new Date).getTime())-l<300||(p.scrollY&&20<Math.abs(e.dy)&&(e.scrollH=d(),e.dy-h.y<0?o.animate({y:0},p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):e.dy-h.y>e.scrollH?o.animate({y:-e.scrollH},p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):(a=f.speed.getY(),200<Math.abs(a)&&(i=o.getComputedPos(),n=a*(r.get(0).clientHeight/812)+i.y,i=Math.min(Math.abs(a),2),n<-e.scrollH?n=-e.scrollH:0<n&&(n=0),o.animate({y:n},p.delayTime*i,"cubic-bezier(0.25, 0.46, 0.45, 0.94)")))),p.scrollX&&20<Math.abs(e.dx)&&(e.scrollW=c(),e.dx-h.x<0?o.animate({x:0},p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):e.dx-h.x>e.scrollW?o.animate({x:-e.scrollW},p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):(i=o.getComputedPos(),(i=dwz.speed.getX()+i.x)<-e.scrollW?i=-e.scrollW:0<i&&(i=0),o.animate({x:i},2*p.delayTime,"cubic-bezier(0.25, 0.46, 0.45, 0.94)"))),p.touchend&&p.touchend.call(o,t,e))}})})}})}(dwz),$.fn.extend({list:function(t){var e=$.extend({pullDown$:"div.pullDown",pullUp$:"div.pullUp",pullDownLabel$:"span.pullDownLabel",pullUpLabel$:"span.pullUpLabel",scroll$:".scroll",refreshFn:function(){},loadMoreFn:function(){}},t);return this.each(function(){var t=$(this),a=(t.find(e.scroll$),t.find(e.pullDown$)),n=t.find(e.pullUp$),i=a?a.find(e.pullDownLabel$):null,r=n?n.find(e.pullUpLabel$):null,o=t.parentsUnitBox().find(".hideBarCtl"),s={txt:"",flip:""},l={txt:"",loading:""};0<i.size()&&(s={txt:i.html(),flip:i.attr("data-flip")||"Release to Refresh"}),0<r.size()&&(l={loadMoreTxt:r.html(),noMoreRecordsTxt:"",loading:r.attr("data-loading")||"Loading..."}),t.scroll({scrollX:!1,scrollY:!0,scroll$:e.scroll$,touchmove:function(t,e){0<a.size()&&(60<e.scrollY?(a.addClass("flip"),i.html(s.flip)):(a.removeClass("flip"),i.html(s.txt))),0<n.size()&&(e.scrollY+30<-e.scrollH?(n.addClass("loading"),r.html(l.loading)):(n.removeClass("loading"),r.html(l.loadMoreTxt))),0<o.size()&&(e.scrollY<-50&&5<e.scrollH&&e.endY>e.y+3?o.addClass("hideBar"):e.endY<e.y-3&&o.removeClass("hideBar"))},touchend:function(){0<a.size()&&a.hasClass("flip")&&(a.removeClass("flip").addClass("loading"),setTimeout(function(){a.removeClass("loading")},1e3),e.refreshFn.call(t,a)),0<n.size()&&n.hasClass("loading")&&(setTimeout(function(){n.removeClass("loading")},1e3),e.loadMoreFn.call(t,n))}})})}}),$.extend({listForm:function(t){var e=t.find("div.dwz-list");t.on("submit",function(){return t.requestList(),e.scrollTo({y:0,duration:800}),!1}),setTimeout(function(){t.trigger("submit")},300);var a=t.find('input[name="'+dwz.config.pageInfo.pageNum+'"]');e.list({refreshFn:function(){console.log("refreshFn..."),a.size()&&a.val(1),t.requestList()},loadMoreFn:function(){console.log("loadMoreFn..."),a.size()&&t.total&&t.total>e.find("li.item").size()&&(a.val(parseInt(a.val())+1),t.requestList(!0))}})}}),$.navTab={config:{box$:"#nav-tab",items$:"#nav-tab > .tab-bar > [tabid]",contents$:"#nav-tab > .tab-panel > .panel-item",activeClass:"active",cachedClass:"cached",openIndex:-1},$box:null,_currentIndex:0,init:function(t){var e,a=$.extend($.navTab.config,t);this.$box=$($.navTab.config.box$),this.getTabs().each(function(t){var a=$(this).hrefFix(),e=a.attr("data-href"),e=e&&e.startsWith("#")?"":e;a.click({index:t,tabid:a.attr("tabid"),url:e},function(t){var e=t.data;e.loaded=a.attr("data-loaded")&&"true"==a.attr("data-cache"),$.navTab.open(e),t.preventDefault()})}),0<=a.openIndex&&($.navTab._open(a.openIndex),(e=location.hash)&&3!==e.split(";").length||(e=(e=(t=this.getTabs().eq(a.openIndex)).attr("data-href"))&&e.startsWith("#")?"":e,$.navTab.open({index:a.openIndex,tabid:t.attr("tabid"),url:e}))),a.history||$(window).on("hash.empty",function(t){$.dialog&&$.dialog.isOpen?$.dialog.close():$.navView&&$.navView.close(!1)})},getBox:function(){return this.getPanels().eq(this._currentIndex)},_open:function(t){for(var e=$.navTab.config,a=this.getTabs(),n=this.getPanels(),i=0;i<a.size();i++)i==t?(a.eq(i).addClass(e.activeClass).removeClass(e.cachedClass),n.eq(i).addClass(e.activeClass).removeClass(e.cachedClass)):(a.eq(i).addClass(e.cachedClass).removeClass(e.activeClass),n.eq(i).addClass(e.cachedClass).removeClass(e.activeClass));this._currentIndex=t},open:function(e){var a=0<=e.index?e.index:this._indexTabId(e.tabid);if(-1!=a){if(e.interceptor||(e.interceptor=dwz.getUrlInterceptor(e.url)),e.interceptor&&!1===e.interceptor.call(this.getPanels(a),e.url))return!1;this._currentIndex!=a&&this._open(a),e.url&&(e.loaded||this.load(e),e.history&&$.history&&e.tabid&&setTimeout(function(){var t=e.tabid+";"+e.url;$.history.add(t,function(t){$.navTab.open(t)},{index:a,url:e.url,loaded:!0})},10)),$.dialog&&$.dialog.isOpen?$.dialog.close():$.navView&&$.navView.close(!1)}},load:function(t){var a,n=$.extend({type:"GET",external:!1,url:"",data:{},callback:null},t),t=0<=n.index?n.index:this._indexTabId(n.tabid),i=this.getPanels().eq(t),r=this.getTabs().eq(t);n.external?this.loadExternal(n.url):(a=$.extend(n.url.getParams(),n.data),$.ajax({type:n.type,url:n.url,data:n.data,success:function(t){var e;i.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url)),n.callback?(e=$.templateWrap(t),n.callback.call(i,e,a)):(i.html(t).initUI(),$.execHelperFn($box,tpl,a)),r.attr("data-loaded",1)},error:dwz.ajaxError}))},reload:function(t){this.load({index:$.navTab._currentIndex,url:t})},loadExternal:function(t,e){var a=this.$box.get(0).offsetHeight;t.html($.config.frag.external.replaceAll("{url}",e).replaceAll("{{height}}",a+"px"))},_indexTabId:function(e){if(!e)return-1;var a=-1;return this.getTabs().each(function(t){$(this).attr("tabid")==e&&(a=t)}),a},getTabs:function(){return this.$box.find(this.config.items$)},getPanels:function(){return this.$box.find(this.config.contents$)}},$.navView={config:{zIndexStart:100,idStart:"nav-view-",frag:'<div id="#boxId#" class="nav-view view-container pane box-shadow unitBox" style="display: none; z-index:#zIndex#">\n\t\t\t<main>\n\t\t\t\t<header>\n\t\t\t\t\t<div class="toolbar">\n\t\t\t\t\t\t<a class="bar-button back-button"><i class="icon icon-back"></i></a>\n\t\t\t\t\t\t<div class="header-title"><div class="title">#page_title#</div></div>\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<div class="content"></div>\n\t\t\t</main>\n        </div>'},$list:[],init:function(t){$.extend($.navView.config,t)},open:function(t){var a=$.extend({boxId:"",rel:"_blank",wipeClose:!1,history:!0,page_title:"",external:!1,type:"GET",url:"",data:{},interceptor:null,callback:null},t),e=a.boxId||$.navView.config.idStart+a.rel,n=$.navView.config.zIndexStart+$.navView.$list.length,i=$("#"+e);if(a.interceptor||(a.interceptor=dwz.getUrlInterceptor(a.url)),a.interceptor&&!1===a.interceptor.call(i,a.url,a.data))return!1;var r,o,t=!1,s=this.$list.length;if(0<s&&0<i.size()&&(r=this.$list[s-1],t=i.get(0)===r.get(0)),0==i.size()&&(r=a.page_title?decodeURI(a.page_title):"",$("body").append($.navView.config.frag.replaceAll("#boxId#",e).replaceAll("#zIndex#",n).replaceAll("#page_title#",r)),i=$("#"+e).initUI(),a.wipeClose&&i.touchwipe({wipeRight:function(){$.navView.close()},min_move_x:100}),this.$list.push(i)),!t){var l=this.$list,c=l[s-1];if(0<s&&i.get(0)!==l[s-1].get(0)){for(var d=0;d<s-1;d++)i.get(0)===l[d].get(0)&&(l[d]=c,l[s-1]=i);for(var u=0;u<s;u++)l[u].css({"z-index":$.navView.config.zIndexStart+u})}i.show().translateX(document.documentElement.clientWidth+"px"),setTimeout(function(){i.translateX("0px",500,"ease")},200)}a.url&&(i.data("dwz-params",{external:a.external,url:a.url,data:a.data,type:a.type}),(o=$.extend(a.url.getParams(),a.data)).ajaxDoneReload&&i.data("ajaxDoneReload",1),a.external||a.url.isUrl()?(a.url=decodeURI(a.url),this.loadExternal(a.url)):$.ajax({type:a.type,url:a.url,data:a.data,success:function(t){i.triggerPageClear(),a.callback||(a.callback=dwz.getUrlCallback(a.url));var e=$.templateWrap(t);a.callback?a.callback.call(i,e,o):(i.html(t).initUI(),$.execHelperFn(i,e,o))},error:dwz.ajaxError}),t="navView;"+a.rel+";"+a.url,$.history&&a.history&&$.history.add(t,function(t){$.dialog&&$.dialog.isOpen?$.dialog.close({popHistory:!1}):($.navView.close(!0,!1),$.navView.open({url:t,rel:a.rel,history:!1}))},a.url))},reload:function(t){var e=this.$list[this.$list.length-1],t=$.extend({boxId:e.attr("id"),history:!1},e.data("dwz-params"),t);this.open(t)},loadExternal:function(t){var e=this.$list[this.$list.length-1].find(".content"),a=e.get(0).offsetHeight;e.html($.config.frag.external.replaceAll("{url}",t).replaceAll("{{height}}",a+"px"))},close:function(t,e){var a,n=!(0<arguments.length&&void 0!==t)||t,i=!(1<arguments.length&&void 0!==e)||e,r=this.$list.length;r<=0||(a=this.$list[r-1],this.$list.pop(),$.history&&n&&$.history.pop(i),a.animate({x:document.documentElement.clientWidth},500,"ease",function(){a.triggerPageClear(),a.remove()}))},closeByRel:function(t){t=this._getBoxData(t);t.$box&&($.navView.$list.splice(t.index,1),t.$box.remove())},_getBoxData:function(t){var a,n={$box:null,index:-1};return this.$list.length&&t&&((a=$("#"+$.navView.config.idStart+t)).size()&&this.$list.forEach(function(t,e){t.get(0)===a.get(0)&&(n={$box:t,index:e})})),n},getBox:function(t){return t&&this._getBoxData(t).$box,this.$list.length?this.$list[this.$list.length-1]:null},getBoxs:function(t){t=t||1;for(var e=[],a=1;a<=this.$list.length&&a<=t;a++)e.push(this.$list[this.$list.length-a]);return e}},$.dialog={config:{box$:"#dialog",popClass:["fullscreen","actionSheet","pic","pop"],openClass:"open",frag:'<div id="dialog" class="pop-window unitBox">\n\t\t\t\t<div class="pop-header"><span class="title">弹出框</span><a class="pop-close" href="javascript:$.dialog.close()"><i class="icon icon-close"></i></a></div>\n\t\t\t\t<div class="pop-content"></div>\n\t\t\t</div>',bgBox$:"#mask-bg-dialog",bgFrag:'<div id="mask-bg-dialog" class="mask-bg"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){$.extend($.dialog.config,t),$("body").append($.dialog.config.frag).append($.dialog.config.bgFrag),this.$box=$($.dialog.config.box$),this.$bgBox=$($.dialog.config.bgBox$)},open:function(t){var a=$.extend({type:"GET",url:"",pop:"fullscreen",external:!1,data:{},callback:null},t),n=this.$box,t=this.$bgBox;if(a.interceptor||(a.interceptor=dwz.getUrlInterceptor(a.url)),a.interceptor&&!1===a.interceptor.call(n,a.url))return!1;if(t.addClass($.dialog.config.openClass),"actionSheet"==a.pop?t.removeClass("filter-blur"):t.addClass("filter-blur"),$.inArray(a.pop,$.dialog.config.popClass)&&n.addClass(a.pop),n.addClass($.dialog.config.openClass).translateY(document.documentElement.clientHeight+"px"),setTimeout(function(){n.animate({y:0},300,"ease")},20),a.url){if(a.external)return void this.loadExternal(a.url);a.callback||(a.callback=dwz.getUrlCallback(a.url));var i=$.extend(a.url.getParams(),a.data);$.ajax({global:!a.callback,type:"GET",url:a.url,data:a.data,success:function(t){n.triggerPageClear();var e=$.templateWrap(t);a.callback?a.callback.call(n,e,i):(n.html(t).initUI(),$.execHelperFn(n,e,i))},error:dwz.ajaxError})}this.isOpen=!0},loadExternal:function(t){var e=this.$box.html('<a class="video-close" href="javascript:$.dialog.close()"><i class="icon icon-close-dialog"></i></a><div class="pop-content"></div>').find(".pop-content"),a=e.get(0).offsetHeight;e.html($.config.frag.external.replaceAll("{url}",t).replaceAll("{{height}}",a+"px"))},close:function(t){t=$.extend({closeMsg:""},t);t.closeMsg?$.alert.confirm(t.closeMsg,{okCall:function(){$.dialog._closeDirect()}}):$.dialog._closeDirect()},_closeDirect:function(){var t=this.$box,e=this.$bgBox;t.animate({y:document.documentElement.clientHeight},300,"ease",function(){t.html("").removeClass($.dialog.config.popClass.join(" ")),t.triggerPageClear()}),e.removeClass($.dialog.config.openClass),this.isOpen=!1},getBox:function(){return this.$box}},function(i){var e={panelCentent$:".panel-content",collapseBtn$:".panel-title-right",iconUpClass:"icon-list-u"};i.fn.extend({panel:function(t){var n=i.extend(e,t);return this.each(function(){var e=i(this),t=e.find(n.collapseBtn$),a=t.find("i");t.touchwipe({touch:function(t){a.hasClass(n.iconUpClass)?e.panelCollapse(n):e.panelExpand(n),t.stopPropagation()}})})},panelExpand:function(t){var a=i.extend(e,t);return this.each(function(){var t=i(this),e=t.find(a.collapseBtn$).find("i");t.find(a.panelCentent$).show(),e.addClass(a.iconUpClass)})},panelCollapse:function(t){var a=i.extend(e,t);return this.each(function(){var t=i(this),e=t.find(a.collapseBtn$).find("i");t.find(a.panelCentent$).hide(),e.removeClass(a.iconUpClass)})}})}(dwz),$.fn.extend({tabs:function(t){var s=$.extend({currentIndex:0,tab$:":scope > .tab-bar > .tab-item",panel$:":scope > .tab-panel > .panel-item",ajaxClass:"j-ajax"},t);return this.each(function(){var t=$(this),a=t.find(s.tab$),n=t.find(s.panel$);a.each(function(e){var t=$(this);s.currentIndex==e?t.addClass("active"):t.removeClass("active"),t.each(function(){t.click(function(t){i(a,n,e),t.preventDefault()})})}),i(a,n,s.currentIndex)});function i(t,e,a){var n=t.eq(a);s.currentIndex=a,t.removeClass("active"),n.addClass("active");var i,r,o=e.removeClass("active").eq(s.currentIndex).addClass("active");!n.hasClass(s.ajaxClass)||(i=n.attr("data-href"))&&!o.attr("loaded")&&(r=i.getParams(),$.ajax({type:"GET",url:i,data:r,success:function(t){o.triggerPageClear();var e=dwz.getUrlCallback(i),a=$.templateWrap(t);e?e.call(o,a,r):(o.html(t).initUI(),$.execHelperFn($box,a,r)),o.attr("loaded",!0)}}))}}}),function(g){g.fn.extend({slide:function(t){var f=g.extend({titActive:"on",titSelector:".hd > ul",wrapCell:".bd",currentIndex:0,delayTime:400,interTime:5e3,loop:!0,autoPlay:!1,autoCss:!1},t);return this.each(function(){var t=Math.round(1e7*Math.random()),e=g(this).attr("data-slide-id",t),a=f.wrapCell?e.find(f.wrapCell):e,n=a.children(),i=null,r=e.find(f.titSelector),o=a.width(),s=o,l=n.children();f.autoCss&&(a.css({overflow:"hidden",position:"relative"}),n.css({overflow:"hidden",position:"relative",padding:"0px",margin:"0px"}),l.css({display:"table-cell","vertical-align":"top"}));var c,d=f.currentIndex,u=l.size();function h(){var t=(o-s)/2;f.loop?-1==d?n.animate({x:-(d+1)*s+t},f.delayTime,"ease",function(){d=u-1,n.translateX(-(d+1)*s+t+"px"),i&&i.removeClass(f.titActive).eq(d).addClass(f.titActive)}):u<=d?n.animate({x:-(d+1)*s+t},f.delayTime,"ease",function(){d=0,n.translateX(-(d+1)*s+t+"px"),i&&i.removeClass(f.titActive).eq(d).addClass(f.titActive)}):(n.animate({x:-(d+1)*s+t},f.delayTime,"ease"),i&&i.removeClass(f.titActive).eq(d).addClass(f.titActive)):(u<=d&&(d=0),n.animate({x:-d*s+t},f.delayTime,"ease"),i&&i.removeClass(f.titActive).eq(d).addClass(f.titActive))}function p(){-1==c&&f.autoPlay&&(c=setInterval(function(){0!=g('div[data-slide-id="'+t+'"]').size()?(d++,h()):clearInterval(c)},f.interTime))}0!=u&&(0<u&&(s=e.width()),u<2&&(f.loop=!1),r.size()&&(r.html("<li></li>".repeat(u)),i=r.find("> li")),l.css({width:s+"px"}),n.css({width:s*u+"px"}),n.find("img").on("dragstart",function(t){return!1}),f.loop&&(n.append(l.eq(0).clone(!0)),n.prepend(l.eq(u-1).clone(!0)),n.css({width:s*(u+2)+"px"})),e.on("slide-resize",function(){setTimeout(function(){o=a.width(),s=o,0<u&&(s=e.width()),n.children().css({width:s+"px"}),n.css({width:s*u+"px"}),f.loop&&n.css({width:s*(u+2)+"px"}),h()},200)}),c=-1,h(),1<u&&(p(),i&&i.each(function(t){g(this).touchwipe({touch:function(){d=t,h()}})}),n.touchwipe({direction:"horizontal",touchstart:function(){-1!=c&&(clearInterval(c),c=-1)},touchmove:function(t,e){var a=f.loop?1:0;n.translateX(-(d+a)*s-e.dx+"px")},touchend:function(t,e){40<e.dx?d<u-(f.loop?0:1)&&(d++,g.slideMedia&&g.slideMedia.play()):e.dx<-40&&d>(f.loop?-1:0)&&(d--,g.slideMedia&&g.slideMedia.play()),h(),p()}})))})}})}(dwz),function(m){m.fn.extend({slideTab:function(t){var g=m.extend({activeClass:"on",header$:".hd",content$:".bd",currentIndex:0,delayTime:400,onSwitchSlide:null},t);return this.each(function(){var t=Math.round(1e7*Math.random()),e=m(this).attr("data-slide-tab-id",t),t=e.find(g.content$),r=t.children("ul"),o=e.find(g.header$),n=o.children("ul"),s=n.children(),i=0,l=0;s.each(function(t){var e=m(this).width(!0);i<e&&(i=e),l+=e});var a,c=r.children(),d=g.currentIndex,u=s.size();0==c.size()&&(a="",s.each(function(t){a+="<li></li>"}),r.html(a),c=r.children());t.width();var h=c.width(!0);function p(t){var e,a=s.removeClass(g.activeClass).eq(d).addClass(g.activeClass);t&&(e=-d*i,0<(a=((t=o.width())-i+(i-a.width()))/2)&&(0<(e+=a)?e=0:e<t-l&&(e=t-l)),n.animate({x:e},g.delayTime,"ease"))}function f(){var a=c.eq(d),t=-d*h,e=(o.width()-h+(h-a.width()))/2;0<e&&(t+=e),r.animate({x:t},g.delayTime,"ease"),r.find(":scope>li").removeClass(g.activeClass).eq(d).addClass(g.activeClass);var n,i=s.eq(d),t=i.attr("data-href");g.onSwitchSlide&&t&&(n=t.getParams(),i.attr("data-loaded")||m.ajax({type:"GET",url:t,data:n,success:function(t){i.attr("data-loaded",1);var e=i.find("img");0<e.size()&&(n.img_src=e.attr("src")),g.onSwitchSlide(a,t,n)},error:dwz.ajaxError}))}c.each(function(t){var e=m(this).width(!0);h<e&&(h=e),0}),0<u&&(n.css({width:l+"px"}),o.scroll({scrollX:!0,scrollY:!1,scroll$:":scope > ul",stopPropagationEvents:!0}),p(),f(),s.each(function(t){m(this).touchwipe({data:t,touch:function(t){d=t.data,p(!0),f()}})}),r.touchwipe({stopPropagationEvents:!0,direction:"horizontal",touchstart:function(){},touchmove:function(t,e){g.loop;r.translateX(-d*h-e.dx+"px")},touchend:function(t,e){40<e.dx?d<u-1&&(d++,p(!0),m.slideMedia&&m.slideMedia.play()):e.dx<-40&&0<d&&(d--,p(!0),m.slideMedia&&m.slideMedia.play()),f()}}))})}})}(dwz),$.filterSelect={config:{box$:"#filter-select",openClass:"open",frag:'<div id="filter-select" class="unitBox"></div>',bgBox$:"#mask-filter-select",bgFrag:'<div id="mask-filter-select" class="mask-bg"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){this.$box||($.extend($.filterSelect.config,t),$("body").append($.filterSelect.config.frag),$("body").append($.filterSelect.config.bgFrag),this.$box=$($.filterSelect.config.box$),this.$bgBox=$($.filterSelect.config.bgBox$),this.$bgBox.on($.event.hasTouch?"touchstart":"click",function(){$.filterSelect.close()}))},open:function(t){this.init(t);var a,n=$.extend({type:"GET",url:"",data:{},callback:null,pop:"default",top:0},t),i=this.$box,e=this.$bgBox,r=document.documentElement.clientHeight-n.top;"fullscreen"!=n.pop&&(r*=.7),e.addClass($.filterSelect.config.openClass),i.addClass($.filterSelect.config.openClass),setTimeout(function(){i.css({top:n.top+"px",height:r+"px"}),e.css({top:n.top+"px"})},20),n.url&&(a=$.extend(n.url.getParams(),n.data),$.ajax({type:"GET",url:n.url,data:n.data,success:function(t){i.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url));var e=$.templateWrap(t);n.callback?n.callback.call(i,e):(i.html(t).initUI(),$.execHelperFn(i,e,a))},error:dwz.ajaxError})),this.isOpen=!0},close:function(){var t=$.filterSelect.$box,e=$.filterSelect.$bgBox;e&&e.removeClass($.filterSelect.config.openClass),t&&(t.css({height:"0px"}),setTimeout(function(){t.removeClass($.filterSelect.config.openClass)},500)),this.isOpen=!1},getBox:function(){return this.$box}},$.filterPanel={config:{box$:"#filter-panel",openClass:"open",frag:'<div id="filter-panel" class="unitBox"></div>',bgBox$:"#mask-filter-panel",bgFrag:'<div id="mask-filter-panel" class="mask-bg"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){$.extend($.filterPanel.config,t),$("body").append($.filterPanel.config.frag).append($.filterPanel.config.bgFrag),this.$box=$($.filterPanel.config.box$),this.$bgBox=$($.filterPanel.config.bgBox$),this.$bgBox.click(function(){$.filterPanel.close()})},open:function(t){var a,n=$.extend({type:"GET",url:"",pop:"default",data:{},callback:null},t),i=this.$box;this.$bgBox.addClass($.filterPanel.config.openClass),i.show().translateX(i.get(0).clientWidth+"px"),setTimeout(function(){i.animate({x:0},400,"ease")},10),n.url&&(a=$.extend(n.url.getParams(),n.data),$.ajax({type:"GET",url:n.url,data:n.data,success:function(t){i.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url));var e=$.templateWrap(t);n.callback?n.callback.call(i,e,a):(i.html(t).initUI(),$.execHelperFn(i,e,a))},error:dwz.ajaxError})),this.isOpen=!0},close:function(){var t=this.$box,e=this.$bgBox;t.animate({x:t.get(0).clientWidth},500,"ease",function(){t.html("").hide()}),e.removeClass($.filterPanel.config.openClass),this.isOpen=!1},getBox:function(){return this.$box}},function(l){l.croppic={imgCropData:function(t,e){var a=l.extend({imgBg$:"img.croppic-bg",imgWrap$:".crop-img-wrap"},e),n=t.find(a.imgWrap$),e=n.find("img"),t=e.get(0),a=e.position(),t={src:e.attr("src"),left:-a.left,top:-a.top,width:n.width(),naturalWidth:t.naturalWidth,height:n.height(),naturalHeight:t.naturalHeight,rate:1};return 0<t.naturalWidth&&(t.rate=e.width()/t.naturalWidth,t.left=t.left/t.rate,t.top=t.top/t.rate,t.width=t.width/t.rate,t.height=t.height/t.rate),t.left<0&&(t.left=0),t.top<0&&(t.top=0),t.width>t.naturalWidth-t.left&&(t.width=t.naturalWidth-t.left),t.height>t.naturalHeight-t.top&&(t.height=t.naturalHeight-t.top),t},render:function(t,e){var e=l.extend({imgBg$:"img.croppic-bg",imgWrap$:".crop-img-wrap"},e),i=t.find(e.imgWrap$),r=i.find("img"),o=t.find(e.imgBg$);0==o.size()?o=l('<img class="croppic-bg" src="'+r.attr("src")+'">').appendTo(t):o.attr("src",r.attr("src"));e=t.width();e<i.width()&&i.css({width:e+"px",height:e+"px"}),r.on("load",function(){var t=i.position();r.css({width:i.width()+"px"}),o.css({width:i.width()+"px"});var e=(i.height()-r.height())/2,a=(i.width()-r.width())/2;r.css({top:e+"px",left:a+"px"}),o.css({top:t.top+e+"px",left:t.left+a+"px"})});var s={getImgStyle:function(){var t=o.position(),e=o.get(0);return{left:t.left,top:t.top,width:o.width(),naturalWidth:e.naturalWidth,height:o.height(),naturalHeight:e.naturalHeight}},cacheStartStyle:function(){o.data("zoom-start",s.getImgStyle())},setZoom:function(t){var e=l.event.getDistance(t.startX,t.startY,t.startX2,t.startY2),a=l.event.getDistance(t.x,t.y,t.x2,t.y2),n=i.position(),t=o.data("zoom-start")||s.getImgStyle(),a=t.width*a/e;a<i.width()&&(a=i.width());e=t.top+(t.height-t.height*a/t.width)/2,t=t.left+(t.width-a)/2;o.css({top:e+"px",left:t+"px",width:a+"px"}),r.css({top:e-n.top+"px",left:t-n.left+"px",width:a+"px"})},checkRestore:function(){r.width<i.width()&&(r.css({width:i.width()+"px"}),o.css({width:i.width()+"px"}));var t=i.position(),e=o.position(),a=r.height(),n=i.height();a<n?(r.css({top:(n-a)/2+"px"}),o.css({top:t.top+(n-a)/2+"px"})):e.top>t.top?(r.css({top:"0px"}),o.css({top:t.top+"px"})):e.top+o.height()<t.top+i.height()&&(r.css({top:i.height()-o.height()+"px"}),o.css({top:t.top+i.height()-o.height()+"px"})),e.left>t.left?(r.css({left:"0px"}),o.css({left:t.left+"px"})):e.left+o.width()<t.left+i.width()&&(r.css({left:i.width()-o.width()+"px"}),o.css({left:t.left+i.width()-o.width()+"px"}))},setPos:function(t){var e=o.data("zoom-start")||s.getImgStyle(),a=-t.dx+e.left,t=-t.dy+e.top,e=i.position();r.css({top:-e.top+t+"px",left:-e.left+a+"px"}),o.css({top:t+"px",left:a+"px"})}};t.touchwipe({direction:"all",touchstart:function(){s.cacheStartStyle()},touchmove:function(t,e){"zoom"==e.touchType&&s.setZoom(e),"touch"==e.touchType&&s.setPos(e)},touchend:function(){s.checkRestore()}})}}}(dwz),dwz.gps={PI:3.141592653589793,x_pi:52.35987755982988,delta:function(t,e){var a=.006693421622965943,n=this.transformLat(e-105,t-35),i=this.transformLng(e-105,t-35),r=t/180*this.PI,e=1-a*(e=Math.sin(r))*e,t=Math.sqrt(e);return{lat:n=180*n/(6378245*(1-a)/(e*t)*this.PI),lng:i=180*i/(6378245/t*Math.cos(r)*this.PI)}},gcj_encrypt:function(t,e){if(this.outOfChina(t,e))return{lat:t,lng:e};var a=this.delta(t,e);return{lat:t+a.lat,lng:e+a.lng}},gcj_decrypt:function(t,e){if(this.outOfChina(t,e))return{lat:t,lng:e};var a=this.delta(t,e);return{lat:t-a.lat,lng:e-a.lng}},bd_encrypt:function(t,e){var a=e,e=t,t=Math.sqrt(a*a+e*e)+2e-5*Math.sin(e*this.x_pi),a=Math.atan2(e,a)+3e-6*Math.cos(a*this.x_pi);return bdLng=t*Math.cos(a)+.0065,bdLat=t*Math.sin(a)+.006,{lat:bdLat,lng:bdLng}},bd_decrypt:function(t,e){var a=e-.0065,e=t-.006,t=Math.sqrt(a*a+e*e)-2e-5*Math.sin(e*this.x_pi),e=Math.atan2(e,a)-3e-6*Math.cos(a*this.x_pi),a=t*Math.cos(e);return{lat:t*Math.sin(e),lng:a}},mercator_encrypt:function(t,e){e=20037508.34*e/180;return{lat:20037508.34*(Math.log(Math.tan((90+t)*this.PI/360))/(this.PI/180))/180,lng:e}},mercator_decrypt:function(t,e){e=e/20037508.34*180,t=t/20037508.34*180;return{lat:t=180/this.PI*(2*Math.atan(Math.exp(t*this.PI/180))-this.PI/2),lng:e}},distance:function(t,e,a,n){a=Math.cos(t*this.PI/180)*Math.cos(a*this.PI/180)*Math.cos((e-n)*this.PI/180)+Math.sin(t*this.PI/180)*Math.sin(a*this.PI/180);1<a&&(a=1),a<-1&&(a=-1);var i=6371e3*Math.acos(a);return i},outOfChina:function(t,e){return e<72.004||137.8347<e||(t<.8293||55.8271<t)},transformLat:function(t,e){var a=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return a+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,a+=2*(20*Math.sin(e*this.PI)+40*Math.sin(e/3*this.PI))/3,a+=2*(160*Math.sin(e/12*this.PI)+320*Math.sin(e*this.PI/30))/3},transformLng:function(t,e){e=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return e+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,e+=2*(20*Math.sin(t*this.PI)+40*Math.sin(t/3*this.PI))/3,e+=2*(150*Math.sin(t/12*this.PI)+300*Math.sin(t/30*this.PI))/3}},function(i){i.amap={calDistance:function(t){var e=t.lat1,a=t.lng1,n=t.lat2,i=t.lng2,r=Math.PI;function o(t){return t*r/180}var s=o((e+n)/2),l=o((e-n)/2),t=o((a-i)/2),e=Math.sin(l),n=Math.sin(t),a=Math.sin(s),t=void 0,i=(e*=e)*(1-(n*=n))+(1-(a*=a))*n,l=(1-e)*(1-n)+a*n;return 2*(t=Math.atan(Math.sqrt(i/l)))*6378137*(1+1/298.257*((3*(s=Math.sqrt(i*l)/t)-1)/2/l*a*(1-e)-(3*s+1)/2/i*(1-a)*e))},calRotation:function(t){var e=i.extend({map:null,startPos:null,endPos:null},t),a=0,n=e.map.lnglatToPixel(e.startPos,e.map.getZoom()),t=e.map.lnglatToPixel(e.endPos,e.map.getZoom());return a=t.x!=n.x?(e=(t.y-n.y)/(t.x-n.x),a=360*Math.atan(e)/(2*Math.PI),-(a=t.x<n.x?90-a+90:-a)):90*-(0<t.y-n.y?-1:1)},addMarker:function(t){t=i.extend({map:null,position:null,offset:new AMap.Pixel(0,0),content:'<div class="dwz-marker icon-md"><img src="./image/icon/marker-end.svg"></div>',zIndex:100},t);return new AMap.Marker(t)}}}(dwz),function(r){function n(t){this.$el=t.$el,this.canvas=this.$el.get(0),this.ctx=this.canvas.getContext("2d"),t.width&&(this.canvas.width=t.width),t.height&&(this.canvas.height=t.height),this.ctx.fillStyle=t.fillStyle||"#ffffff",this.p=0,this.l=10,this.arr=[],this.canvas.onmousedown=this.downEvent.bind(this),this.canvas.onmousemove=this.moveEvent.bind(this),this.canvas.onmouseup=this.upEvent.bind(this),this.canvas.addEventListener("touchstart",this.downEvent.bind(this),!1),this.canvas.addEventListener("touchmove",this.moveEvent.bind(this),!1),this.canvas.addEventListener("touchend",this.upEvent.bind(this),!1),this.canvas.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.moveFlag=!1,this.upof={},this.radius=0,this.has=[],this.lineMax=10,this.lineMin=5,this.linePressure=1,this.smoothness=80,this.img=new Image,this.img.src=t.brushUrl||"image/drawingBoard/pen1.png"}n.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.toDataURL=function(){for(var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),e=0;e<t.data.length;e+=4)0==t.data[e+3]&&(t.data[e]=255,t.data[e+1]=255,t.data[e+2]=255,t.data[e+3]=255);return this.ctx.putImageData(t,0,0),this.canvas.toDataURL("image/jpeg",1)},n.prototype.clickEvent=function(t){this.cli=this.getXY(t)},n.prototype.downEvent=function(t){window.console.log("点击"),this.moveFlag=!0,this.has=[],this.upof=this.getXY(t);var e=this.upof.x,t=this.upof.y;this.arr.unshift({x1:e,y1:t})},n.prototype.moveEvent=function(t){if(this.moveFlag){t.preventDefault();var e=this.getXY(t),a=this.upof;this.radius;this.has.unshift({time:(new Date).getTime(),dis:this.distance(a,e)});for(var n=0,i=0,r=0;r<this.has.length-1&&(n+=this.has[r].dis,i+=this.has[r].time-this.has[r+1].time,!(n>this.smoothness));r++);var o=Math.min(i/n*this.linePressure+this.lineMin,this.lineMax)/2;this.radius=o,this.upof=e;for(var s=Math.round(this.has[0].dis/2)+1,l=0;l<s;l++){var c=a.x+(e.x-a.x)/s*l,d=a.y+(e.y-a.y)/s*l;this.ctx.beginPath(),c-=this.l/2,d-=this.l/2,this.arr.unshift({x:c,y:d}),this.ctx.drawImage(this.img,c,d,this.l,this.l),this.l=this.l-.2,this.l<this.lineMin&&(this.l=this.lineMin),this.p++}}},n.prototype.upEvent=function(t){if(this.moveFlag=!1,this.l=this.lineMax,100<this.arr.length){for(var e=0;e<60;e++)this.arr[e].x=this.arr[e].x-this.l/4,this.arr[e].y=this.arr[e].y-this.l/4,this.ctx.drawImage(this.img,this.arr[e].x,this.arr[e].y,this.l,this.l),this.l=this.l-.3,this.l<5&&(this.l=5);this.l=this.lineMax,this.arr=[]}1==this.arr.length&&(this.ctx.drawImage(this.img,this.arr[0].x1-this.l/2,this.arr[0].y1-this.l/2,this.l,this.l),this.arr=[])},n.prototype.getXY=function(t){var e=t.clientX||t.touches[0].clientX,a=t.clientY||t.touches[0].clientY,t=this.$el.offset();return{x:e-t.left+(document.body.scrollLeft||document.documentElement.scrollLeft),y:a-t.top+(document.body.scrollTop||document.documentElement.scrollTop)}},n.prototype.distance=function(t,e){var a=e.x-t.x,t=e.y-t.y;return Math.sqrt(a*a+t*t)},r.extend({Brush:n,drawingBoardRender:function(t,e){var a=this,e=template.render(t.html,{params:e});a.html(e).initUI(),setTimeout(function(){var t=a.find("canvas"),i=new n({$el:a.find("canvas"),width:t.width(),height:t.height(),brushUrl:"image/drawingBoard/pen1.png"});a.find("button.dwz-btn-reset").click(function(){i.clear()}),a.find("button.dwz-btn-submit").click(function(){var t=i.toDataURL(),e=r.navView.getBox(),a=e.find("input.dwz-sign-input").val(t.replace("data:image/jpeg;base64,","")),t='<img src="'+t+'"><a class="btn-txt">重新签名</a>',n=e.find(".dwz-sign-box");n.data("btn_html")||n.data("btn_html",n.html()),n.html(t),n.find(".btn-txt").touchwipe({touch:function(){setTimeout(function(){n.html(n.data("btn_html")),a.val("")},200)}}),r.dialog.close()})},500)}})}(dwz);var _createClass=function(){function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var DwzWidget=function(){function a(t){var t=t.$el,e=void 0===t?null:t;_classCallCheck(this,a),this.$el=e;try{e instanceof $||(this.$el=$(e))}catch(t){}this.eventNames={show:"show",hide:"hide"}}return _createClass(a,[{key:"find",value:function(t){return this.$el.find(t)}},{key:"findByCls",value:function(t){return this.$el.find("."+t)}},{key:"on",value:function(t,e,a){return this.$el.on(t,e,a)}},{key:"off",value:function(t,e){return this.$el.off(t,e)}},{key:"trigger",value:function(t,e){return this.$el.trigger(t,e)}},{key:"show",value:function(){return this.$el.show(),this.trigger(this.eventNames.show)}},{key:"hide",value:function(){return this.$el.hide(),this.trigger(this.eventNames.hide)}},{key:"isEventTarget",value:function(t){return this.$el.get(0)==t.target}}]),a}(),DwzMarquee=function(){function o(t){var e=t.$el,a=t.cls,n=void 0===a?"marquee":a,i=t.itemCls,e=void 0===i?"marquee-item":i,a=t.duration,i=void 0===a?1e4:a,a=t.pageSize,a=void 0===a?1:a;_classCallCheck(this,o);var r=_possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));return r.cls=n,r.itemCls=e,r.pageSize=a,r.duration=i,r.animationend="webkitAnimationEnd animationend webkitTransitionEnd transitionend",r.isOver=!1,r.isLastPlay=!0,setTimeout(function(){r.play()},1e3),r.$el.on("mouseover",function(){r.isOver=!0}),r.$el.on("mouseout",function(){r.isOver=!1}),r}return _inherits(o,DwzWidget),_createClass(o,[{key:"_animationEvent",value:function(){var e=this,a=this.findByCls(this.cls),n=this.findByCls(this.itemCls).eq(0),t=n.height();a.translate({y:0}),a.off(this.animationend).on(this.animationend,function(t){a.off(e.animationend),a.translate({y:0}),e.isLastPlay&&a.append(n),setTimeout(function(){e._animationEvent()},1<e.pageSize?1e3:10)}),setTimeout(function(){e.isOver&&1<e.pageSize?(e.isLastPlay=!1,a.translateY("0.1px",e.duration,"linear")):(e.isLastPlay=!0,a.translateY(-t+"px",e.duration,"linear"))},50)}},{key:"play",value:function(){var t,e,a=this;0!=this.$el.size()&&(0==(t=this.findByCls(this.cls)).size()&&(this.$el.html('<div class="'+this.cls+'">'+this.$el.html()+"</div>"),t=this.findByCls(this.cls)),e=this.findByCls(this.itemCls),1==this.pageSize&&0<e.size()&&t.height()>this.$el.height()&&(t.append(e.eq(0).clone(!0)),e=this.findByCls(this.itemCls)),1<e.size()&&(1<this.pageSize&&this.$el.css({height:e.eq(0).height()*this.pageSize+"px"}),setTimeout(function(){a._animationEvent()},500)))}},{key:"html",value:function(t){this.$el.html(t),this.play()}}]),o}();$.extend({DwzMarquee:DwzMarquee}),function(t){t.setRegional("calendar",{dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),t.setRegional("alert",{title:{error:"错误",success:"成功",confirm:"确认提示"},btnMsg:{ok:"确定",cancel:"取消"}}),t.setRegional("actionSheet",{cancelTxt:"取消"})}(dwz),function(l){l.config.frag.external='<iframe src="{url}" class="iframe-pages" frameborder="no" scrolling="auto" border="0" marginwidth="0" marginheight="0" allowfullscreen="true"></iframe>',l.regPlugins.push(function(t){l.fn.slide&&l("div.dwz-slide",t).each(function(){var t=l(this);t.slide({currentIndex:parseInt(t.attr("data-open-index"))||0,autoCss:!1,autoPlay:"false"!=t.attr("data-auto-play"),loop:"false"!=t.attr("data-loop"),zoom:"true"==t.attr("data-zoom")})}),l.navTab&&l("a[target=navTab]",t).touchwipe({touch:function(t){var e=l(this),a=e.attr("data-href");l.navTab.open({tabid:e.attr("rel"),url:a}),t.preventDefault()}}).hrefFix(),l.navView&&(l("a[target=navView], li[target=navView]",t).touchwipe({touch:function(t){var e=l(this),a=e.attr("data-href");l.navView.open({url:a,rel:e.attr("rel")||"_blank",external:e.attr("data-external")||!1,title:e.attr("title")||""}),t.stopPropagation()}}).hrefFix(),l("div.nav-view .back-button",t).click(function(t){l.navView.close()})),l.dialog&&(l("a[target=dialog], li[target=dialog]",t).touchwipe({touch:function(t){var e=l(this);l.dialog.open({url:e.attr("data-href"),pop:e.attr("data-pop")||"fullscreen"}),t.stopPropagation()}}).hrefFix(),l("img[target=dialog], a[target=dialog-pic]",t).touchwipe({touch:function(t){var e=l(this);l.dialog.open({url:e.attr("data-href"),pop:"pic",data:{src:e.attr("data-src")||e.attr("src")}}),t.stopPropagation()}}),l("#dialog .pop-down-close, #dialog .back-button",t).click(function(t){l.dialog.close(),t.stopPropagation()})),l.alert&&(l("a[target=alertDialog]",t).touchwipe({touch:function(t){var e=l(this);l.alert.prompt(e.attr("data-href")),t.stopPropagation()}}).hrefFix(),l("#alertMsgBox .close",t).click(function(t){l.alert.close(),t.preventDefault()}),l("#alertPromptBox .close",t).click(function(t){l.alert.close("prompt"),t.preventDefault()})),l.fn.tabs&&l("div.dwz-tabs",t).each(function(){var t=l(this);t.tabs({currentIndex:t.attr("data-open-index")||0})}),l.fn.panel&&l("div.dwz-panel.dwz-collapse",t).panel(),l.fn.toggleSelectRef&&l("select.toggleSelectRef",t).each(function(){l(this).toggleSelectRef()}),l(".dwz-open-right",t).touchOpenRight(),l("input.dwz-disable-autofocus",t).disableAutofocus(),l.fn.clipboardTip&&l("input.dwz-clipboard, textarea.dwz-clipboard",t).clipboardTip(),l("input.required, select.required, textarea.required",t).each(function(t,e){l(e).parentsUnitBox("form-item").find(":scope > label, :scope > .item-content > label").addClass("required")})}),l.fn.extend({disableAutofocus:function(){return this.each(function(){var t=l(this);t.attr("readonly","readonly"),setTimeout(function(){t.removeAttr("readonly")},600)})},redirect:function(){return this.each(function(){l(this).touchwipe({touch:function(t){var e=l(this).attr("href");e&&(window.location=e),t.preventDefault()}})})},hoverClass:function(t){var e=0<arguments.length&&void 0!==t?t:"hover";return this.each(function(){var t=l(this);l.event.hasTouch?(t.attr("ontouchstart","$(this).addClass('"+e+"')"),t.attr("ontouchend","$(this).removeClass('"+e+"')")):(t.attr("onmousedown","$(this).addClass('"+e+"')"),t.attr("onmouseup","$(this).removeClass('"+e+"')"),t.attr("onmouseout","$(this).removeClass('"+e+"')"))})},touchOpenRight:function(){var a=l.extend({ctlClass:"dwz-open-right",openClass:"open-right"});return this.each(function(){var t=l(this),e=t.parent();t.touchwipe({wipeLeft:function(){e.find("."+a.ctlClass).removeClass(a.openClass),t.addClass(a.openClass)},wipeRight:function(){t.removeClass(a.openClass)}}),e.attr("data-"+a.openClass)||e.attr("data-"+a.openClass,1).touchwipe({touch:function(){setTimeout(function(){e.find("."+a.ctlClass).removeClass(a.openClass)},500)}})})},checkboxRadio:function(){return this.each(function(){var e=l(this),a=e.attr("data-checkbox-radio")||"form",n=e.attr("name");e.on("change",function(t){this.checked&&e.parentsUntil(function(){return l(this).is(a)}).find("input[name="+n+"]").each(function(){t.target!==this&&(this.checked=!1)})})})},toggleSelectRef:function(t){var o=l.extend({ref:"data-ref-box",refVal:"data-ref-val",ctrHide:"data-ctr-hide"},t);return this.each(function(){var s=l(this);function r(t,e,a,n){var i;!function(t,e){var a=s.val();if(e){if(!a||a==t)return 1;if(t)for(var n=t.split(","),i=0;i<n.length;i++)if(a==n[i])return 1}else if(a!=t){if(t)for(var r=t.split(","),o=0;o<r.length;o++)if(a==r[o])return;return 1}}(e,a)?t.show().removeClass("ignoreRequired").find(":input").removeClass("ignore"):(i=!1,t.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)}).each(function(){var t=l(this);t.get(0)==s.get(0)?i=!0:t.is(":checkbox")&&t.attr("checked",!1)}),i||(n||t.hide(),t.addClass("ignoreRequired").find(":input").addClass("ignore")))}function t(){for(var t=s.attr(o.ref).split("|"),e=s.attr(o.refVal).split("|"),a=s.attr(o.ctrHide)||!1,n=s.hasClass("ignoreOnly"),i=0;i<t.length;i++)r(l(t[i]),e[i],a,n)}t(),s.change(t)})}})}(dwz);var biz=window.biz||{server:{ENV:"DEV",_flag:function(){return $.inArray(this.ENV,["TEST","UAT","LIVE"])?"REMOTE":this.ENV},baseUrl:{DEV:"",TEST:"/app_proxy",UAT:"http://mobile.jui.org",LIVE:"http://mobile.jui.org"},_verifyImg:{DEV:"./doc/verify.png",REMOTE:"/Public/verify"},_login:{DEV:"./doc/json/login.json",REMOTE:"/login"},loginSms:{DEV:"./doc/json/login.json",REMOTE:"/login/verify"},register:{DEV:"./doc/json/register.json",REMOTE:"/register"},forgetPwd:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/forget"},changePwd:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/user/password"},changeMobile:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/user/phone"},userProfile:{DEV:"./doc/json/login.json",REMOTE:"/user"},sendSmsCode:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/code"},feedback:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/feedback"},userRealVerify:{DEV:"./doc/json/login.json",REMOTE:"/user/realVerify"},homeAd:{DEV:"./doc/json/homeAd.json",REMOTE:"/homeAd"},widgetList:{DEV:"./doc/json/widgetList.json",REMOTE:"/widgetList"},regionList:{DEV:"./doc/json/region/test_{code}.json",REMOTE:"/region/list"},persionList:{DEV:"./doc/json/persionList.json",REMOTE:"/persion/list"},announce:{recommend:{DEV:"./doc/json/announce/list.json",REMOTE:"/announce/recommend"},list:{DEV:"./doc/json/announce/list.json",REMOTE:"/announce/list"},detail:{DEV:"./doc/json/announce/detail_{id}.json",REMOTE:"/announce/detail"}},transport:{task:{DEV:"./doc/json/transport/task.json",REMOTE:"/transport"},list:{DEV:"./doc/json/transport/list.json",REMOTE:"/transport/list"},detail:{DEV:"./doc/json/transport/detail.json",REMOTE:"/transport/detail"},start:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/start"},finish:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/finish"},first:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/first"},last:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/last"},picUpload:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/upload"},picDel:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/picDel"},gpsUpload:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/point"}},message:{list:{DEV:"./doc/json/messageList.json",REMOTE:"/notice"},del:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/notice/delete"}},favorite:{list:{DEV:"./doc/json/favoriteList.json",REMOTE:"/RestApi/favoriteList"},del:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/favorite/delete"}},uploadUserIcon:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/upload"},getUrl:function(t,e){t=this.baseUrl[this.ENV]+t[this._flag()].replace("{token}",UserInfo.token);return e&&(t=t.replaceTm(e)),t},getVerifyImgUrl:function(){return this.baseUrl[this.ENV]+this._verifyImg[this._flag()]+"?t="+(new Date).getTime()},getLoginUrl:function(){return this.baseUrl[this.ENV]+this._login[this._flag()]}}},CommonStore={data:[],getData:function(t){for(var e=$.extend({selectedId:""},t),a=[],n=0;n<this.data.length;n++)a.push(this.data[n]),a[n].selected=a[n].id==e.selectedId;return a},getItem:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].id==t)return this.data[e];return{}}},SexStore=$.extend({},CommonStore,{data:[{id:1,name:"男"},{id:2,name:"女"}]}),DepartmentStore=$.extend({},CommonStore,{data:[{id:1,name:"技术部"},{id:2,name:"市场部"},{id:3,name:"财务部"}]}),InterestStore=$.extend({},CommonStore,{data:[{id:1,name:"阅读"},{id:2,name:"写代码"},{id:3,name:"户外运动"},{id:4,name:"旅游"},{id:5,name:"美食"},{id:6,name:"其它"}]}),TransportStatus=$.extend({},CommonStore,{data:[{id:"0",icon:"status-pending",name:"待出发"},{id:"1",icon:"status-fail",name:"运输中"},{id:"2",icon:"status-pass",name:"已完成"}]});$._ajax=$.ajax,$.extend({ajax:function(t){var e={token:UserInfo.token||""},t=$.extend({data:{},header:e},t);"DEV"==biz.server.ENV&&(t.type="GET"),$._ajax(t)},fetchAjax:function(t){var e=$.extend({key:"",url:"",data:{},type:"GET",success:null},t),a="dwz_json_"+e.key;if(!e.key||!e.url)throw new Error("fetchAjax: key and url is required");$.ajax({type:e.type,url:e.url,dataType:"json",data:e.data,cache:!1,global:!1,success:function(t){$.setStorage(a,t),e.success&&e.success(t)},error:function(){var t=$.getStorage(a);t&&e.success&&e.success(t)}})}}),$.extend(biz,{ajaxError:function(t){401!=t.status?$.alert.toast("操作失败，请稍后再试！"):$.gotoLogin()},safeAreaTop:0,fixStatusBar:function(t){t.find("header, dwz-fix-status-bar").css({"padding-top":biz.safeAreaTop+"px"})},hasPermission:function(t){t=api.hasPermission({list:t});return console.log(JSON.stringify(t)),t},requestPermission:function(t,a){api.requestPermission({list:t,code:100001},function(t,e){console.log(JSON.stringify(t)),a&&a(t)})},initPermission:function(t){api.requestPermission({list:t},function(t){console.log(JSON.stringify(t))})},checkPermission:function(a,t){var e=biz.hasPermission([a]);return!!(e&&e[0]&&e[0].granted)||(api.confirm({title:"提醒",msg:"没有获得 "+(t||a)+" 权限\n是否前往设置？",buttons:["去设置","取消"]},function(t,e){1==t.buttonIndex&&biz.requestPermission([a])}),!1)},updateApp:function(t){"android"==api.systemType?api.download({url:t.source,report:!0},function(t,e){t&&!t.state&&$.alert.toast("正在下载应用"+t.percent+"%"),t&&t.state&&(t=t.savePath,api.installApp({appUri:t}))}):"ios"==api.systemType&&api.installApp({appUri:t.source})},checkUpdate:function(){api.require("mam").checkUpdate(function(t,e){var a;t&&t.status?(a=t.result).update&&(t="新版本型号:"+a.version+";更新提示语:"+a.updateTip+";发布时间:"+a.time,a.closed?api.alert({title:"有新的版本，请下载并安装",msg:t,buttons:["确定"]},function(t,e){1==t.buttonIndex&&biz.updateApp(a)}):api.confirm({title:"有新的版本，是否下载并安装",msg:t,buttons:["确定","取消"]},function(t,e){1==t.buttonIndex&&biz.updateApp(a)})):$.alert.toast(e.msg)})},pageRender:function(t,e){e.UserInfo||(e.UserInfo=UserInfo);var a=template.render(t.html,e);this.html(a).initUI(),$.execHelperFn(this,t,e)},iframeRender:function(t,e){e=template.render(t.html,{page_title:decodeURI(e.page_title||"iframe外部页面"),page_url:decodeURI(e.page_url)});this.html(e).initUI()},createDriving:function(t,n){var e=$.extend({map:null,pointStart:{lng:0,lat:0},pointEnd:{lng:0,lat:0},policy:AMap.DrivingPolicy.REAL_TRAFFIC},t),t=new AMap.Driving({map:e.map,hideMarkers:!0,policy:e.policy});return t.search(new AMap.LngLat(e.pointStart.lng,e.pointStart.lat),new AMap.LngLat(e.pointEnd.lng,e.pointEnd.lat),function(t,e){var a={};e.routes&&(a=e.routes[0]),"complete"===t?console.log("绘制驾车路线完成"):console.log("获取驾车数据失败："+e),n&&n(a)}),t},location:{lastTime:0,timestamp:0,truck_id:"",transport_id:"",lng:120,lat:30,zoom:8,updTransport:function(){$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.list),dataType:"json",data:{pageNum:1,status:1},cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&t.data.list&&t.data.list.length&&(biz.location.truck_id=t.data.list[0].truck_id,biz.location.transport_id=t.data.list[0].id)},error:biz.ajaxError})}},startLocation:function(){var a,t;biz.location.lastTime||(biz.location.updTransport(),a=$(document),(t=api.require("bmLocation")).configManager({accuracy:"battery_saving",filter:1,activityType:"automotiveNavigation",locationTimeout:10,reGeocodeTimeout:10,coordinateType:"BMK09LL"}),t.start({locatingWithReGeocode:!0,backgroundLocation:!0},function(t){var e;t.status&&(biz.location.lat=t.location.latitude,biz.location.lng=t.location.longitude,biz.location.timestamp=Math.round((new Date).getTime()),a.trigger("location.change",biz.location),biz.location.lastTime+1e4<biz.location.timestamp&&(e=biz.server.getUrl(biz.server.transport.gpsUpload),t={transport_id:biz.location.transport_id,truck_id:biz.location.truck_id,gathertime:Math.round(biz.location.timestamp/1e3),lng:biz.location.lng,lat:biz.location.lat},biz.location.lastTime=biz.location.timestamp,biz.location.transport_id&&$.ajax({type:"POST",url:e,dataType:"json",data:t,cache:!1,global:!1,success:function(t){console.log(JSON.stringify(t))},error:biz.ajaxError})))}))},getGPS:function(a,n){biz.checkPermission("location","gps定位")?window.api?api.require("bmLocation").singleLocation({reGeocode:!1,netWorkState:!1},function(t,e){t.status?(t={lat:t.location.latitude,lng:t.location.longitude},a&&a(t)):n&&n()}):(new BMap.Geolocation).getCurrentPosition(function(t){var e;this.getStatus()==BMAP_STATUS_SUCCESS?(e=t.point,e=$.gps.bd_encrypt(e.lat,e.lng),a&&a(e,t)):n&&n()},{enableHighAccuracy:!0}):n&&n()},openPdf:function(t){api.require("pdfReader").open({path:t,hidden:{print:!0,export:!0,bookmark:!0,email:!0},androidHidden:{topBackButton:!0,topListButton:!0,topSearchButton:!0,bottomProgress:!0},backBtn:{size:{w:60,h:40},bg:{normal:"rgba(0,0,0,0)",highlight:"rgba(0,0,0,0)"},title:{text:"关闭",size:13,color:"ios"==api.systemType?"#000":"#fff",alignment:"center"},corner:5}})},openMapNav:function(t){var e=t.lng,a=t.lat,n=t.name,i=void 0===n?"":n,r=api.appInstalled({sync:!0,appBundle:"com.baidu.BaiduMap"}),t=api.appInstalled({sync:!0,appBundle:"com.autonavi.minimap"});api.hideProgress();var n=[],o=[];r&&(r=$.gps.bd_encrypt(a,e),o.push({androidPkg:"android.intent.action.VIEW",appParam:{destination:r.lat+","+r.lng,mode:"driving",sourceApplication:api.appName},uri:"intent://map/direction?destination=latlng:"+r.lat+","+r.lng+"|name:"+i+"&mode=driving&src="+api.appName+"#Intent;scheme=bdapp;package=com.baidu.BaiduMap;end",iosUrl:"baidumap://map/direction"}),n.push("百度地图")),t&&(o.push({androidPkg:"android.intent.action.VIEW",appParam:{lat:a,lon:e,dev:"0",style:"1",sourceApplication:api.appName},uri:"androidamap://navi?sourceApplication="+api.appName+"&poiname="+i+"&lat="+a+"&lon="+e+"&dev=0&style=1",iosUrl:"iosamap://navi"}),n.push("高德地图")),0==n.Length?$.alert.open({msg:"手机未安装百度地图或者高德地图，请保证手机有其中一个导航软件。"}):api.actionSheet({title:"请选择需要跳转的导航软件",cancelTitle:"取消",buttons:n},function(t,e){t=t.buttonIndex;o[t-1]&&api.openApp(o[t-1],function(t,e){console.log(JSON.stringify(t))})})},format:{formatDateTime:function(t,e){return t?new Date(t).formatDate(e||"yyyy-MM-dd HH:mm:ss"):""},formatTime:function(t){return t?t<60?t+"秒":t<3600?(t/60).roundFloat(0)+"分钟":(t/3600).roundFloat(0)+"小时"+(t%3600/60).roundFloat(0)+"分钟":"--"},formatDistance:function(t){return t?t<1e3?parseInt(t)+"米":(t/1e3).toFixed(1)+"公里":"--"},percent:function(t,e){return(100*t).toFixed(e)}}}),$.extend(template.defaults.imports,{filterInputNum:function(t){return t||""},showSex:function(t){return SexStore.getItem(t).name},showTransportStatus:function(t,e){return TransportStatus.getItem(t)[e||"name"]},showImg:function(t,e){return t||e||"image/browse-empty-bg.svg"},showUserIcon:function(t){return t||"image/dwz-logo.svg"}},biz.format),biz.helper={reqRegionHtml:function(t){var e=$.extend({code:"",callback:null,tpl:""},t);$.ajax({type:"GET",url:biz.server.getUrl(biz.server.regionList,{code:e.code}),dataType:"json",data:{},cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t=template.render(e.tpl,{list:t.data}),e.callback(t))},error:biz.ajaxError})},selectRegionRender:function(i,t){var r=$.extend({target:null,callback:null},t),t=template.render(i.html,{UserInfo:UserInfo,params:t});this.html(t).initUI();var a=this.find("ul.dwz-province"),o=this.find("ul.dwz-city"),s=this.find("ul.dwz-county");biz.helper.reqRegionHtml({tpl:i.tpl_list,callback:function(t){a.html(t);var e=a.find("li.item").click(function(){var n=$(this);s.html("").parentsUnitBox("dwz-scroll").scrollTo({y:0,duration:300}),e.removeClass("active"),n.addClass("active"),biz.helper.reqRegionHtml({code:n.attr("data-code"),tpl:i.tpl_list,callback:function(t){o.html(t).parentsUnitBox("dwz-scroll").scrollTo({y:0,duration:300});var e=o.find("li.item").click(function(){var a=$(this);e.removeClass("active"),a.addClass("active"),biz.helper.reqRegionHtml({code:a.attr("data-code"),tpl:i.tpl_list,callback:function(t){s.html(t).parentsUnitBox("dwz-scroll").scrollTo({y:0,duration:300});var e=s.find("li.item").click(function(){var t=$(this);e.removeClass("active"),t.addClass("active");t={province:n.attr("data-code"),city:a.attr("data-code"),county:t.attr("data-code"),names:n.attr("data-name")+" "+a.attr("data-name")+" "+t.attr("data-name")};r.callback&&r.callback.call($(r.target),t)})}})})}})})}})},multipleSelectRender:function(t,e){var n=$.extend({target:null,callback:null},e),e=template.render(t.html,e);this.html(e).initUI();var i=this.find("form").on("submit",function(t){var e=i.find("input[type=checkbox]:checked");if(!e.size())return $.alert.error("至少选择一项"),!1;var a=[];return e.each(function(t,e){a.push({value:e.value,name:$(e).attr("data-name")})}),n.callback&&n.callback.call($(n.target),a),$.alert.close("prompt"),!1})},filterPanelRender:function(a,t){var n=$.extend({target:null,callback:null},t),e=template.render(a.html,t);this.html(e).initUI();var i=this.find("form.dwz-list-form"),r=i.find("ul.dwz-list-box");i.requestList=function(e){$.ajax({type:t.type||"GET",url:t.searchUrl,dataType:"json",data:i.serializeArray(),success:function(t){$.isAjaxStatusOk(t)&&(t=template.render(a.tpl_list,t.data),t=$(t),e?items.appendTo(r).hoverClass():r.html(t).initUI(),t.click(function(t){n.callback&&n.callback.call($(n.target),this.dataset),$.filterPanel.close()}))},error:biz.ajaxError})},$.listForm(i)},removeUnitBox:function(t,e){var a=$(t),n=a.parentsUnitBox("scroll-content"),t=a.parentsByTag("form");a.parentsUnitBox().remove(),n.scrollTo({y:"end",duration:800}),t.size()&&e&&((n=t.data("delItem")||[]).push(e),t.data("delItem",n))},itemDetailHelper:function(t){var e=this.find(".dwz-item-detail-box");this.find(".dwz-item-detail-btn").click(function(){$(t.tpl_item_detail).appendTo(e).initUI(),e.parentsUnitBox("scroll-content").scrollTo({y:"end",duration:800})})}};var UserInfo={token:"",mobile:"",realname:"",sex:1,address:"",user_type:"",headimgurl:""},UserInfoUtil={update:function(t){console.log(JSON.stringify(t)),null!=t.uid&&(UserInfo.uid=t.uid),null!=t.realname&&(UserInfo.realname=t.realname),null!=t.mobile&&(UserInfo.mobile=t.mobile),null!=t.token&&(UserInfo.token=t.token),null!=t.user_type&&(UserInfo.user_type=t.user_type),null!=t.sex&&(UserInfo.sex=1==t.sex?1:2),null!=t.headimgurl&&(UserInfo.headimgurl=t.headimgurl),null!=t.address&&(UserInfo.address=t.address),$.setStorage("APP_USER_INFO",UserInfo)},clear:function(){UserInfo={},$.setStorage("APP_USER_INFO",UserInfo)}};function initUserInfo(){UserInfo.token||(UserInfo=$.getStorage("APP_USER_INFO")||{}),console.log(JSON.stringify(UserInfo)),UserInfo.token&&$.ajax({type:"POST",url:biz.server.getUrl(biz.server.userProfile),dataType:"json",data:{},cache:!1,global:!1,success:function(t){console.log(JSON.stringify(t)),t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok?UserInfoUtil.update(t.data):($.alert.toast(t[dwz.config.keys.message]),UserInfoUtil.clear()),dwz.checkAjaxLogin(t)},error:biz.ajaxError})}function loginRender(t,e){var a={form_url:biz.server.getLoginUrl(),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode),login_sms_url:biz.server.getUrl(biz.server.loginSms)},a=template.render(t.html,a);this.html(a).initUI(),this.find("form").each(function(t,e){var a=$(e),e=function(){var t=a.find("button.primary");a.valid(!0)?t.removeAttr("disabled").removeClass("disabled"):t.attr("disabled","disabled").addClass("disabled")};e(),a.find(":input").on("change keyup",e)})}function forgetPwdRender(t,e){var a={form_url:biz.server.getUrl(biz.server.forgetPwd),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode)},a=template.render(t.html,a);this.html(a).initUI()}function registerRender(t,e){var a={form_url:biz.server.getUrl(biz.server.register),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode)},a=template.render(t.html,a);this.html(a).initUI()}function loginAjaxDone(t){console.log(JSON.stringify(t)),$.isAjaxStatusOk(t)?(UserInfoUtil.update(t.data),$.dialog.close(),$.navTab.open({url:"tpl/home.html?dwz_callback=biz.home.render",tabid:"home"})):$.alert.error(t.info)}function forgetAjaxDone(t){console.log(JSON.stringify(t)),$.isAjaxStatusOk(t)?($.gotoLogin(),$.alert.success(t.info)):$.alert.error(t.info)}function authAjaxDone(t){console.log(JSON.stringify(t)),$.navView.close(),$.isAjaxStatusOk(t)?(UserInfoUtil.update(t.data),$.alert.success("实名认证成功")):$.alert.success("实名认证失败")}function submitUserRealInfo(t){t=$(t);if(!t.valid())return!1;t=t.serializeMap();return window.api&&bizUtil.userRealVerify(t),!1}$.fn.extend({fleshVerifyImg:function(){return this.each(function(){$(this).touchwipe({touch:function(){$(this).attr("src",biz.server.getVerifyImgUrl())}})})},sendVerifyMs:function(){return this.each(function(){$(this).click(function(){var t,a,n,i=$(this),e=i.attr("rel"),r=i.attr("data-op"),e=i.parentsUnitBox().find(e).val();e&&e.isMobile()?(t=60,a=$('<span class="count">重发('+t+"s)</span>").appendTo(this.parentNode),i.hide(),n=setInterval(function(){a.text("重发("+t+"s)"),--t<=1&&(clearInterval(n),a.remove(),i.show())},1e3),$.ajax({type:"POST",dataType:"json",url:i.attr("data-href"),data:{mobile:e,sign:$.md5(e+"dwz_mobile"),type:r},success:function(t){console.log(JSON.stringify(t));var e=t[dwz.config.keys.message]||t.info;isAjaxStatusError(t)?($.alert.error(e),clearInterval(n),a.remove(),i.show()):e&&$.alert.success(e)}})):$.alert.error("请输入您的11位手机号码")})})}}),$.urlInterceptor=function(t){var e=!!UserInfo.token;return e||$.inArray(t.getRequestURI(),["tpl/user/login.html","tpl/user/forgetPwd.html","tpl/user/register.html","tpl/home.html"])&&(e=!0),!!e||($.gotoLogin(),!1)};var bizUtil={userRealVerify:function(n,i){biz.checkPermission("camera","摄像头")&&api.require("dwzBaiduFaceLive").faceLiveness({debug:0,cropType:1,cropHeight:300,quality:70,eye:!1,mouth:!0,headRight:!1,headLeft:!1,headUp:!1,headDown:!1,headLeftOrRight:!1},function(t,e){var a;t.status?(a=t.face,i?i(a):(api.showProgress({title:"正在上传图片...",text:"先喝杯茶...",modal:!0}),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.userRealVerify),dataType:"json",data:{img:a,mobile:n.mobile,realname:n.realname,token:UserInfo.token},success:function(t){$.isAjaxStatusOk(t)&&authAjaxDone(t)},error:biz.ajaxError,complete:function(){api.hideProgress()}}))):t.message&&$.alert.toast(t.message)})}};biz.home={render:function(a,t){var n=this,t=template.render(a.html,{UserInfo:UserInfo,params:t});this.html(t).initUI();var i=this.find("form.dwz-list-form");i.requestList=function(t){var e=i.serializeArray();$.ajax({type:"POST",url:biz.server.getUrl(biz.server.homeAd),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t=template.render(a.tpl_home_ad,t),n.find("#home-ad-box").html(t).initUI())},error:biz.ajaxError}),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.widgetList),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t.data.map(function(t){return t.url||(t.url="tpl/widget/"+t.name+"/index.html?dwz_script=function"),t}),t=template.render(a.tpl_home_widget,{widgetList:t.data}),n.find("#home-widget-box").html(t).initUI())},error:biz.ajaxError})},$.listForm(i)},aboutRender:function(t){t=template.render(t.html,{version:window.api?"v"+api.appVersion:"",env:biz.server.ENV});this.html(t).initUI()}},biz.announce={listRender:function(a,t){t=template.render(a.html,{UserInfo:UserInfo,params:t});this.html(t).initUI();var n=this.find("form.dwz-list-form"),i=n.find("ul.dwz-list-box");n.requestList=function(e){$.ajax({type:"POST",url:biz.server.getUrl(biz.server.announce.list),dataType:"json",data:n.serializeArray(),cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(n.total=t.total||t.data.length,n.total&&n.find(".empty_box").hide(),t=template.render(a.tpl_list,t),e?$(t).appendTo(i).hoverClass():i.html(t).initUI())},error:biz.ajaxError})},$.listForm(n)},detailRender:function(e,t){var a=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.announce.detail,t),dataType:"json",data:{announce_id:t.id},cache:!1,global:!1,success:function(t){console.log(t);t=template.render(e.html,{UserInfo:UserInfo,vo:t.data});a.html(t).initUI()},error:biz.ajaxError})}},biz.transport={listRender:function(a,t){t=template.render(a.html,{UserInfo:UserInfo,params:t});this.html(t).initUI();var n=this.find("form.dwz-list-form"),i=n.find("ul.dwz-list-box");n.requestList=function(e){$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.list),dataType:"json",data:n.serializeArray(),cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(n.total=t.data.total||t.data.list?t.data.list.length:0,n.total&&n.find(".empty_box").hide(),t=template.render(a.tpl_list,t.data),e?$(t).appendTo(i).hoverClass():i.html(t).initUI())},error:biz.ajaxError})},$.listForm(n)},detailRender:function(n,t){var i=this,e=template.render(n.html,{params:t});i.html(e).initUI();var r=i.find(".sheet-box"),e=i.find(".dwz-map-box"),o=new AMap.Map(e.get(0),{zoom:biz.location.zoom}),s={car:$.amap.addMarker({map:o,position:[biz.location.lng,biz.location.lat],content:'<div class="center-marker"><img src="./image/icon/marker-car.svg" class="icon-md"></div>'}),start:null,end:null};$(document).on("location.change",function(t){var e,a,n=new AMap.LngLat(biz.location.lng,biz.location.lat);s.car.setPosition(n),s.start&&(biz.location.lng||biz.location.lat)&&(s.start.getPosition(),a=s.end.getPosition(),e=$.amap.calRotation({map:o,startPos:n,endPos:a}),s.car.setAngle(e),a=[n,a],s.polyline?s.polyline.setPath(a):s.polyline=new AMap.Polyline({map:o,path:a,lineCap:"round",isOutline:!0,outlineColor:"white",showDir:!0,strokeColor:"blue",strokeWeight:4,borderWeight:2,strokeOpacity:.5}))}),i.on(dwz.event.type.pageClear,function(){$(document).off("location.change")});var l=i.find("ul.receive-box"),e=i.find("form.dwz-list-form");e.on("submit",function(){return $.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.detail),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(e){var t,a;dwz.checkAjaxLogin(e)&&(a={UserInfo:UserInfo,vo:e.data,receive:e.data.receive||{},ship:e.data.ship||{}},t=template.render(n.tpl_sheet_box,a),r.html(t).initUI(),a=template.render(n.tpl_receive_box,a),l.html(a),i.find(".dwz-btn-start").touchwipe({wipeRight:function(){var t=$(this);t.hasClass("wipe-hover")||(t.addClass("wipe-hover"),setTimeout(function(){t.removeClass("wipe-hover")},3e3),biz.transport.transportStart(e.data))}}),i.find(".dwz-btn-finish").touchwipe({wipeRight:function(){var t=$(this);t.hasClass("wipe-hover")||(t.addClass("wipe-hover"),setTimeout(function(){t.removeClass("wipe-hover")},3e3),biz.transport.transportFinish(e.data))}}),biz.transport.vo=e.data,a=new AMap.LngLat(e.data.ship.lng,e.data.ship.lat),s.start=$.amap.addMarker({map:o,position:a,content:'<div class="center-marker"><img src="./image/icon/marker-start.svg" class="icon-md"></div>'}),s.end=$.amap.addMarker({map:o,position:[e.data.receive.lng,e.data.receive.lat],content:'<div class="dwz-marker icon-md"><img src="./image/icon/marker-end.svg"></div>'}),o.setFitView([s.car,s.end]),$(document).trigger("location.change",biz.location))},error:biz.ajaxError}),!1}),e.trigger("submit")},firstRender:function(e,t){var a=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.detail),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&(t=template.render(e.html,{vo:t.data,location:biz.location,form_url:biz.server.getUrl(biz.server.transport.first)}),a.html(t).initUI(),a.find("a.old-img-del").click(biz.transport.delPic))}})},lastRender:function(e,t){var a=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.detail),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&(t=template.render(e.html,{vo:t.data,location:biz.location,form_url:biz.server.getUrl(biz.server.transport.last)}),a.html(t).initUI(),a.find("a.old-img-del").click(biz.transport.delPic))}})},delPic:function(t){var e=$(this),a=e.parentsUntil(function(){return $(this).is("li.thumbnail")}),n=e.attr("data-id"),i=e.attr("data-img-url"),e=e.attr("data-field");i?$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.picDel),dataType:"json",data:{id:n,imgUrl:i,field:e},cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&a.remove()},error:biz.ajaxError}):a.remove(),t.stopPropagation()},confirmFirst:function(e){return $.alert.confirm({msg:"出发前先录入发货过磅信息"},function(t){1==t.buttonIndex&&$.navView.open({url:"tpl/transport/first.html?dwz_callback=biz.transport.firstRender",data:e,rel:"transportFirst"})}),!1},transportStart:function(t){if(!t.weigh_first_commit)return biz.transport.confirmFirst(t);$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.start),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){navViewAjaxDoneReload(t),biz.location.updTransport()},error:biz.ajaxError})},confirmFinish:function(e){return $.alert.confirm({msg:"完成前先录入卸货过磅信息"},function(t){1==t.buttonIndex&&$.navView.open({url:"tpl/transport/last.html?dwz_callback=biz.transport.lastRender",data:e,rel:"transportFinish"})}),!1},transportFinish:function(t){if(!t.weigh_last_commit)return biz.transport.confirmFinish(t);$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.finish),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){navViewAjaxDoneReload(t),biz.location.updTransport()},error:biz.ajaxError})},formSubmitWeigh:function(t){console.log("formSubmitWeigh()....");var e=$(t),a=$("#upload-weigh_pic"),n=$("#upload-weigh_site_pic");if(a.size()&&0==a.find(".thumbnail").size())return $.alert.open({msg:"请选择上传磅单图片"}),!1;if(n.size()&&0==n(".thumbnail").size())return $.alert.open({msg:"请选择上传现场图片"}),!1;n=e.find("input.dwz-sign-input");return n.size()&&!n.val()&&e.find(".dwz-sign-box").size()?($.alert.open({msg:"您还没有完成签字！"}),!1):validateCallback(t,function(t){console.log(JSON.stringify(t)),$.isAjaxStatusOk(t)?navViewAjaxDoneClose(t):$.ajaxDone(t)})},drivingRender:function(n,i){var r=this,t=template.render(n.html,{params:i});r.html(t).initUI();var t=r.find(".dwz-map-box"),o=new AMap.Map(t.get(0),{zoom:biz.location.zoom}),s=new AMap.LngLat(biz.location.lng,biz.location.lat),e=new AMap.LngLat(parseFloat(i.lng),parseFloat(i.lat));o.setCenter(s);$.amap.addMarker({map:o,position:s,content:'<div class="center-marker"><img src="./image/icon/marker-start.svg" class="icon-md"></div>'}),$.amap.addMarker({map:o,position:e,content:'<div class="dwz-marker icon-md"><img src="./image/icon/marker-end.svg"></div>'});var l=biz.createDriving({map:o,pointStart:s,pointEnd:e},function(t){t=template.render(n.tpl_nav_info,{route:t,pointStart:s,pointEnd:e});r.find(".dwz-nav-info").html(t)}),a=r.find("form.dwz-form"),c=a.find("div.sheet-box"),d=a.find("input[name=end]"),u=a.find("ul.dwz-list");a.on("submit",function(t){console.log("search poi..."),t.preventDefault(),c.removeClass("fold");t=d.val().trim();t&&api.ajax({url:a.attr("action"),method:"get",data:{values:{keywords:t}}},function(t,e){var a;1==t.status&&(a=[{name:i.name,address:i.address,lng:i.lng,lat:i.lat}],t.pois.forEach(function(t){var e=t.location.split(",");a.push({name:t.cityname+t.adname+t.name,address:t.address,lng:parseFloat(e[0]),lat:parseFloat(e[1])})}),t=template.render(n.tpl_list,{list:a}),u.html(t),u.find("li.item").touchwipe({touch:function(){var t=$(this);d.val(t.attr("data-name")),c.addClass("fold"),l&&l.clear();t=new AMap.LngLat(parseFloat(t.attr("data-lng")),parseFloat(t.attr("data-lat")));l=biz.createDriving({map:o,pointStart:s,pointEnd:t},function(t){t=template.render(n.tpl_nav_info,t);r.find(".dwz-nav-info").html(t)})}}))})});var h=!1;d.on("compositionstart compositionend input focus",function(t){switch(console.log(t.type,h),t.type){case"compositionstart":h=!0;break;case"compositionend":h=!1;break;default:h||a.trigger("submit")}})},mapNav:function(){var t,e;!biz.checkPermission("location","GPS定位")||(e=biz.transport.vo)&&($.navView.close(),t=biz.location,e=e.receive,api.require("aMapNavigation").start({start:{lon:t.lng,lat:t.lat},end:{lon:e.lng,lat:e.lat},type:"drive",strategy:"fast",mode:"GPS",styles:{preference:{night:!1,compass:!1,crossImg:!1,degree:30,yawReCal:!1,jamReCal:!1,alwaysBright:!1}}},function(t,e){t?console.log(JSON.stringify(t)):console.log(JSON.stringify(e))}))}},biz.message={removeItem:function(t){var t=t.id,e=void 0===t?null:t;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.message.del),dataType:"json",data:{id:e},cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&$.navTab.getBox().find('ul.list li[data-id="'+e+'"]').remove()},error:biz.ajaxError})},listRender:function(a){var t=template.render(a.html,{UserInfo:UserInfo});this.html(t).initUI();var n=this.find("form.dwz-list-form"),i=n.find("ul.dwz-list-box");n.requestList=function(e){var t=n.serializeArray();console.log(JSON.stringify(t)),$.ajax({type:"GET",url:biz.server.getUrl(biz.server.message.list),dataType:"json",data:t,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(n.total=t.data.total||t.data.length,n.total&&n.find(".empty_box").hide(),t=template.render(a.tpl_list,t.data),e?$(t).appendTo(i).touchOpenRight().hoverClass():i.html(t).initUI())},error:biz.ajaxError})},$.listForm(n)}},biz.favorite={removeItem:function(t){var t=t.id,e=void 0===t?null:t;$.alert.confirm({msg:"确认删除吗？"},function(t){$.ajax({type:"POST",url:biz.server.getUrl(biz.server.favorite.del),dataType:"json",data:{id:e},cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&$.navTab.getBox().find('ul.list li[data-id="'+e+'"]').remove()},error:biz.ajaxError})})},listRender:function(a){var t=template.render(a.html,{UserInfo:UserInfo});this.html(t).initUI();var n=this.find("form.dwz-list-form"),i=n.find("ul.dwz-list-box");n.requestList=function(e){var t=n.serializeArray();console.log(JSON.stringify(t)),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.favorite.list),dataType:"json",data:t,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(n.total=t.data.total||t.data.length,n.total&&n.find(".empty_box").hide(),t=template.render(a.tpl_list,t.data),e?$(t).appendTo(i).touchOpenRight().hoverClass():i.html(t).initUI())},error:biz.ajaxError})},$.listForm(n)}},biz.my={render:function(a){var n=this,t={UserInfo:UserInfo},t=template.render(a.html,t);this.html(t).initUI();var i=this.find("form.dwz-list-form"),r=$("#my-announce-box");i.requestList=function(t){var e=i.serializeArray();$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.task),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t=template.render(a.tpl_transport,t),n.find("#transport-card-box").html(t))},error:biz.ajaxError}),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.announce.recommend),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t=template.render(a.tpl_announce,t),r.html(t).initUI())},error:biz.ajaxError})},$.listForm(i)},settingRender:function(t){t=template.render(t.html,{UserInfo:UserInfo});this.html(t).initUI(),this.find(".dwz-user-icon").touchwipe({touch:function(){dwz.plus.chooseImage({title:"修改用户头像",maximum:1,callback:function(t){t&&$.navView.open({url:"tpl/my/settingsIcon.html",rel:"mySettingsIcon",data:{imgPath:t},callback:biz.my.settingIconRender})}})}})},settingIconRender:function(t,a){t=template.render(t.html,{UserInfo:UserInfo});this.html(t).initUI();t=biz.safeAreaTop+44;FNImageClip=api.require("FNImageClip"),FNImageClip.open({rect:{x:0,y:t,w:api.winWidth,h:api.winHeight-t},srcPath:a.imgPath,highDefinition:!1,isHideGrid:!0,style:{mask:"rgba(0,0,0,0.6)",clip:{w:300,h:300,x:(api.winWidth-300)/2,y:(api.winHeight-300)/2,borderColor:"#0f0",borderWidth:3,appearance:"rectangle"}},mode:"image",fixedOn:api.frameName},function(t,e){t?console.log(JSON.stringify(t)):alert(JSON.stringify(e))}),this.find("header .back-btn").touchwipe({touch:function(){$.navView.close(),FNImageClip.close()}}),this.find("header .txt-button").touchwipe({touch:function(){FNImageClip.save({destPath:"fs://image/croppic_"+(new Date).getTime()+".jpg",copyToAlbum:!1,quality:1},function(t,e){t?(console.log(JSON.stringify(t)),FNImageClip.close(),$.navView.close(),dwz.plus.getBase64Image({destinationType:"url",imgPath:t.destPath,maxWidth:300,maxHeight:300,callback:function(e){console.log(e),$.isFunction(a.callbackFn)?a.callbackFn(e):$.ajax({type:"POST",dataType:"json",global:!0,url:biz.server.getUrl(biz.server.uploadUserIcon),data:{type:4,imgUrl:e},success:function(t){t.info&&$.alert.toast(t.info);t=$("#my_user_icon_img");0<t.size()&&t.attr("src",e);t=$("#setting_user_icon_img");0<t.size()&&t.attr("src",e),UserInfoUtil.update({headimgurl:e})}})}})):alert(JSON.stringify(e))})}})}},biz.baiduFace={faceLiveness:function(t,a){var e=t.debug,n=void 0===e?0:e,i=t.cropType,r=void 0===i?1:i,o=t.cropHeight,s=void 0===o?300:o,l=t.quality,c=void 0===l?70:l,d=t.eye,u=void 0===d||d,e=t.mouth,i=void 0!==e&&e,o=t.headRight,l=void 0!==o&&o,d=t.headLeft,e=void 0!==d&&d,o=t.headUp,d=void 0!==o&&o,o=t.headDown,o=void 0!==o&&o,t=t.headLeftOrRight,t=void 0!==t&&t;api.require("dwzBaiduFaceLive").faceLiveness({debug:n,cropType:r,cropHeight:s,quality:c,eye:u,mouth:i,headRight:l,headLeft:e,headUp:d,headDown:o,headLeftOrRight:t},function(t,e){!t.status&&t.message&&$.alert.toast(t.message),a&&a(t)})},faceDetect:function(t,a){var e=t.debug,n=void 0===e?0:e,i=t.cropType,e=void 0===i?1:i,i=t.cropHeight,i=void 0===i?300:i,t=t.quality,t=void 0===t?70:t;api.require("dwzBaiduFaceLive").faceDetect({debug:n,cropType:e,cropHeight:i,quality:t},function(t,e){!t.status&&t.message&&$.alert.toast(t.message),a&&a(t)})},testFaceRender:function(e,a){var t=template.render(e.html,a);this.html(t).initUI();var n=this.find("div.dwz-img-box");this.find("button").click(function(t){1==a.isLiveness?biz.baiduFace.faceLiveness({debug:1,cropType:1,cropHeight:300,quality:70,eye:!0,mouth:!1,headRight:!1,headLeft:!1,headUp:!1,headDown:!1,headLeftOrRight:!1},function(t){t.status&&(t=template.render(e.tpl_img,t),n.append(t))}):biz.baiduFace.faceDetect({debug:0,cropType:2,cropHeight:300,quality:70},function(t){t.status&&(t=template.render(e.tpl_img,t),n.append(t))})})},faceLogin:function(){biz.baiduFace.faceLiveness({debug:1},function(t){t.status&&$.ajax({type:"POST",url:biz.server.getLoginUrl(),dataType:"json",data:{faceBase64:t.face},cache:!1,global:!1,success:loginAjaxDone,error:biz.ajaxError})})}};