var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var dwz=function t(e,a){return new t.prototype.init(e,a)};window.$=window.$||dwz,dwz.version="mobile 1.0.0",dwz.rootNodeRE=/^(?:body|html)$/i,dwz.config={pageInfo:{pageNum:"pageNum"},statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},unitBox:"unitBox",rreturn:/\r/g,r20:/%20/g,rCRLF:/\r?\n/g,rsubmitterTypes:/^(?:submit|button|image|reset|file)$/i,rsubmittable:/^(?:input|select|textarea|keygen)/i,rcheckableType:/^(?:checkbox|radio)$/i,rnotwhite:/\S+/g,frag:{}},dwz.regPlugins=[],dwz.extend=function(){var t,e=arguments[0]||{},a=1,n=arguments.length;for("boolean"==typeof e&&(e=arguments[1]||{},a=2),"object"===(void 0===e?"undefined":_typeof(e))||e||(e={}),n==a&&(e=this,--a);a<n;a++)if(null!=(t=arguments[a]))for(var i in t){e[i];var r=t[i];e!==r&&void 0!==r&&(e[i]=r)}return e},dwz.extend({eavl:function(t){return t?(0,eval)(t):null},eqFunction:function(t,e){if(dwz.isFunction(t)&&dwz.isFunction(e)){var a=/^(function\s*)(\w*\b)/;return t===e||t.toString().replace(a,"$1")===e.toString().replace(a,"$1")}return!1},isFunction:function(t){return"function"==typeof t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},instanceOf:function(t){return!!t&&t instanceof dwz.prototype.init},inArray:function(t,e,a){return null==e?-1:-1!=[].indexOf.call(e,t,a)},makeArray:function(t,e){e=e||[];return null!=t&&[].push.call(e,t),e},merge:function(t,e){for(var a=+e.length,n=0,i=t.length;n<a;n++)t[i++]=e[n];return t.length=i,t},each:function(t,e,a){if(dwz.isArray(t)){for(var n=[],i=0;i<t.length;i++){var r=e.call(t[i],i,t[i],a);if(void 0!==r&&n.push(r),!1===r)break}return n}for(var o=[],s=0;s<t.length;s++){var l=t.get(s),c=e.call(l,s,l,a);if(!c&&void 0!==c||o.push(l),!1===c)break}return dwz(o)},get:function(t,e){return dwz.instanceOf(t)?t.get(e):t},isSameTag:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},error:function(t){throw new Error(t)},urlInterceptor:null,getUrlInterceptor:function(t){if(!t)return dwz.urlInterceptor;t=t.getParams();return t.dwz_interceptor?dwz.eavl(t.dwz_interceptor):dwz.urlInterceptor},getUrlCallback:function(t){if(!t)return null;t=t.getParams();return t.dwz_callback?dwz.eavl(t.dwz_callback):null},eval:function(t){t="(false || "+t+")";return window.execScript?window.execScript(t):window.eval(t)},execHelperFn:function(t,e,a){var n;a.dwz_helper&&(n=void 0,"script"==a.dwz_helper?e.script&&(n=dwz.eval(e.script)):n=dwz.eavl(a.dwz_helper),n&&n.call(t,e,a))},templateWrap:function(t){var e={html:(0<arguments.length&&void 0!==t?t:"")||"",script:""},a=/<script(.|\n)*?>(.|\n|\r\n)*?<\/script>/gi,n=e.html.match(a);if(n)for(var i=/<script(.|\n)*?>((.|\n|\r\n)*)?<\/script>/im,r=n.length,o=0;o<r;o++){var s=$(n[o]),l=s.attr("type"),c=s.attr("id"),s=n[o].match(i);"text/html"==l?e[c||"default"]=s[2]:e.script||(e.script=s[2])}return e.html=e.html.replace(a,""),e}}),dwz.config.selector={":input":"input, select, textarea, button",":text":"input:not([type=radio]):not([type=checkbox]):not([type=submit]):not([type=reset]):not([type=button]):not([type=file]):not([type=hidden]):not([type=image])",":password":"input[type=password]",":radio":"input[type=radio]",":checkbox":"input[type=checkbox]",":submit":"input[type=submit], button[type=submit]",":reset":"input[type=reset], button[type=reset]",":button":"input[type=button], input[type=submit], input[type=reset], input[type=image], button",":file":"input[type=file]",":image":"input[type=image]",":hidden":"input[type=hidden]"},dwz.prototype.init=function(t,e){if(this.selector=t,this.context=e,this.elements=[],this.length,!t)return this;var a=1;if("string"==typeof t)if((t=t.trim()).startsWith(">")&&(t=":scope"+t),e&&("string"==typeof e?e=document.querySelector(e):dwz.instanceOf(e)&&(e=1<(a=e.elements.length)?e.elements:e.elements[0])),this.context=e||document,1<a)for(var n=0;n<this.context.length;n++)t&&this.context[n].querySelectorAll(dwz.config.selector[t]||t),Array.prototype.push.apply(this.elements,[]);else 0<=t.indexOf("<")&&0<=t.indexOf(">")?this.elements=dwz.parseHTML(t,!0):t&&(this.elements=this.context.querySelectorAll(dwz.config.selector[t]||t));else{if(dwz.instanceOf(t))return t;if(t instanceof Element||t===document||t===window)this.elements=[t];else if(t instanceof NodeList||dwz.isArray(t))this.elements=t;else if(dwz.isFunction(t))return document.addEventListener("DOMContentLoaded",t),window.onload}return this.context||(this.context=document),this.length=this.elements.length,this},dwz.fn=dwz.extend(dwz.prototype.init.prototype,{extend:function(t){dwz.extend(dwz.fn,t)},toArray:function(){var a=[];return this.elements.forEach(function(t,e){a.push(t)}),a},size:function(){return this.length},eq:function(t){return dwz(this.elements[t])},get:function(t){return void 0===t?this.elements:this.elements[t]},first:function(){return this.eq(0)},last:function(){return this.eq(this.elements.length-1)},prev:function(){var t=this.get(0).previousElementSibling;return t?$(t):null},next:function(){var t=this.get(0).nextElementSibling;return t?$(t):null},parentNode:function(){return this.get(0).parentNode},parent:function(){return $(this.parentNode())},parentsUntil:function(t){for(var e=this.get(0),a=document.getElementsByTagName("body"),n=0;n<100;){if(e=e.parentNode,t.call(e,n))return dwz(e);if(e==a||e==document)break;n++}return dwz()},parentsUnitBox:function(t){return this.parentsUntil(function(){return dwz.hasClass(this,t||dwz.config.unitBox)})},parentsByTag:function(t){return this.parentsUntil(function(){return dwz.isSameTag(this,t)})},children:function(t){return this.find(":scope > "+(t||"*"))},find:function(t){return 0==this.size()?this:dwz(t,this)},filter:function(t){for(var e=[],a=0;a<this.length;a++){var n=this.get(a);t.call(n,a,n)&&e.push(n)}return dwz(e)},each:function(t,e){return dwz.each(this,t,e)},is:function(t){var e=!1,a=this.get(0);return $(t,this.parentNode()).each(function(){this==a&&(e=!0)}),e}}),dwz.extend({getStorage:function(t){t=localStorage.getItem(t);if(t)return JSON.parse(t)},setStorage:function(t,e){localStorage.setItem(t,JSON.stringify(e))},removeStorage:function(t){localStorage.removeItem(t)},clientX:function(t){return t.pageX||t.clientX||(t.targetTouches?t.targetTouches[0].clientX:0)},clientY:function(t){return t.pageY||t.clientY||(t.targetTouches?t.targetTouches[0].clientY:0)},speed:{cal:function(t,e){var a={x:0,y:0};if(!t||!e)return a;var n=t.timestamp-e.timestamp,i=t.x-e.x,e=t.y-e.y;return a.x=0<n?i/n*1e3:i,a.y=0<n?e/n*1e3:e,a}},event:{hasTouch:"ontouchstart"in window,type:{pageClear:"pageClear",activated:"activated"},add:function(r,t,o,s){var l=dwz.data(r,"_events")||{};s||(s=o,o=void 0),dwz.each(t.split(/\s+/),function(t){function e(t){void 0!==o&&(t.data=o),!1===s.call(r,t)&&(t.stopPropagation(),t.preventDefault())}var a=this;l[a]=l[a]||[];for(var n=!1,i=0;i<l[a].length;i++)if(dwz.eqFunction(s,l[a][i].fn)){n=!0;break}n||(l[a].push({handler:e,fn:s}),r.addEventListener(a,e,{passive:!1}))}),dwz.data(r,"_events",l)},remove:function(n,t,i){var r=dwz.data(n,"_events")||{};dwz.each(t.split(/\s+/),function(t){var e=this;if(r[e]){for(var a=0;a<r[e].length;a++)if(i){if(dwz.eqFunction(i,r[e][a].fn)){n.removeEventListener(e,r[e][a].handler,!1),r[e].splice(a,1);break}}else n.removeEventListener(e,r[e][a].handler,!1);void 0===i&&(r[e]=[])}}),dwz.data(n,"_events",r)},trigger:function(t,e,a){e=new Event(e);void 0!==a&&(e.data=a),t.dispatchEvent(e)},isBind:function(t,e,a){var n=dwz.data(t,"_events")||{};if(n[e]&&0<n[e].length){if(void 0===a)return!0;for(var i=0;i<n[e].length;i++)if(a===n[e][i].fn)return!0}return!1},getDistance:function(t,e,a,n){t=Math.abs(a-t),e=Math.abs(n-e);return Math.sqrt(t*t+e*e)},getCenterPos:function(t,e,a,n){var i=Math.min(t,a),t=Math.max(t,a),a=Math.min(e,n);return{x:i+(t-i)/2,y:a+(Math.max(e,n)-a)/2}}},contains:document.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e=e&&e.parentNode;)if(e===t)return!0;return!1},offset:function(t){t=t.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},position:function(t){if(t){var e=dwz.offsetParent(t),a=dwz.offset(t),n=dwz.rootNodeRE.test(e.nodeName)?{top:0,left:0}:dwz.offset(e);return a.top-=parseFloat(t.style.marginTop)||0,a.left-=parseFloat(t.style.marginLeft)||0,n.top+=parseFloat(e.style.borderTopWidth)||0,n.left+=parseFloat(e.style.borderLeftWidth)||0,{top:a.top-n.top,left:a.left-n.left}}},offsetParent:function(t){for(var e=t.offsetParent||document.body;e&&!dwz.rootNodeRE.test(e.nodeName)&&"static"==e.style.position;)e=e.offsetParent;return e},hasClass:function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},addClass:function(t,e){var a=t.className.replace(/[\t\r\n]/g," ");return dwz.each(e.split(/\s+/),function(){dwz.hasClass(t,this)||(a+=" "+this)}),t.className=a.replace(/^\s+|\s+$/g,""),t},removeClass:function(t,e){var a=" "+t.className.replace(/[\t\r\n]/g," ")+" ";return dwz.each(e.split(/\s+/),function(){for(;0<=a.indexOf(" "+this+" ");)a=a.replace(" "+this+" "," ")}),t.className=a.replace(/^\s+|\s+$/g,""),t},toggleClass:function(t,e){return this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e),t},attr:function(t,e,a){return t!==document&&t!==window&&(void 0===a?t.getAttribute(e):void(null===a?t.removeAttribute(e):t.setAttribute(e,a)))},prop:function(t,e,a){return!!$.inArray(e,["checked","selected","disabled","readOnly"])&&(void 0===a?t[e]:void(t[e]=a&&!0))},css:function(t,e,a){if(void 0!==a)t.style[e]=a;else{if("string"==typeof e)return(t.currentStyle||document.defaultView.getComputedStyle(t,null))[e];for(var n in e)t.style[n]=e[n]}},data:function(t,e,a){if(t.dwz_data=t.dwz_data||{},void 0===e)return t.dwz_data;if("string"==typeof e){var n=dwz.camelCase(e);if(void 0===a)return t.dwz_data[n];t.dwz_data[n]=a}else if("object"===(void 0===e?"undefined":_typeof(e)))for(var i in e){var r=dwz.camelCase(i);t.dwz_data[r]=e[i]}},removeData:function(t,e){t.dwz_data&&delete t.dwz_data[e]},cacheCss:function(t,e,a){var n=dwz.data(t,"_css")||{},i=dwz.css(t,e);return a&&i!=a&&(n[e]=i,dwz.data(t,"_css",n)),n[e]},camelCase:function(t){return t.replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})},html:function(t,e){if(void 0===e)return t.innerHTML;"string"==typeof e?t.innerHTML=e.replace(/<script(.|\n)*?>(.|\n|\r\n)*?<\/script>/gi,""):dwz.instanceOf(e)?(t.innerHTML="",e.each(function(){t.appendChild(this)})):t.innerHTML=e},text:function(t,e){if(void 0===e){var a=t.innerText||t.textContent;return a?a.trim():""}void 0!==t.innerText?t.innerText=e:t.textContent=e},selectionPos:function(t){var e,a=$.extend({top:0,left:0,width:0,heigth:0,start:0,paddingLeft:0},dwz.offset(t));return a.paddingLeft=parseInt(dwz.css(t,"padding-left")),document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),a.start=e.text.length):!t.selectionStart&&"0"!=t.selectionStart||(a.cursorStart=t.selectionStart),a},param:function(t){var e="";if(dwz.isArray(t))for(var a=0;a<t.length;a++)e+=(e?"&":"")+t[a].name+"="+(t[a].value+"").encodeParam();else for(var n in t)e+=(e?"&":"")+n+"="+(t[n]+"").encodeParam();return e},parseJSON:function(t){return JSON.parse(t+"")},parseXML:function(t){var e=void 0;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||dwz.error("Invalid XML: "+t),e},parseHTML:function(t,e){var a=document.createElement(t.startsWith("<tr")?"tbody":"div");return a.innerHTML=t,e?a.querySelectorAll(":scope > *"):a.querySelector("*")}}),dwz.extend(String.prototype,{encodeUnicode:function(){for(var t=[],e=0;e<this.length;e++)t[e]=("00"+this.charCodeAt(e).toString(16)).slice(-4);return"\\u"+t.join("\\u")},decodeUnicode:function(){var t=this.replace(/\\/g,"%");return unescape(t)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return 0<=e&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},getRequestURI:function(){var t=this.indexOf("?");return-1==t?this+"":this.substr(0,t)},getParams:function(t){var e={},a=this.indexOf("?");if(-1!=a)for(var n=this.substr(a+1).split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=t?r[1].encodeParam():r[1];e[r[0]]=1<r.length?o:""}return e},encodeParam:function(){return encodeURIComponent(this).replace(dwz.config.rCRLF,"\r\n").replace(dwz.config.r20,"+")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replaceTm:function(e){return e?this.replace(new RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(t){return e[t.replace(/[{}]+/g,"")]}):this},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(){return new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this)},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isMobile:function(){return new RegExp(/(^[0-9]{11,11}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%#&=:]*)$/).test(this)},parseCurrency:function(t){var e=parseFloat(this);return parseFloat(e.toFixed(t||2))}}),dwz.extend(Number.prototype,{roundFloat:function(t){var e=0<arguments.length&&void 0!==t?t:3;return Math.round(this*Math.pow(10,e))/Math.pow(10,e)},formatCurrency:function(t,e){var a=!(1<arguments.length&&void 0!==e)||e,n=(n=this).toString().replace(/\$|\,/g,"");isNaN(n)&&(n="0");var i=n==(n=Math.abs(n)),r=(n=Math.floor(100*n+.50000000001))%100;if(n=Math.floor(n/100).toString(),r<10&&(r="0"+r),t)for(var o=0;o<Math.floor((n.length-(1+o))/3);o++)n=n.substring(0,n.length-(4*o+3))+","+n.substring(n.length-(4*o+3));return(i?"":"-")+n+(a?"."+r:"")},parseCurrency:function(t){return parseFloat(this.toFixed(t||2))}}),dwz.fn.extend({initUI:function(){return this.each(function(){var e=$(this);$.each(dwz.regPlugins,function(t){this(e)})})},add:function(t,e){e=$(t,e),e=[].concat(_toConsumableArray(this.elements),_toConsumableArray(e.elements));return $(e)},on:function(t,e,a){return this.each(function(){dwz.event.add(this,t,e,a)})},off:function(t,e){return this.each(function(){dwz.event.remove(this,t,e)})},trigger:function(t,e){return this.each(function(){dwz.event.trigger(this,t,e)})},isBind:function(t,e){return dwz.event.isBind(this.get(0),t,e)},onPageClear:function(t,e){return this.on(dwz.event.type.pageClear,t,e)},offPageClear:function(t,e){return this.off(dwz.event.type.pageClear,t,e)},onActivated:function(t,e){return this.on(dwz.event.type.activated,t,e)},offActivated:function(t,e){return this.off(dwz.event.type.activated,t,e)},triggerPageClear:function(t){return this.trigger(dwz.event.type.pageClear,t)},click:function(t,e){return this.on("click",t,e)},change:function(t,e){return this.on("change",t,e)},offset:function(){return dwz.offset(this.get(0))},position:function(){return dwz.position(this.get(0))},offsetParent:function(){return dwz.offsetParent(this.get(0))},show:function(){return this.each(function(){var t=dwz.cacheCss(this,"display","none")||"block";this.style.display=t})},hide:function(){return this.each(function(){dwz.cacheCss(this,"display","none"),this.style.display="none"})},toggle:function(){return this.each(function(){var t=dwz.cacheCss(this,"display","none")||"block";this.style.display="none"==this.style.display?t:"none"})},hasClass:function(t){return 0!==this.size()&&dwz.hasClass(this.get(0),t)},addClass:function(t){return this.each(function(){dwz.addClass(this,t)})},removeClass:function(t){return this.each(function(){dwz.removeClass(this,t)})},toggleClass:function(t){return this.each(function(){dwz.toggleClass(this,t)})},attr:function(t,e){return void 0===e?dwz.attr(this.get(0),t):this.each(function(){dwz.attr(this,t,e)})},removeAttr:function(t){return this.each(function(){dwz.attr(this,t,null)})},prop:function(t,e){return void 0===e?dwz.prop(this.get(0),t):this.each(function(){dwz.prop(this,t,e)})},data:function(t,e){return"string"==typeof t&&void 0===e?dwz.data(this.get(0),t):this.each(function(){dwz.data(this,t,e)})},dataset:function(){return 0===this.size()?{}:this.get(0).dataset},css:function(e,t){return void 0!==t?this.each(function(){this.style[e]=t}):void 0===e?this.get(0).style:"string"==typeof e?dwz.css(this.get(0),e):this.each(function(){for(var t in e)this.style[t]=e[t]})},width:function(t){var e=parseFloat(this.css("width"));return t&&(e+=parseFloat(this.css("marginLeft")),e+=parseFloat(this.css("marginRight"))),e},height:function(t){var e=parseFloat(this.css("height"));return t&&(e+=parseFloat(this.css("marginTop")),e+=parseFloat(this.css("marginBottom"))),e},outerWidth:function(t){return this.width(t)+parseFloat(this.css("borderLeft"))+parseFloat(this.css("borderRight"))},outerHeight:function(t){return this.height(t)+parseFloat(this.css("borderTop"))+parseFloat(this.css("borderTop"))},html:function(t){var e=dwz.html(this.get(0),t);return void 0===t?e:this},text:function(t){var e=dwz.text(this.get(0),t);return void 0===t?e:this},prepend:function(t){var a=this.get(0);return $(t).each(function(t,e){a.insertBefore(e,a.firstChild)}),this},append:function(t){var a=this.get(0);return $(t).each(function(t,e){a.appendChild(e)}),this},before:function(t){var a=this,n=this.parentNode();return $(t).each(function(t,e){n.insertBefore(e,a.get(0))}),this},after:function(t){var a=this,n=this.parentNode();return $(t).each(function(t,e){n.insertBefore(e,a.get(0).nextSibling)}),this},prependTo:function(e){return dwz.instanceOf(e)&&(e=e.get(0)),this.each(function(t){e.insertBefore(this,e.firstChild)}),this},appendTo:function(e){return dwz.instanceOf(e)&&(e=e.get(0)),this.each(function(t){e.appendChild(this)}),this},afterTo:function(t){return dwz.instanceOf(t)&&(t=t.get(0)),this.appendTo(t.parentNode)},remove:function(){return this.each(function(t){this.parentNode.removeChild(this)})},wrap:function(e){var a=dwz.isFunction(e);return this.each(function(t){t=dwz.parseHTML(a?e.call(this,t):e);this.parentNode.appendChild(t),t.appendChild(this)})},clone:function(){return dwz(this.get(0).cloneNode(!0))},selectionPos:function(){return dwz.selectionPos(this.get(0))},serialize:function(){return dwz.param(this.serializeArray())},serializeArray:function(){var a=[];return this.is("form")&&this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)&&(this.checked||!dwz.config.rcheckableType.test(t))}).each(function(){var t=$(this).val()||"",e=this.name;a.push({name:e,value:t})}),a},serializeMap:function(){var e={};return this.is("form")&&this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)&&(this.checked||!dwz.config.rcheckableType.test(t))}).each(function(){var t=$(this).val()||"";e[this.name]="number"==this.type||"range"==this.type?parseFloat(t)||0:t}),e},val:function(a){var n,i=void 0,t=void 0,e=this.get(0);return arguments.length?(n=dwz.isFunction(a),this.each(function(t){var e=void 0;1===this.nodeType&&(null==(e=n?a.call(this,t,dwz(this).val()):a)?e="":"number"==typeof e?e+="":dwz.isArray(e)&&(e=dwz.each(e,function(){return null==this?"":this+""})),(i=dwz.valHooks[this.type]||dwz.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):e?(i=dwz.valHooks[e.type]||dwz.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&void 0!==(t=i.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(dwz.config.rreturn,""):null==t?"":t:void 0},hrefFix:function(){return this.each(function(){var t=$(this),e=t.attr("href");e&&"javascript:"!=e&&t.attr("data-href",e).attr("href","javascript:")})}}),dwz.extend({valHooks:{option:{get:function(t){var e=dwz.attr(t,"value");return null!=e?e:dwz.text(t)}},select:{get:function(t){for(var e,a,n=t.options,i=t.selectedIndex,r="select-one"===t.type||i<0,o=r?null:[],s=r?i+1:n.length,l=i<0?s:r?i:0;l<s;l++)if(((a=n[l]).selected||l===i)&&!a.disabled&&(!a.parentNode.disabled||!dwz.nodeName(a.parentNode,"optgroup"))){if(e=dwz(a).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var a=void 0,n=void 0,i=t.options,r=dwz.makeArray(e),o=i.length;o--;)((n=i[o]).selected=dwz.inArray(n.value,r))&&(a=!0);return a||(t.selectedIndex=-1),r}}}}),dwz.each(["radio","checkbox"],function(){dwz.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"1":t.value},set:function(t,e){if(dwz.isArray(e))return t.checked=dwz.inArray(dwz(t).val(),e)}}}),dwz.extend({active:0,ajaxSettings:{type:"POST",global:!1,cache:!1,async:!0,timeout:0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"*",headers:{"X-Requested-With":"XMLHttpRequest"},accepts:{"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{json:dwz.parseJSON,xml:dwz.parseXML}},ajaxSetup:function(t){return dwz.extend(dwz.ajaxSettings,t)},dataFilter:function(t,e){var a=t[e.responseFields[e.dataType]||"responseText"]||t.responseText,e=e.converters[e.dataType];return e&&(a=e.call(t,a)),a},ajax:function(t){var e=dwz.extend({},dwz.ajaxSettings,t);e.type=e.type.toUpperCase(),e.header&&dwz.extend(e.headers,e.header),e.global&&0==dwz.active++&&dwz.event.trigger(document,"ajaxStart");var a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHttp"),n=e.url,i="";e.cache||(n=e.url+(-1==e.url.indexOf("?")?"?":"&")+"_t="+(new Date).getTime()),"GET"!=e.type||!e.data||(t="string"==typeof e.data?e.data:dwz.param(e.data))&&(n+=(-1==n.indexOf("?")?"?":"&")+t),window.debuggap&&0!==n.indexOf("http")&&(n=window.location.origin+"/"+n),a.open(e.type,n,e.async);var r,n=(n=e.accepts[e.dataType])?n+", "+e.accepts["*"]+"; q=0.01":e.accepts["*"];for(r in a.setRequestHeader("Accept",n),e.headers)a.setRequestHeader(r,e.headers[r]);"POST"==e.type&&e.data&&(e.contentType&&a.setRequestHeader("content-type",e.contentType),i=0<=e.contentType.indexOf("application/json")?"string"==typeof e.data?e.data:JSON.stringify(e.data):"string"==typeof e.data?e.data:dwz.param(e.data)),e.timeout&&setTimeout(function(){a.dwz_ajax_done||a.abort("timeout")},e.timeout),a.onreadystatechange=function(){var t;4==a.readyState&&(a.dwz_ajax_done=!0,t=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,200<=a.status&&a.status<300||304===a.status||0==a.status&&"file:"==t?(t=dwz.dataFilter(a,e),e.success&&e.success(t,a.status,a)):e.error&&e.error(a,a.status),e.complete&&e.complete(a,a.status),e.global&&!--dwz.active&&dwz.event.trigger(document,"ajaxStop"))},a.send(i)},setRegional:function(t,e){dwz.regional||(dwz.regional={}),dwz.regional[t]=e}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function navViewAjaxDone(t){$.ajaxDone(t),$.isAjaxStatusOk(t)&&("closeCurrent"==t.callbackType?$.navView.close():"forward"==t.callbackType&&$.navView.reload({url:t.forwardUrl}),t.navTabId?$.navTab.open({tabid:t.navTabId,url:t.forwardUrl}):t.navViewId&&$.navView.open({rel:t.navViewId,url:t.forwardUrl}))}function navViewAjaxDoneReload(t){$.ajaxDone(t),$.isAjaxStatusOk(t)&&$.navView.getBoxs(3).forEach(function(t){0==t.find("form.dwz-list-form").trigger("submit").size()&&t.data("ajaxDoneReload")&&$.navView.reload()})}function navViewAjaxDoneClose(t){$.isAjaxStatusOk(t)&&$.navView.close(),navViewAjaxDoneReload(t)}function dialogAjaxDone(t){$.ajaxDone(t),$.isAjaxStatusOk(t)&&("closeCurrent"==t.callbackType?$.dialog.close():"forward"==t.callbackType&&$.dialog.open({url:t.forwardUrl}),t.navTabId?$.navTab.open({tabid:t.navTabId,url:t.forwardUrl}):t.navViewId&&$.navView.open({rel:t.navViewId,url:t.forwardUrl}))}!function(t){"use strict";function u(t,e){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}function s(t,e,a,n,i,r){return u((r=u(u(e,t),u(n,r)))<<(i=i)|r>>>32-i,a)}function h(t,e,a,n,i,r,o){return s(e&a|~e&n,t,e,i,r,o)}function f(t,e,a,n,i,r,o){return s(e&n|a&~n,t,e,i,r,o)}function p(t,e,a,n,i,r,o){return s(e^a^n,t,e,i,r,o)}function g(t,e,a,n,i,r,o){return s(a^(e|~n),t,e,i,r,o)}function o(t,e){var a,n,i,r;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var o=1732584193,s=-271733879,l=-1732584194,c=271733878,d=0;d<t.length;d+=16)o=h(a=o,n=s,i=l,r=c,t[d],7,-680876936),c=h(c,o,s,l,t[d+1],12,-389564586),l=h(l,c,o,s,t[d+2],17,606105819),s=h(s,l,c,o,t[d+3],22,-1044525330),o=h(o,s,l,c,t[d+4],7,-176418897),c=h(c,o,s,l,t[d+5],12,1200080426),l=h(l,c,o,s,t[d+6],17,-1473231341),s=h(s,l,c,o,t[d+7],22,-45705983),o=h(o,s,l,c,t[d+8],7,1770035416),c=h(c,o,s,l,t[d+9],12,-1958414417),l=h(l,c,o,s,t[d+10],17,-42063),s=h(s,l,c,o,t[d+11],22,-1990404162),o=h(o,s,l,c,t[d+12],7,1804603682),c=h(c,o,s,l,t[d+13],12,-40341101),l=h(l,c,o,s,t[d+14],17,-1502002290),o=f(o,s=h(s,l,c,o,t[d+15],22,1236535329),l,c,t[d+1],5,-165796510),c=f(c,o,s,l,t[d+6],9,-1069501632),l=f(l,c,o,s,t[d+11],14,643717713),s=f(s,l,c,o,t[d],20,-373897302),o=f(o,s,l,c,t[d+5],5,-701558691),c=f(c,o,s,l,t[d+10],9,38016083),l=f(l,c,o,s,t[d+15],14,-660478335),s=f(s,l,c,o,t[d+4],20,-405537848),o=f(o,s,l,c,t[d+9],5,568446438),c=f(c,o,s,l,t[d+14],9,-1019803690),l=f(l,c,o,s,t[d+3],14,-187363961),s=f(s,l,c,o,t[d+8],20,1163531501),o=f(o,s,l,c,t[d+13],5,-1444681467),c=f(c,o,s,l,t[d+2],9,-51403784),l=f(l,c,o,s,t[d+7],14,1735328473),o=p(o,s=f(s,l,c,o,t[d+12],20,-1926607734),l,c,t[d+5],4,-378558),c=p(c,o,s,l,t[d+8],11,-2022574463),l=p(l,c,o,s,t[d+11],16,1839030562),s=p(s,l,c,o,t[d+14],23,-35309556),o=p(o,s,l,c,t[d+1],4,-1530992060),c=p(c,o,s,l,t[d+4],11,1272893353),l=p(l,c,o,s,t[d+7],16,-155497632),s=p(s,l,c,o,t[d+10],23,-1094730640),o=p(o,s,l,c,t[d+13],4,681279174),c=p(c,o,s,l,t[d],11,-358537222),l=p(l,c,o,s,t[d+3],16,-722521979),s=p(s,l,c,o,t[d+6],23,76029189),o=p(o,s,l,c,t[d+9],4,-640364487),c=p(c,o,s,l,t[d+12],11,-421815835),l=p(l,c,o,s,t[d+15],16,530742520),o=g(o,s=p(s,l,c,o,t[d+2],23,-995338651),l,c,t[d],6,-198630844),c=g(c,o,s,l,t[d+7],10,1126891415),l=g(l,c,o,s,t[d+14],15,-1416354905),s=g(s,l,c,o,t[d+5],21,-57434055),o=g(o,s,l,c,t[d+12],6,1700485571),c=g(c,o,s,l,t[d+3],10,-1894986606),l=g(l,c,o,s,t[d+10],15,-1051523),s=g(s,l,c,o,t[d+1],21,-2054922799),o=g(o,s,l,c,t[d+8],6,1873313359),c=g(c,o,s,l,t[d+15],10,-30611744),l=g(l,c,o,s,t[d+6],15,-1560198380),s=g(s,l,c,o,t[d+13],21,1309151649),o=g(o,s,l,c,t[d+4],6,-145523070),c=g(c,o,s,l,t[d+11],10,-1120210379),l=g(l,c,o,s,t[d+2],15,718787259),s=g(s,l,c,o,t[d+9],21,-343485551),o=u(o,a),s=u(s,n),l=u(l,i),c=u(c,r);return[o,s,l,c]}function l(t){for(var e="",a=32*t.length,n=0;n<a;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}function c(t){var e=[];for(e[(t.length>>2)-1]=void 0,n=0;n<e.length;n+=1)e[n]=0;for(var a=8*t.length,n=0;n<a;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}function n(t){for(var e,a="0123456789abcdef",n="",i=0;i<t.length;i+=1)e=t.charCodeAt(i),n+=a.charAt(e>>>4&15)+a.charAt(15&e);return n}function a(t){return unescape(encodeURIComponent(t))}function i(t){return l(o(c(t=a(t)),8*t.length))}function r(t,e){return function(t,e){var a,n=c(t),i=[],r=[];for(i[15]=r[15]=void 0,16<n.length&&(n=o(n,8*t.length)),a=0;a<16;a+=1)i[a]=909522486^n[a],r[a]=1549556828^n[a];return e=o(i.concat(c(e)),512+8*e.length),l(o(r.concat(e),640))}(a(t),a(e))}function e(t,e,a){return e?a?r(e,t):n(r(e,t)):a?i(t):n(i(t))}"function"==typeof define&&define.amd?define(function(){return e}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=e),t.md5=e}(dwz),function(){function LZ(t){return(t<0||9<t?"":"0")+t}function formatDate(t,e){var a=$.regional.utilDate.MONTH_NAMES,n=$.regional.utilDate.DAY_NAMES;e+="";var i,r="",o=0,s="",l=t.getYear()+"",c=t.getMonth()+1,d=t.getDate(),u=t.getDay(),h=t.getHours(),f=t.getMinutes(),t=t.getSeconds(),p={};for(l.length<4&&(l=""+(+l+1900)),p.y=""+l,p.yyyy=l,p.yy=l.substring(2,4),p.M=c,p.MM=LZ(c),p.MMM=a[c-1],p.NNN=a[c+11],p.d=d,p.dd=LZ(d),p.E=n[u+7],p.EE=n[u],p.H=h,p.HH=LZ(h),p.h=0==h?12:12<h?h-12:h,p.hh=LZ(p.h),p.K=11<h?h-12:h,p.k=h+1,p.KK=LZ(p.K),p.kk=LZ(p.k),p.a=11<h?"PM":"AM",p.m=f,p.mm=LZ(f),p.s=t,p.ss=LZ(t);o<e.length;){for(i=e.charAt(o),s="";e.charAt(o)==i&&o<e.length;)s+=e.charAt(o++);null!=p[s]?r+=p[s]:r+=s}return r}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,a,n){for(var i=n;a<=i;i--){var r=t.substring(e,e+i);if(r.length<a)return null;if(_isInteger(r))return r}return null}function parseDate(t,e){var a=$.regional.utilDate.MONTH_NAMES,n=$.regional.utilDate.DAY_NAMES;t+="",e+="";for(var i,r=0,o=0,s="",l=void 0,c=void 0,d=new Date(1900,0,1),u=d.getYear(),h=d.getMonth()+1,f=1,p=d.getHours(),g=d.getMinutes(),m=d.getSeconds(),v="";o<e.length;){for(i=e.charAt(o),s="";e.charAt(o)==i&&o<e.length;)s+=e.charAt(o++);if("yyyy"==s||"yy"==s||"y"==s){if("yyyy"==s&&(c=l=4),"yy"==s&&(c=l=2),"y"==s&&(l=2,c=4),null==(u=_getInt(t,r,l,c)))return 0;r+=u.length,2==u.length&&(u=70<u?+u+1900:+u+2e3)}else if("MMM"==s||"NNN"==s){for(var b=h=0;b<a.length;b++){var y=a[b];if(t.substring(r,r+y.length).toLowerCase()==y.toLowerCase()&&("MMM"==s||"NNN"==s&&11<b)){12<(h=b+1)&&(h-=12),r+=y.length;break}}if(h<1||12<h)return 0}else if("EE"==s||"E"==s)for(var x=0;x<n.length;x++){var w=n[x];if(t.substring(r,r+w.length).toLowerCase()==w.toLowerCase()){r+=w.length;break}}else if("MM"==s||"M"==s){if(null==(h=_getInt(t,r,s.length,2))||h<1||12<h)return 0;r+=h.length}else if("dd"==s||"d"==s){if(null==(f=_getInt(t,r,s.length,2))||f<1||31<f)return 0;r+=f.length}else if("hh"==s||"h"==s){if(null==(p=_getInt(t,r,s.length,2))||p<1||12<p)return 0;r+=p.length}else if("HH"==s||"H"==s){if(null==(p=_getInt(t,r,s.length,2))||p<0||23<p)return 0;r+=p.length}else if("KK"==s||"K"==s){if(null==(p=_getInt(t,r,s.length,2))||p<0||11<p)return 0;r+=p.length}else if("kk"==s||"k"==s){if(null==(p=_getInt(t,r,s.length,2))||p<1||24<p)return 0;r+=p.length,p--}else if("mm"==s||"m"==s){if(null==(g=_getInt(t,r,s.length,2))||g<0||59<g)return 0;r+=g.length}else if("ss"==s||"s"==s){if(null==(m=_getInt(t,r,s.length,2))||m<0||59<m)return 0;r+=m.length}else if("a"==s){if("am"==t.substring(r,r+2).toLowerCase())v="AM";else{if("pm"!=t.substring(r,r+2).toLowerCase())return 0;v="PM"}r+=2}else{if(t.substring(r,r+s.length)!=s)return 0;r+=s.length}}if(r!=t.length)return 0;if(2==h)if(u%4==0&&u%100!=0||u%400==0){if(29<f)return 0}else if(28<f)return 0;return(4==h||6==h||9==h||11==h)&&30<f?0:(p<12&&"PM"==v?p=+p+12:11<p&&"AM"==v&&(p-=12),new Date(u,h-1,f,p,g,m))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}$.setRegional("utilDate",{MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}),Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),a=this.getMonth()+1,n=this.getDate(),i=1900,r=0,o=1,n=replaceTmEval(t.replaceAll("%y",e).replaceAll("%M",a).replaceAll("%d",n)).split("-");return 0<n.length&&(i=n[0]),1<n.length&&(r=n[1]-1),2<n.length&&(o=n[2]),new Date(i,r,o).formatDate("yyyy-MM-dd")}}(),function(c){c.plus={chooseImage:function(e){var a=this;biz.checkPermission&&!biz.checkPermission("camera","摄像头")||c.actionSheet.open({title:"上传图片",buttons:["拍照","从手机相册选择"]},function(t){switch(t.buttonIndex){case 0:break;case 1:e.sourceType="camera",a.captureImage(e);break;case 2:e.sourceType="library",a.captureImage(e)}})},captureImage:function(t){var a=c.extend({sourceType:"camera",maxWidth:800,maxHeight:800,callback:null,destinationType:"url"},t);if(biz.checkPermission){if("camera"==a.sourceType&&!biz.checkPermission("camera","摄像头"))return;if("library"==a.sourceType&&!biz.checkPermission("photos","相册"))return}api.getPicture({sourceType:a.sourceType,encodingType:"jpg",mediaValue:"pic",destinationType:a.destinationType,allowEdit:!1,quality:50,targetWidth:a.maxWidth,targetHeight:a.maxHeight,saveToPhotoAlbum:!1},function(t,e){t?a.callback&&a.callback(t.base64Data||t.data):console.log(JSON.stringify(e))})},compressImage:function(t){return this.getBase64Image(t)},getBase64Image:function(t){var n=c.extend({imgPath:"",maxWidth:800,maxHeight:800,callback:null},t),i=new Image;i.src=n.imgPath,i.onload=function(){var t=document.createElement("canvas"),e=i.width,a=i.height;a<e?e>n.maxWidth&&(a=Math.round(a*=n.maxWidth/e),e=n.maxWidth):a>n.maxHeight&&(e=Math.round(e*=n.maxHeight/a),a=n.maxHeight),t.width=e,t.height=a,t.getContext("2d").drawImage(i,0,0,e,a);t=t.toDataURL("image/jpeg",.8);n.callback&&n.callback(t)}}},c.fn.extend({previewUploadImg:function(t){var o=c.extend({maxW:80,maxH:80,maxCount:4,inputName:"pics[]",callback:null},t);return this.each(function(){var a=c(this),t=a.attr("rel"),n=t?c(t):a.parent().find(".upload-preview"),i=n.get(0),t=a.find("button"),r=n.find("li").size();r>=o.maxCount&&a.hide(),t.click(function(){(r=n.find("li").size())<o.maxCount&&c.plus.chooseImage({maximum:o.maxCount-r,destinationType:"base64",callback:function(e){e&&(c.isArray(e)||(e=[e]),e.forEach(function(t){c.plus.getBase64Image({imgPath:t,maxWidth:o.maxWidth,maxHeight:o.maxHeight,callback:function(t){!function(e,t,a,n,i,r){var o=document.createElement("li");o.classList.add("thumbnail");var s=document.createElement("img");s.src=a,o.appendChild(s),t.appendChild(o);var l=a.replace("data:image/jpeg;base64,",""),l=dwz.parseHTML('<input type="hidden" name="'+n+'" value="'+l+'">');o.appendChild(l),s.onload=function(){var t=s.naturalWidth,e=s.naturalHeight;s.setAttribute("data-width",t),s.setAttribute("data-height",e),s.setAttribute("data-src",a),i&&r&&(e/r<t/i?s.setAttribute("width",i):s.setAttribute("height",r))},c(t).hasClass("dwz-ctl-del")&&c('<a class="img-del"><i class="dwz-icon-delete"></i></a>').prependTo(o).click(function(t){c(o).remove(),e.show(),t.stopPropagation()})}(a,i,t,o.inputName,o.maxW,o.maxH),o.callback&&o.callback(e,n)}})}),r+1>=o.maxCount&&a.hide())}})})})},previewImg:function(){return this.each(function(){var a=c(this);a.click(function(t){t.preventDefault(),t.stopPropagation();var e=a.find("img");c.previewBigImg.open(e,t)})})}}),c.previewBigImg={isOpen:!1,autoLayout:function(){var t=c("#preview-big-img"),e=document.body.offsetWidth,a=(window.screen.availHeight,t.find(".bd li"));a.each(function(){c(this).css({width:e+"px"})}),t.find(".bd ul").css({width:e*a.size()+"px"})},open:function(t,a){var e=this,n=c("#preview-big-img");0==n.size()&&(c("body").append('<div id="preview-big-img" style="display:none"></div>'),(n=c("#preview-big-img")).click(function(t){t.preventDefault(),t.stopPropagation(),e.close(!0)}));var i="",r="",o=0;t.each(function(t){var e=c(this),e=e.attr("data-src")||e.attr("src");i+='<li><div class="pop-inner"><img src="'+e+'"></div></li>',r+='<li class="'+(0==t?"on":"")+'"></li>',a.target==this&&(o=t)}),n.html('<div class="dwz-slide" data-auto-play="false" data-loop="false" data-zoom="true" data-open-index="#currentIndex#">\n\t\t\t\t\t<div class="bd"><ul>#li#</ul></div><div class="hd"><ul>#item#</ul></div>\n\t\t\t\t\t</div>'.replaceAll("#li#",i).replaceAll("#item#",r).replaceAll("#currentIndex#",o)).show().initUI(),window.addEventListener("resize",e.autoLayout,!1),e.autoLayout(),c.history&&c.history.add("previewBigImg"),this.isOpen=!0},close:function(t){var e=c("#preview-big-img");0!=e.size()&&(this._scroll&&(this._scroll.destroy(),this._scroll=null),e.html("").hide(),window.removeEventListener("resize",this.autoLayout,!1),c.history&&t&&c.history.pop(),this.isOpen=!1)}}}(dwz),function(r){var a=function(t){var a=r.extend({maxWidth:800,maxHeight:800,callback:null},t);plus.camera.getCamera().captureImage(function(t){plus.io.resolveLocalFileSystemURL(t,function(e){r.plus.getBase64Image({imgPath:e.toLocalURL(),maxWidth:a.maxWidth,maxHeight:a.maxHeight,callback:function(t){a.callback&&a.callback([t],e)}})},function(t){r.alert.toast("读取拍照文件错误："+e.message)})},function(t){},{filename:"_doc/camera/",index:1})},n=function(t){var i=r.extend({maximum:1,maxWidth:800,maxHeight:800,callback:null},t);plus.gallery.pick(function(e){for(var a=[],t=0;t<e.files.length;t++){var n=e.files[t];plus.io.resolveLocalFileSystemURL(n,function(t){a.push(t.toLocalURL()),e.files.length==a.length&&i.callback&&i.callback(a,t)},function(t){r.alert.toast("读取拍照文件错误："+t.message)})}},function(t){},{filename:"_doc/camera/",filter:"image",multiple:!0,maximum:i.maximum,system:!1,onmaxed:function(){r.alert.error("最多只能选择"+i.maximum+"张图片")}})};r.plus.dcloudInit=function(){r.extend(r.plus,{captureImage:function(t){("camera"==r.extend({sourceType:"camera"},t).sourceType?a:n)(t)},clipImage:function(t,e){t=r.extend({src:"",dst:"",overwrite:!0,width:"800px",height:"800px",quality:50,format:"jpg",clip:null},t);plus.zip.compressImage(t,function(t){t=t.target;plus.io.resolveLocalFileSystemURL(t,function(t){e(t)},function(t){r.alert.toast("压缩图片失败："+t.message)})},function(t){r.alert.toast("压缩图片失败，请稍候再试")})}})}}(dwz),function(n){n.extend({history:{_hash:new Array,_currentHash:"",_isPop:!1,_isHis:!0,init:function(t,e){var a=e||location.hash;a&&(n.history._currentHash=a.skipChar("#").replace("?","|"),n.isFunction(t)&&setTimeout(function(){t(a.skipChar("#").replace("|","?"))},200)),window.onhashchange=n.history._check},_check:function(){var t=location.hash.skipChar("#").replace("?","|");t||n(window).trigger("hash.empty"),!n.history._isHis&&n.history._isPop||!t||t==n.history._currentHash||(n.history._currentHash=t,n.history.load(t)),n.history._isHis=!0},add:function(t,e,a){t=t.replace("?","|").replace(/\?.*$/,""),n.history._isPop=!1,n.history._currentHash=t,n.history._hash.push([t,e,a]),location.hash=t},pop:function(t){t?(n.history._isPop=!0,n.history._isHis=!1):(n.history._isPop=!1,n.history._isHis=!0),0<n.history._hash.length?(n.history._hash.pop(),t&&history.back()):n(window).trigger("hash.empty.pop")},load:function(t){for(var e=0;e<n.history._hash.length;e+=1){var a=n.history._hash[e][1];if(n.history._hash[e][0]==t&&a)return void a(n.history._hash[e][2])}}}})}(dwz),function(y){y.fn.extend({touchwipe:function(t){var b={min_move_x:30,min_move_y:30,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},touch:null,touchstart:null,touchmove:null,touchend:null,longpress:null,direction:"vertical",preventDefaultEvents:!1,stopPropagationEvents:!1,data:null};return t&&y.extend(b,t),this.each(function(){var n=y(this),i=0,r=0,o=0,s=0,l=0,c=0,d=0,u=0,h=null,f=0,p=null,a={dx:0,dy:0};function g(){y.event.remove(n.get(0),"touchmove",m),y.event.remove(n.get(0),"mousemove",m)}function m(t){var e;t.preventDefault(),h&&((e={startX:i,startY:r,endX:l,endY:c,startX2:o,startY2:s,endX2:l,endY2:c,x:("mousemove"==t.type?t:t.touches[0]).pageX,y:("mousemove"==t.type?t:t.touches[0]).pageY,touchType:h}).dx=i-e.x,e.dy=r-e.y,l=e.x,c=e.y,t.touches&&1<t.touches.length&&(e.x2=t.touches[1].pageX,e.y2=t.touches[1].pageY,d=e.x2,u=e.y2),!p&&(Math.abs(e.dx)>b.min_move_x||Math.abs(e.dy)>b.min_move_y)&&(p=Math.abs(e.dx)>Math.abs(e.dy)?"horizontal":"vertical"),Math.abs(e.dx)>a.dx&&(a.dx=e.dx),Math.abs(e.dy)>a.dy&&(a.dy=e.dy),b.touchmove?b.direction!=p&&"all"!=b.direction||b.touchmove.call(this,t,e):Math.abs(e.dx)>=b.min_move_x&&"horizontal"==p?(g(),(0<e.dx?b.wipeLeft:b.wipeRight).call(this,t,e)):Math.abs(e.dy)>=b.min_move_y&&"vertical"==p&&(g(),(0<e.dy?b.wipeUp:b.wipeDown).call(this,t,e)),"mousemove"==t.type&&0===t.buttons&&(g(),v(t))),b.longpress&&f&&(clearTimeout(f),f=0)}function t(t){var e,a=this;if(p=null,b.preventDefaultEvents&&t.preventDefault(),b.stopPropagationEvents&&t.stopPropagation(),t.data=b.data,"mousedown"==t.type)i=l=t.pageX,r=c=t.pageY,h="touch",y.event.add(n.get(0),"mousemove",m);else{if(!t.touches.length)return;i=l=t.touches[0].pageX,r=c=t.touches[0].pageY,h="touch",1<t.touches.length&&(o=d=t.touches[1].pageX,s=u=t.touches[1].pageY,h="zoom"),y.event.add(n.get(0),"touchmove",m)}b.touchstart&&(e={x:i,y:r,x2:o,y2:s,touchType:h},b.touchstart.call(this,t,e)),b.longpress&&(f=setTimeout(function(){b.longpress.call(a,t),f=0},500))}function v(t){var e;t.data=b.data,b.touchend&&(e={startX:i,startY:r,x:l,y:c,dx:i-l,dy:r-c,startX2:o,startY2:s,x2:d,y2:u,touchType:h},b.touchend.call(this,t,e)),"touch"==h&&Math.abs(a.dx)<b.min_move_x&&Math.abs(a.dy)<b.min_move_y&&b.touch&&this!==window&&b.touch.call(this,t,{x:i,y:r}),b.longpress&&f&&(clearTimeout(f),f=0),g(),a={dx:0,dy:0}}b.touch&&n.attr("dwz-event-touchwipe-touch")||(b.touch&&n.attr("dwz-event-touchwipe-touch","touch"),"ontouchstart"in window?(y.event.add(n.get(0),"touchstart",t),y.event.add(n.get(0),"touchend",v)):(y.event.add(n.get(0),"mousedown",t),y.event.add(n.get(0),"mouseup",v)),y.event.add(n.get(0),"mousewheel",function(t){b.stopPropagationEvents&&t.stopPropagation();var e={startX:0,startY:0,x:0,y:t.deltaY,dx:0,dy:-t.deltaY,type:"mousewheel"};b.touchmove&&b.touchmove.call(this,t,e)}))})}})}(dwz),function(l){l.extend({animationendNames:"webkitAnimationEnd animationend webkitTransitionEnd transitionend",_randomColorFactor:function(t){return Math.round(Math.random()*(t||255))},randomColor:function(t,e,a,n){return"rgba("+this._randomColorFactor(e)+", \n\t\t\t\t"+this._randomColorFactor(a)+",\n\t\t\t\t"+this._randomColorFactor(n)+", \n\t\t\t\t"+(t||".3")},colorRgba:function(t){var t=l.extend({color:"#ffffff",opacity:1},t),e=t.color.toLowerCase();if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var a="#",n=1;n<4;n+=1)a+=e.slice(n,n+1).concat(e.slice(n,n+1));e=a}for(var i=[],r=1;r<7;r+=2)i.push(parseInt("0x"+e.slice(r,r+2)));return"rgba("+i.join(",")+","+t.opacity+")"}return/^(rgb\(|RGB\()/.test(e)?"rgba("+e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(",").join(",")+","+t.opacity+")":e},animate:function(t,e,a,n,i){for(var r in e){var o,s;"width"==r||"height"==r?(l.transition(t,{transitionType:"all",duration:a,effectType:n}),t.style[r]=e[r]+"px"):"opacity"==r?t.style[r]=e[r]:(o=e.x||0,s=e.y||0,l(t).translate({x:o+"px",y:s+"px",scale:e.scale||-1,duration:a,effectType:n}))}i&&setTimeout(function(){i.call(t)},(a||1)+10)},transition:function(t,e){e=l.extend({transitionType:"all",duration:0,effectType:"ease"},e),t=l(t);e.duration?(e=e.transitionType+" "+e.duration/1e3+"s "+(e.effectType||"ease"),t.css({"-webkit-transition":"-webkit-"+e,transition:e})):t.css({"-webkit-transition":"",transition:""})}}),l.fn.extend({animationend:function(n){return this.each(function(e,t){var a=l(e);a.off(l.animationendNames).on(l.animationendNames,function(t){a.off(l.animationendNames),n.call(e,t)})})},animate:function(t,e,a,n){return l.animate(this.get(0),t,e,a,n),this},fadeOut:function(t,e){return this.effect([{className:"fadeOut animated",duration:t,after:function(){this.hide()}}],e)},fadeIn:function(t,e){return this.effect([{className:"fadeIn animated",duration:t,before:function(){this.show()},after:function(){this.show()}}],e)},translate:function(t){t=l.extend({x:"0px",y:"0px",z:"0px",scale:-1,duration:0,effectType:"ease"},t);return t.transform="translate3d("+t.x+", "+t.y+", "+t.z+")",0<t.scale&&(t.transform+=" scale("+t.scale+")"),this.translateCss(t)},translateCss:function(t){var e=l.extend({transform:"",duration:0,effectType:"ease"},t);return this.each(function(){l.transition(this,{transitionType:"transform",duration:e.duration,effectType:e.effectType}),l(this).css({"-webkit-transform":e.transform,transform:e.transform})})},translateY:function(t,e,a){return this.translate({y:t,duration:e,effectType:a})},translateX:function(t,e,a){return this.translate({x:t,duration:e,effectType:a})},rotate:function(t){var e=l.extend({deg:"0deg",duration:0,effectType:"ease"},t);return this.each(function(){var t="rotate("+e.deg+")";l.transition(this,{transitionType:"transform",duration:e.duration,effectType:e.effectType}),l(this).css({"-webkit-transform":t,transform:t})})},getComputedPos:function(){var t=window.getComputedStyle(this.get(0),null),e=0,a=0,n=1,i=t["-webkit-transform"]||t.transform;return i&&"none"!=i&&(e=+((t=i.replace("matrix(","").split(")")[0].split(", "))[12]||t[4]),a=+(t[13]||t[5]),n=+t[3]),{x:e,y:a,scale:n}},flipCard:function(t){var e=l.extend({},t);return this.each(function(){var t=l(this);t.removeClass("animation-rotate-up").removeClass("animation-rotate-up-back"),t.addClass("animation-rotate-up"),setTimeout(function(){t.addClass("animation-rotate-up-back"),e.callback&&e.callback(t)},500)})},effectBubble:function(t,n){var i=l.extend({content:"+1",y:-100,duration:500,effectType:"ease",className:"",flyIn:!1},t);return this.each(function(){var t=l(this),e=t.offset(),t=t.width(),t='<span id="'+("effect-fly-"+(new Date).getTime())+'" class="effect-bubble-fly '+i.className+'" style="top:'+(e.top+(i.flyIn?i.y:0))+"px;left:"+(e.left+t/2)+"px; "+(i.fontSize?"font-size:"+i.fontSize:"")+'">'+i.content+"</span>",a=l(t).appendTo(l("body"));setTimeout(function(){a.css({top:e.top+(i.flyIn?0:i.y)+"px"})},10),setTimeout(function(){a.fadeOut(500,function(){a.remove(),n&&n()})},i.duration||500)})},effect:function(i,r){return this.each(function(){var n=l(this);!function e(t){var a;i&&0<i.length&&(a=l.extend({className:"",style:"",duration:500,before:null,after:null},i.shift()),t&&((t=n.data("orig_style")||n.attr("style"))&&n.data("orig_style",t),n.off(l.animationendNames),n.removeClass(l.animateCls.all+" animated")),n.on(l.animationendNames,function(){var t;n.off(l.animationendNames),0==i.length&&((t=n.data("orig_style"))&&n.attr("style",t),r&&r.call(n,a)),a.className&&n.removeClass(a.className+" animated"),a.after&&a.after.call(n,a),e()}),setTimeout(function(){var t;a.before&&a.before.call(n,a),a.style&&((t=n.data("orig_style")||"")&&!t.endsWith(";")&&(t+=";"),n.attr("style",t+a.style)),a.className&&(a.duration&&l.transition(n,{duration:a.duration}),n.addClass(a.className).addClass("animated"))},50))}(!0)})}}),l.animateCls={std_names:"bounce flash pulse rubberBand shake swing tada wobble jello flip hinge jackInTheBox",in_names:"bounceIn bounceInDown bounceInLeft bounceInRight bounceInUp fadeIn fadeInDown fadeInDownBig fadeInLeft fadeInLeftBig fadeInRight fadeInRightBig fadeInUp fadeInUpBig flipInX flipInY lightSpeedIn rollIn rotateIn rotateInDownLeft rotateInDownRight rotateInUpLeft rotateInUpRight slideInUp slideInDown slideInLeft slideInRight zoomIn zoomInDown zoomInLeft zoomInRight zoomInUp",out_names:"bounceOut bounceOutDown bounceOutLeft bounceOutRight bounceOutUp fadeOut fadeOutDown fadeOutDownBig fadeOutLeft fadeOutLeftBig fadeOutRight fadeOutRightBig fadeOutUp fadeOutUpBig flipOutX flipOutY lightSpeedOut rollOut rotateOut rotateOutDownLeft rotateOutDownRight rotateOutUpLeft rotateOutUpRight slideOutUp slideOutDown slideOutLeft slideOutRight zoomOut zoomOutDown zoomOutLeft zoomOutRight zoomOutUp"},l.animateCls.all_names=l.animateCls.std_names+" "+l.animateCls.in_names+" "+l.animateCls.out_names,l.fn.animateCls=function(t,e){var a={className:t};return l.inArray(t,l.animateCls.in_names.split(" "))?(a.before=function(){this.show()},a.after=function(){this.show()}):l.inArray(t,l.animateCls.out_names.split(" "))&&(a.before=function(){this.show()},a.after=function(){this.hide()}),this.effect([a],e)}}(dwz),function(l){l.extend({ajaxError:function(t,e,a){401!=t.status?l.alert?l.alert.error("<div>Http status: "+t.status+" "+t.statusText+"</div>\n\t\t\t\t\t<div>ajaxOptions: "+e+"</div>\n\t\t\t\t\t<div>thrownError: "+a+"</div>\n\t\t\t\t\t<div>"+t.responseText+"</div>"):alert("Http status: "+t.status+" "+t.statusText+" \najaxOptions: "+e+"\nthrownError: "+a+"\n"+t.responseText):l.gotoLogin()},ajaxDone:function(t){t[dwz.config.keys.statusCode]==dwz.config.statusCode.error?t[dwz.config.keys.message]&&l.alert.error(t[dwz.config.keys.message]):t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok&&(t[dwz.config.keys.message]&&l.alert.success(t[dwz.config.keys.message]),"redirect"==t.callbackType&&t.forwardUrl&&setTimeout(function(){window.location=t.forwardUrl},1500))},isAjaxStatus:function(t,e){return t[dwz.config.keys.statusCode]==e},isAjaxStatusOk:function(t){return!!l.checkAjaxLogin(t)&&l.isAjaxStatus(t,l.config.statusCode.ok)},isAjaxStatusError:function(t){return l.isAjaxStatus(t,l.config.statusCode.error)},isAjaxStatusTimeout:function(t){return l.isAjaxStatus(t,l.config.statusCode.timeout)},gotoLogin:function(){var t="tpl/user/login.html?dwz_callback=loginRender";biz.checkLiveTime&&!biz.checkLiveTime()&&(t="tpl/user/login.html?dwz_callback=loginRender&login_no_face=1"),l.dialog.open({url:t,pop:"fullscreen"})},checkAjaxLogin:function(t){return!l.isAjaxStatusTimeout(t)||(l.alert.toast(t[dwz.config.keys.message]),l.gotoLogin(),!1)},validateCallback:function(t,e,a){var n=l(t);if(!n.valid())return!1;var i,r=n.serializeArray();if(a)if(l.isFunction(a)){if(a=a.call(t,n),l.isArray(a))r.forEach(function(t,e){t.name.startsWith("__")||a.push(t)}),r=a;else if(!1===a)return!1}else r.push({name:"_data",value:JSON.stringify(a)});return"application/json"==n.attr("enctype")?(i={},r.forEach(function(t){i[t.name]=t.value}),l.ajax({global:!0,type:t.method||"POST",url:n.attr("action"),data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=UTF-8",cache:!1,success:e||dwz.ajaxDone,error:dwz.ajaxError})):l.ajax({global:!0,type:t.method||"POST",url:n.attr("action"),data:r,dataType:"json",cache:!1,success:e||dwz.ajaxDone,error:dwz.ajaxError}),!1},iframeCallback:function(t,e){var a=l(t),n=l("#callbackframe");if(!a.valid())return!1;0==n.size()&&(l("body").append('<iframe id="callbackframe" name="callbackframe" src="about:blank" style="display:none"></iframe>'),n=l("#callbackframe")),t.target="callbackframe",l.iframeResponse(n,e||dwz.ajaxDone)},iframeResponse:function(n,i){var r=n.get(0),o=l(document);o.trigger("ajaxStart");function s(t){if(n.off("load",s),o.trigger("ajaxStop"),"javascript:'%3Chtml%3E%3C/html%3E';"!=r.src&&"javascript:'<html></html>';"!=r.src){var e=r.contentDocument||r.document;if(!(e.readyState&&"complete"!=e.readyState||e.body&&"false"==e.body.innerHTML)){var a=void 0;if(e.XMLDocument)a=e.XMLDocument;else if(e.body)try{a=r.contentDocument.body.innerText,a=l.parseJSON(a)}catch(t){a=e.body.innerText}else a=e;i(a)}}}n.on("load",s)}})}(dwz),function(d){d.fn.extend({valid:function(s){var l=!0;return this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)}).each(function(){var t=d(this),e=t.val(),a=this.required||t.hasClass("required"),n=t.attr("pattern")||t.attr("data-pattern"),i=t.attr("data-error")||t.attr("placeholder"),r=t.attr("min"),o=t.attr("max");if(t.hasClass("ignore")||(dwz.config.rcheckableType.test(this.type)?!this.checked&&a&&(l=!1):!e&&a||e&&n&&!new RegExp(n).test(e)?l=!1:e&&r?(l=parseFloat(r)<=parseFloat(e))||(i=t.attr("data-error-min")||i):e&&o?(l=parseFloat(o)>=parseFloat(e))||(i=t.attr("data-error-max")||i):t.hasClass("valid-change")&&this.onchange&&(this.onchange(),l=!1!==t.data("valid-change"))),!s&&!l&&i&&d.alert)return d.alert.error(i),!1}),this.find("ul.upload-preview.required").each(function(t,e){e=d(e);if(!e.hasClass("ignore")&&0==e.find(".thumbnail").size()){e=e.attr("data-error");return e&&d.alert.error(e),!1}}),l},ajaxTodo:function(t){var e=t.className,l=void 0===e?"active":e,e=t.disabledInvert$,n=void 0===e?"disabled-invert":e,t=t.relCount$,c=void 0===t?"data-rel-count":t;return this.each(function(){function i(t){var e;0<a.size()&&(0<=(e=parseInt(a.text()))+t&&a.text(e+t))}var r=this,o=d(this).hrefFix(),a=d(o.attr(c)),s=o.hasClass(n);o.click(function(t){var e=o.attr("data-href"),a=parseInt(o.attr("data-count")||1),n=o.hasClass(l);e&&"javascript:"!=e?d.ajax({type:r.attr("data-method")||"POST",url:e,data:{active:n?0:1},dataType:"json",success:function(t){d.ajaxDone(t),d.isAjaxStatusOk(t)&&(n&&!s?(o.removeClass(l),i(-a)):(o.addClass(l),i(+a)))},error:dwz.ajaxError}):n&&!s?(o.removeClass(l),i(-a)):(o.addClass(l),i(+a)),t.preventDefault(),t.stopPropagation()})})},bringBack:function(n){return this.each(function(){d(this).find(":input").each(function(){var t,e=d(this),a=e.attr("name");for(t in n)if(t==a){e.val(n[t]);break}})})}})}(dwz),function(d){d.setRegional("alert",{title:{info:"提示",error:"错误",success:"成功",confirm:"确认提示"},btnTxt:{ok:"确定",cancel:"取消"}}),d.alert={config:{box$:"#alertMsgBox",promptFrag:'<div id="alertPromptBox"><div class="alert-mask"></div><div class="alert-dialog"></div></div>',boxFrag:'<div id="alertMsgBox">\t\t\t\t\t<div class="alert-mask"></div>\t\t\t\t\t<div class="alert-dialog">\t\t\t\t\t\t<div class="alert-dialog-hd"><strong class="alert-dialog-title">#title#</strong></div>\t\t\t\t\t\t<div class="alert-dialog-bd">#message#</div>\t\t\t\t\t\t<div class="alert-dialog-ft"><div class="button-group">#butFragment#</div></div>\t\t\t\t\t</div>\t\t\t\t</div>',btnFrag:'<button class="dwz-ctl-hover button #class#">#butMsg#</button>'},open:function(t,a){var e=t.title,n=void 0===e?d.regional.alert.title.info:e,e=t.msg,e=void 0===e?"":e,i=t.theme,t=t.buttons,r=void 0===t?[d.regional.alert.btnTxt.ok]:t;d(this.config.box$).remove();var o="";if(r){void 0===i&&(i="is-text");for(var s=0;s<r.length;s++)o+=this.config.btnFrag.replace("#butMsg#",r[s]).replace("#class#",0==s?"primary "+i:i)}e=this.config.boxFrag.replace("#title#",n).replace("#message#",e).replace("#butFragment#",o);d("body").append(e).initUI();for(var l=d(this.config.box$).find(".button"),c=0;c<r.length;c++)l.eq(c).click(c,function(t){var e=t.data+1;a&&a({buttonIndex:e}),t.preventDefault(),t.stopPropagation(),setTimeout(function(){d.alert.close()},100)})},close:function(t){d("prompt"==(0<arguments.length&&void 0!==t?t:"alert")?"#alertPromptBox":this.config.box$).remove()},error:function(t,e){this.open({title:d.regional.alert.title.error,msg:t},e)},success:function(t,e){this.open({title:d.regional.alert.title.success,msg:t},e)},confirm:function(t,e){var a=t.title,n=void 0===a?d.regional.alert.title.confirm:a,i=t.msg,a=void 0===i?"":i,i=t.theme,t=t.buttons,t=void 0===t?[d.regional.alert.btnTxt.ok,d.regional.alert.btnTxt.cancel]:t;this.open({title:n,msg:a,theme:i,buttons:t},e)},prompt:function(n,t){d(this.config.box$).remove();var i,r=d(d.alert.config.promptFrag).appendTo(d("body")).find(".alert-dialog");n&&(i=d.extend(n.getParams(),t),d.ajax({type:"GET",url:n,data:t,success:function(t){r.triggerPageClear();var e=dwz.getUrlCallback(n),a=d.templateWrap(t);e?e.call(r,a,i):(r.html(t).initUI(),d.execHelperFn(r,a,i))},error:dwz.ajaxError}))},toast:function(t,e){var a,n,i=this;t&&(e=d.extend({msg:t,duration:4e3},e),a=function(){i._timer&&(clearTimeout(i._timer),i._timer=null)},d("#alert-toast").remove(),a(),(n=d('<div id="alert-toast">'+e.msg+"</div>").appendTo(d("body"))).animateCls("fadeInUp"),this._timer=setTimeout(function(){a(),n.animateCls("fadeOutDown",function(){n.remove()})},e.duration))}}}(dwz),function(l){l.setRegional("actionSheet",{cancelTxt:"取消"}),l.actionSheet={config:{box$:"#action-sheet"},open:function(t,a){var e=t.title,n=t.buttons,i=void 0===n?[]:n,t=t.cancelTxt,t=void 0===t?l.regional.actionSheet.cancelTxt:t,t='<div id="action-sheet" onclick="return $.actionSheet.close(event)">\n\t\t\t\t<div class="action-sheet-pane hide-down">\n\t\t\t\t\t<div class="action-sheet-ul">\n\t\t\t\t\t\t'+(e?'<a class="action-sheet-title">'+e+"</a>":"")+"\n\t\t\t\t\t\t"+i.map(function(t){var e=t.txt||t;return'<a class="action-sheet-item" style="'+(t.style||"")+'">'+e+"</a>"}).join("")+'\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<a class="action-sheet-cancel" onclick="return $.actionSheet.close(event)">'+t+"</a>\n\t\t\t\t</div>\n\t\t\t</div>";l(this.config.box$).remove();var r=l(t).appendTo(l("body"));setTimeout(function(){r.find(".action-sheet-pane").removeClass("hide-down")},50);var o=r.find("a.action-sheet-item");l.fn.hoverClass&&o.hoverClass();for(var s=0;s<i.length;s++)o.eq(s).click(s,function(t){var e=t.data+1;a&&a({buttonIndex:e}),l.actionSheet.close(t)})},close:function(t){t&&(t.preventDefault(),t.stopPropagation());var e=l(this.config.box$);0<e.size()&&(e.find(".action-sheet-pane").addClass("hide-down"),setTimeout(function(){e.remove()},300))}}}(dwz),function(i){i.inputTip={config:{openClass:"open",frag:'<ul id="input-tip" class="unitBox"></ul>'},$box:null,_init:function(){this.$box||(this.$box=i(i.inputTip.config.frag).appendTo(i("body").get(0)))},open:function(t,a){this._init();var e=template.render('{{each list as item}}<li class="item">{{item.text}}</li>{{/each}}',{list:a});this.$box.addClass(i.inputTip.config.openClass).html(e);e=this.$box.height()+5,e=t.top>e+30?t.top-e:t.top+t.height+5;this.$box.css({left:t.left+t.paddingLeft+"px",top:e+"px"}),this.$box.find("li.item").each(function(t,e){i(e).click(function(){a[t].fn&&a[t].fn.call(e)})}),i("body").off("click touchstart",this._close).on("click touchstart",this._close)},_close:function(){i.inputTip.$box.html("").removeClass(i.inputTip.config.openClass)}},i.fn.clipboardTip=function(t){var n=i.extend({text:"粘贴"},t);return this.each(function(){i(this).touchwipe({longpress:function(){var t,a=i(this);!window.api||"android"!=api.systemType||(t=api.require("clipBoard"))&&t.get(function(t,e){t&&t.value&&i.inputTip.open(a.selectionPos(),[{text:n.text,fn:function(){a.val(t.value).get(0).select()}}])})}})})}}(dwz),function(x){x.setRegional("calendar",{dayNames:["日","一","二","三","四","五","六"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],yearName:"年",btnTxt:{ok:"确定",cancel:"取消",clean:"清除"}}),x.fn.calendar=function(t){var l=x.extend({miscBtn:null,miscBtnFn:null,changeDayFn:null,refreshDayFn:null,viewType:"month",frag:'<div class="calendar">\n\t\t\t\t\t<div class="dt">\n\t\t\t\t\t\t<div class="pr dwz-ctl-hover"><a href="javascript:"><i class="dwz-icon-d-arrow-left"></i></a></div>\n\t\t\t\t\t\t<div class="ym dwz-ctl-hover"><a href="javascript:"><span>Year Month</span><i class="dwz-icon-arrow-down"></i></a></div>\n\t\t\t\t\t\t<div class="ne dwz-ctl-hover"><a href="javascript:"><i class="dwz-icon-d-arrow-right"></i></a></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bd">\n\t\t\t\t\t\t<div class="slide-wrap"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="df">\n\t\t\t\t\t\t<button class="button is-mini cleanBtn dwz-ctl-hover">'+x.regional.calendar.btnTxt.clean+'</button>\n\t\t\t\t\t\t<div class="flex-1"></div>\n\t\t\t\t\t\t<button class="button is-mini cancelBtn dwz-ctl-hover">'+x.regional.calendar.btnTxt.cancel+'</button>\n\t\t\t\t\t\t<button class="button is-mini primary okBtn dwz-ctl-hover">'+x.regional.calendar.btnTxt.ok+'</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ympop">\n\t\t\t\t\t\t<div class="ym">\n\t\t\t\t\t\t\t<div class="yy">\n\t\t\t\t\t\t\t\t<div class="yt">\n\t\t\t\t\t\t\t\t\t<div class="pr dwz-ctl-hover"><a href="javascript:;"><i class="dwz-icon-d-arrow-left"></i></a></div>\n\t\t\t\t\t\t\t\t\t<div class="ne dwz-ctl-hover"><a href="javascript:;"><i class="dwz-icon-d-arrow-right"></i></a></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul class="clearfix"></ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="mm">\n\t\t\t\t\t\t\t\t<ul class="clearfix"></ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="ympop-ft">\n\t\t\t\t\t\t\t<button class="button primary ympopOkBtn dwz-ctl-hover">'+x.regional.calendar.btnTxt.ok+'</button>\n\t\t\t\t\t\t\t<button class="button ympopCalcelBtn dwz-ctl-hover">'+x.regional.calendar.btnTxt.cancel+"</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>"},t),v={ymdt$:".dt",ympop$:".ympop",ympopOkBtn$:".ympopOkBtn",ympopCalcelBtn$:".ympopCalcelBtn",bd$:".bd",df$:".df",main$:".bd .slide-wrap"};function s(t){var a,y=t.$this,f=t.$frag,i=t.dp,t=t.isInput,t=f.find(v.bd$),p=f.find(v.main$),r=f.find(v.ymdt$),o=t.width();function g(t,e){var a=x.regional.calendar.monthNames,n=f.find(v.ympop$);m(i),r.find(".ym span").text(t+x.regional.calendar.yearName+a[e-1]),l.changeYearMonthFn&&l.changeYearMonthFn.call(n,{year:t,month:e})}function e(a,t){for(var e=a.getDateWrap(),n=f.find(v.ymdt$),i=f.find(v.ympop$),r=i.find(".yy ul.clearfix"),o=i.find(".mm ul.clearfix"),s=a.getMinDate().getFullYear(),l=a.getMaxDate().getFullYear(),c="",d="",u=e.year-4;u<e.year+6;u++){var h=e.year==u?"selected ":"";(u<s||l<u)&&(h+="disabled"),c+='<li value="'+u+'" class="'+h+'"><a href="javascript:">'+u+"</a></li>"}r.html(c),x.each(x.regional.calendar.monthNames,function(t){t+=1;d+='<li value="'+t+'" '+(e.month==t?' class="selected"':"")+'><a href="javascript:">'+this+"</a></li>"}),o.html(d),r.find("li").click(function(){var t=x(this);t.hasClass("disabled")||(t.parent().find("li.selected").removeClass("selected"),t.addClass("selected"))}),o.find("li").click(function(){var t=x(this);t.parent().find("li.selected").removeClass("selected"),t.addClass("selected")}),i.attr("event-ympop")||(i.attr("event-ympop",1),f.find(v.ympopOkBtn$).click(function(){var t=r.find("li.selected"),e=o.find("li.selected");if(t.hasClass("disabled")||e.hasClass("disabled"))return!1;n.find(".ym span").text(t.find("a").text()+x.regional.calendar.yearName+e.find("a").text());t=parseInt(t.attr("value")),e=parseInt(e.attr("value"));a.changeDate(t,e),m(a),i.removeClass("open"),a.hasDay()||p.find("td.selected").trigger("click")}),f.find(v.ympopCalcelBtn$).click(function(){i.removeClass("open")}),n.find(".pr a").click(function(){a.lastMonthFn(g)}),n.find(".ne a").click(function(){a.nextMonthFn(g)}),i.find(".yy .pr a").click(function(){r.find(":scope>li").each(function(t){var e=x(this),a=parseInt(e.attr("value"))-10;a<s||l<a?e.addClass("disabled"):e.removeClass("disabled"),0==t?e.addClass("selected"):e.removeClass("selected"),e.attr("value",a).find(":scope>a").text(a)})}),i.find(".yy .ne a").click(function(){r.find(":scope>li").each(function(t){var e=x(this),a=parseInt(e.attr("value"))+10;l<a?e.addClass("disabled"):e.removeClass("disabled"),0==t?e.addClass("selected"):e.removeClass("selected"),e.attr("value",a).find(":scope>a").text(a)})})),n.find(".ym span").text(r.find("li.selected").text()+x.regional.calendar.yearName+o.find("li.selected").text()),t&&i.addClass("open")}function s(t,e){return("week"==l.viewType?function(t,e){"last"==(e=x.extend({type:"current"},e)).type?(t=t.clone()).dayWeek({type:"last"}):"next"==e.type&&(t=t.clone()).dayWeek({type:"next"});for(var a=t.getDateWrap(),n=t.getMinDate(),i=t.getMaxDate(),r=new Array,o=y.attr("data-value"),s=0;s<=6;s++){var l=t.clone(),c=l.dayWeek({dayInWeek:s}),d=c.date,u=n<=d&&d<=i?"":"disabled";o==l.formatDate(d)&&(u+=(u?" ":"")+"selected"),r.push('<td align="center" class="'+u+'" data-day="'+c.day+'" data-value="'+t.formatDate(t.changeDay(c.day,c.month-a.month))+'"><a href="javascript:">'+c.day+"</a></td>")}var h="",f="";return x.each(x.regional.calendar.dayNames,function(t){h+="<th><span>"+this+"</span></th>"}),h="<tr>"+h+"</tr>",x.each(r,function(t){t%7==0&&(f+="<tr>"),f+=this,t%7==6&&(f+="</tr>")}),'<table class="di '+e.type+'">'+(h+f)+"</table>"}:function(t,e){var a=x.extend({type:"current"},e);"last"==a.type?(t=t.clone()).lastMonthFn():"next"==a.type&&(t=t.clone()).nextMonthFn();var n=t.getDateWrap(),i=t.getMinDate(),r=t.getMaxDate(),o=(e=new Date(n.year,n.month-1,1)).getDay(),s=new Array;if(0<o){e.setMonth(e.getMonth()-1);for(var l=t.getDateWrap(e),c=l.days-o+1;c<=l.days;c++){var d=new Date(n.year,n.month-2,c),d=i<=d&&d<=r?"":"disabled";s.push('<td class="inactive '+d+'" align="center" data-day="'+c+'" data-value="'+t.formatDate(t.changeDay(c,-1))+'"><a href="javascript:">'+c+"</a></td>")}}for(var u=y.attr("data-value"),h=1;h<=n.days;h++){var f=new Date(n.year,n.month-1,h),p=i<=f&&f<=r?"":"disabled";u==t.formatDate(f)&&(p+=(p?" ":"")+"selected"),s.push('<td align="center" class="'+p+'" data-day="'+h+'" data-value="'+t.formatDate(t.changeDay(h))+'"><a href="javascript:">'+h+"</a></td>")}for(var g=1;g<=42-o-n.days;g++){var m=new Date(n.year,n.month,g),m=i<=m&&m<=r?"":"disabled";s.push('<td class="inactive '+m+'" align="center" data-day="'+g+'" data-value="'+t.formatDate(t.changeDay(g,1))+'"><a href="javascript:">'+g+"</a></td>")}var v="",b="";return x.each(x.regional.calendar.dayNames,function(t){v+="<th><span>"+this+"</span></th>"}),v="<tr>"+v+"</tr>",x.each(s,function(t){t%7==0&&(b+="<tr>"),b+=this,t%7==6&&(b+="</tr>")}),'<table class="di '+a.type+'">'+(v+b)+"</table>"})(t,e)}function m(n){var t=s(n,{type:"current"}),i=p.html(t).find("td");(i=i.filter(function(){return!x(this).hasClass("disabled")}).click(function(t){var e=x(this),a=e.attr("data-value");n.sDate=a,i.removeClass("selected"),e.addClass("selected"),l.changeDayFn&&l.changeDayFn(e,a)})).each(function(){var t=x(this);t.attr("data-value")==n.sDate&&t.trigger("click")}),l.refreshDayFn&&l.refreshDayFn(i,n.getDateWrap());t=s(n,{type:"last"});p.prepend(t);t=s(n,{type:"next"});p.append(t),p.translateX(-o+"px")}f.find(".dwz-ctl-hover").hoverClass("hover"),"week"==l.viewType&&y.find(".dt .pr, .dt .ne").hide(),p.touchwipe({direction:"horizontal",touchstart:function(){},touchmove:function(t,e){p.translateX(-o-e.dx+"px")},touchend:function(t,e){e.dx<-40?p.animate({x:0},300,"ease",function(){"week"==l.viewType?i.dayWeek({type:"last",callback:g}):i.lastMonthFn(g)}):40<e.dx?p.animate({x:-2*o},300,"ease",function(){"week"==l.viewType?i.dayWeek({type:"next",callback:g}):i.nextMonthFn(g)}):p.animate({x:-o},300,"ease")}}),m(i),e(i),"month"==l.viewType&&r.find(".ym").click(function(){e(i,!0)}),l.miscBtn&&(a=x(l.miscBtn).appendTo(r).addClass("miscBtn")).click(function(){var t,e;l.miscBtnFn&&(t="",(e=f.find("table.current td.selected")).size()&&(t=e.attr("data-value")),l.miscBtnFn.call(a,t))})}return this.each(function(){var i=x(this),r=i.is("input"),t={$box:i};i.attr("dateFmt")&&(t.pattern=i.attr("dateFmt")),i.attr("minDate")&&(t.minDate=i.attr("minDate")),i.attr("maxDate")&&(t.maxDate=i.attr("maxDate"));var o=new e(i.val()||i.attr("data-value"),t);r?i.click(function(t){var e=x(l.frag).addClass("view-"+l.viewType),a=x("#dwz-calendar");0==a.size()&&(a=x('<div id="dwz-calendar"></div>').appendTo(x("body"))).click(function(t){x("#dwz-calendar").remove()}),e.appendTo(a).click(function(t){t.stopPropagation(),t.preventDefault()});var n=e.find(v.df$);n.find(".cleanBtn").click(function(t){i.val("").trigger("change",""),a.remove()}),n.find(".cancelBtn").click(function(t){a.remove()}),n.find(".okBtn").click(function(t){var e=a.find("table.current td.selected");e.size()&&(e=e.attr("data-value"),i.val(e).trigger("change",e)),a.remove()}),s({$this:i,$frag:e,dp:o,isInput:r})}):((t=x(l.frag).addClass("view-"+l.viewType)).appendTo(i),s({$this:i,$frag:t,dp:o,isInput:r}))})};var e=function(t,e){this.opts=x.extend({pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",$box:null},e);e=new Date;this.opts.minDate=e.formatDateTm(this.opts.minDate),this.opts.maxDate=e.formatDateTm(this.opts.maxDate),t?this.sDate=t.trim():(this.sDate=(new Date).formatDate(this.opts.pattern),this.opts.$box.attr("data-value",this.sDate))};x.extend(e.prototype,{clone:function(){return new e(this.sDate,this.opts)},get:function(t){return this.opts[t]},_getDays:function(t,e){return 2==e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},_minMaxDate:function(t){var e=t.split("-").length-1,a="y-M-d";return 1==e?a="y-M":0==e&&(a="y"),t.parseDate(a)},getMinDate:function(){return this._minMaxDate(this.opts.minDate)},getMaxDate:function(){var t=this.opts.maxDate,e=t.split("-").length-1,a=this._minMaxDate(t);return e<2&&(t=this._getDays(a.getFullYear(),a.getMonth()+1),a.setDate(t),0==e&&a.setMonth(11)),a},getDateWrap:function(t){var e=(t=t||(this.parseDate(this.sDate)||new Date)).getFullYear(),a=t.getMonth()+1,n=this._getDays(e,a);return{year:e,month:a,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:n,date:t}},changeDate:function(t,e,a){a=new Date(t,e-1,a||1);return this.sDate=this.formatDate(a),a},changeDay:function(t,e){e=e||0;var a=this.getDateWrap();return new Date(a.year,a.month+parseInt(e)-1,t)},lastMonthFn:function(t){var e,a,n=this.getDateWrap(),i=this.getMinDate().getFullYear();(1<n.month||n.year>i)&&(e=n.year,a=n.month-1,1==n.month&&(e--,a=12),i=this._getDays(e,a),this.changeDate(e,a,n.day>i?i:n.day),t&&t(e,a))},nextMonthFn:function(t){var e,a,n=this.getDateWrap(),i=this.getMaxDate().getFullYear();(n.month<12||n.year<i)&&(e=n.year,a=n.month+1,12==n.month&&(e++,a=1),i=this._getDays(e,a),this.changeDate(e,a,n.day>i?i:n.day),t&&t(e,a))},dayWeek:function(t){var e=x.extend({dayInWeek:0,type:"current"},t),a=this.getDateWrap(),t=a.date.getDay(),t=e.dayInWeek-t;"last"==e.type?t=-7:"next"==e.type&&(t=7);a=a.date.getTime()+864e5*t,t=new Date(a),a=this.getDateWrap(t);return this.sDate=this.formatDate(t),e.callback&&e.callback(a.year,a.month),a},parseDate:function(t){return(t||this.sDate).parseDate(this.opts.pattern)},formatDate:function(t){return t.formatDate(this.opts.pattern)},hasDay:function(){return-1!=this.opts.pattern.indexOf("d")},hasHour:function(){return-1!=this.opts.pattern.indexOf("H")},hasMinute:function(){return-1!=this.opts.pattern.indexOf("m")},hasSecond:function(){return-1!=this.opts.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=["y","M","d","E"],e=0;e<t.length;e++)if(-1!=this.opts.pattern.indexOf(t[e]))return!0;return!1}}),x.Datepicker=e}(dwz),function(m){m.fn.extend({scrollTo:function(a){return this.each(function(){var t,e=m(this).children().eq(0);"end"==a.y?0<(t=e.height()-m(this).height())&&(a.y=-t+"px",e.translate(a)):e.translate(a)})},scroll:function(t){var g=m.extend({scrollX:!1,scrollY:!0,delayTime:700,touchstart:null,touchmove:null,touchend:null,scroll$:".scroll",topBtn$:".top-btn"},t);return this.each(function(){var o=m(this),s=o.find(g.scroll$),r=o.find(g.topBtn$),l=0;function c(){var t=s.get(0).clientWidth-o.get(0).clientWidth;return 0<t?t:0}function d(){var t=s.get(0).clientHeight-o.get(0).clientHeight;return 0<t?t:0}r.click(function(t){t.stopPropagation(),l=(new Date).getTime(),o.scrollTo({y:0,duration:800}),r.addClass("hide")});var u=0,h=void 0,f=void 0,p={x:0,y:0},t="vertical";g.scrollX&&(t=g.scrollY?"all":"horizontal"),o.touchwipe({direction:t,stopPropagationEvents:!1,touchstart:function(t,e){p=s.getComputedPos(),g.scrollY&&s.translateY(p.y+"px",0),g.scrollX&&s.translateX(p.x+"px",0),g.touchstart&&g.touchstart.call(s,t,e)},touchmove:function(t,e){var a,n,i=(new Date).getTime();300<i-u&&Math.abs(e.dx)<10&&Math.abs(e.dy)<10||(f&&10<i-f.timestamp&&(h={x:f.x,y:f.y,timestamp:f.timestamp}),f={x:e.x,y:e.y,timestamp:i},g.scrollY&&(a=d(),0<(n=-Math.round(e.dy-p.y))?n/=1+n/200:n<-a&&(n=(i=n+a)/(1+Math.abs(i)/200)-a),s.translateY(n+"px",0),0<r.size()&&(n<-100?r.removeClass("hide"):r.addClass("hide")),e.scrollH=a,e.scrollY=n),g.scrollX&&(a=c(),0<(n=-Math.round(e.dx-p.x))?n/=3:n<-a&&(n=(n+a)/3-a),s.translateX(n+"px",0,"linear"),e.scrollW=a,e.scrollX=n),g.touchmove&&g.touchmove.call(s,t,e))},touchend:function(t,e){var a,n,i,r;(u=(new Date).getTime())-l<300||((a=m.speed.cal(f,h)).x||a.y)&&(g.touchend&&g.touchend.call(s,t,e),g.scrollY&&20<Math.abs(e.dy)&&(n=o.data("dwz-load-more"),e.scrollH=d(),e.dy-p.y<0?s.animate({y:0},g.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):e.dy-p.y>e.scrollH&&1!=n?s.animate({y:-e.scrollH},g.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):(i=a.y,50<Math.abs(i)&&((t=i+s.getComputedPos().y)<-e.scrollH?(r=1==n?80:0,t=-e.scrollH-r):0<t&&(t=0),r=Math.abs(i/400)+.2,r=Math.min(r,1),s.animate({y:t},g.delayTime*r,"cubic-bezier(0.25, 0.3, 0.1, 0.9)")))),g.scrollX&&20<Math.abs(e.dx)&&(e.scrollW=c(),e.dx-p.x<0?s.animate({x:0},g.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):e.dx-p.x>e.scrollW?s.animate({x:-e.scrollW},g.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):(r=s.getComputedPos(),(r=a.x+r.x)<-e.scrollW?r=-e.scrollW:0<r&&(r=0),s.animate({x:r},g.delayTime,"cubic-bezier(0.25, 0.46, 0.45, 0.94)"))))}})})}})}(dwz),$.fn.extend({list:function(t){var c=$.extend({pullDown$:"div.pullDown",pullUp$:"div.pullUp",pullDownLabel$:"span.pullDownLabel",pullUpLabel$:"span.pullUpLabel",scroll$:".scroll",refreshFn:function(){},loadMoreFn:function(){}},t);return this.each(function(){var t=$(this),e=(t.find(c.scroll$),c.$form),a=t.find(c.pullDown$),n=t.find(c.pullUp$),i=a?a.find(c.pullDownLabel$):null,r=n?n.find(c.pullUpLabel$):null,o=t.parentsUnitBox().find(".hideBarCtl"),s={txt:"",flip:""},l={txt:"",loading:"",loadMoreTxt:"",noLoadMoreTxt:""};0<i.size()&&(s={txt:i.html(),flip:i.attr("data-flip")||"Release to Refresh"}),0<r.size()&&(l={loadMoreTxt:r.html()||"加载更多",noLoadMoreTxt:r.attr("data-no-more")||"没有更多了",loading:r.attr("data-loading")||"加载中..."}),t.scroll({scrollX:!1,scrollY:!0,scroll$:c.scroll$,touchstart:function(){var t=e.listTotal();t.currentList&&0<n.size()&&(n.removeClass("loading").addClass("data-more"),t.currentList.length?r.html(l.loadMoreTxt):r.html(l.noLoadMoreTxt))},touchmove:function(t,e){0<a.size()&&(60<e.scrollY?(a.addClass("flip"),i.html(s.flip)):(a.removeClass("flip"),i.html(s.txt))),0<n.size()&&(e.scrollY-200<-e.scrollH&&20<e.scrollH?(n.addClass("loading"),r.html(l.loading)):n.removeClass("loading")),0<o.size()&&(e.scrollY<-50&&5<e.scrollH&&e.endY>e.y+3?o.addClass("hideBar"):e.endY<e.y-3&&o.removeClass("hideBar"))},touchend:function(){0<a.size()&&a.hasClass("flip")&&(a.removeClass("flip").addClass("loading"),setTimeout(function(){a.removeClass("loading")},1e3),c.refreshFn.call(t,a)),0<n.size()&&n.hasClass("loading")&&c.loadMoreFn.call(t,n)}}),e.on("dwz-ajax-done",function(){var t;0<n.size()&&(t=e.listTotal(),n.removeClass("loading").addClass("data-more"),t.currentList.length<t.pagesize?r.html(l.noLoadMoreTxt):r.html(l.loadMoreTxt))})})},listTotal:function(t,e,a){if(void 0===t)return{total:this.total||0,ajaxTime:this.ajaxTime,currentList:this.currentList||[],pagesize:this.pagesize||20};this.total=parseInt(t||0),this.currentList=e||[],this.pagesize=a,this.total||(this.total=this.currentList.length),this.ajaxTime=(new Date).getTime(),this.trigger("dwz-ajax-done")}}),$.extend({listForm:function(t,e){var a=!(1<arguments.length&&void 0!==e)||e,n=t.find("div.dwz-list"),i=t.find('input[name="'+dwz.config.pageInfo.pageNum+'"]');t.on("submit",function(){return i.size()&&i.val(1),t.requestList(),n.scrollTo({y:0,duration:800}),!1}),a&&setTimeout(function(){t.trigger("submit")},300),n.list({$form:t,refreshFn:function(){console.log("refreshFn..."),i.size()&&i.val(1),t.requestList()},loadMoreFn:function(){console.log("loadMoreFn..."),i.size()&&t.total&&t.total>=t.currentList.length?(i.val(parseInt(i.val())+1),t.requestList(!0),n.data("dwz-load-more",1)):(n.data("dwz-load-more",2),t.listTotal(t.total,[]))}})}}),$.navTab={config:{box$:"#nav-tab",items$:"#nav-tab > .tab-bar > [tabid]",contents$:"#nav-tab > .tab-panel > .panel-item",activeClass:"active",cachedClass:"cached",openIndex:-1},$box:null,_currentIndex:0,init:function(t){var e,a=$.extend($.navTab.config,t);this.$box=$($.navTab.config.box$),this.getTabs().each(function(t){var a=$(this).hrefFix(),e=a.attr("data-href"),e=e&&e.startsWith("#")?"":e;a.click({index:t,tabid:a.attr("tabid"),url:e},function(t){var e=t.data;e.loaded=a.attr("data-loaded")&&"true"==a.attr("data-cache"),$.navTab.open(e),t.preventDefault()})}),0<=a.openIndex&&($.navTab._open(a.openIndex),(e=location.hash)&&3!==e.split(";").length||(e=(e=(t=this.getTabs().eq(a.openIndex)).attr("data-href"))&&e.startsWith("#")?"":e,$.navTab.open({index:a.openIndex,tabid:t.attr("tabid"),url:e}))),a.history||$(window).on("hash.empty",function(t){$.dialog&&$.dialog.isOpen?$.dialog.close():$.navView&&$.navView.close(!1)})},getBox:function(){return this.getPanels().eq(this._currentIndex)},_open:function(t){for(var e=$.navTab.config,a=this.getTabs(),n=this.getPanels(),i=0;i<a.size();i++)i==t?(a.eq(i).addClass(e.activeClass).removeClass(e.cachedClass),n.eq(i).addClass(e.activeClass).removeClass(e.cachedClass)):(a.eq(i).addClass(e.cachedClass).removeClass(e.activeClass),n.eq(i).addClass(e.cachedClass).removeClass(e.activeClass));this._currentIndex=t},open:function(e){var a=0<=e.index?e.index:this._indexTabId(e.tabid);if(-1!=a){if(e.interceptor||(e.interceptor=dwz.getUrlInterceptor(e.url)),e.interceptor&&!1===e.interceptor.call(this.getPanels(a),e.url))return!1;this._currentIndex!=a&&this._open(a),e.url&&(e.loaded||this.load(e),e.history&&$.history&&e.tabid&&setTimeout(function(){var t=e.tabid+";"+e.url;$.history.add(t,function(t){$.navTab.open(t)},{index:a,url:e.url,loaded:!0})},10)),$.dialog&&$.dialog.isOpen?$.dialog.close():$.navView&&$.navView.close(!1)}},load:function(t){var a,n=$.extend({type:"GET",external:!1,url:"",data:{},callback:null},t),t=0<=n.index?n.index:this._indexTabId(n.tabid),i=this.getPanels().eq(t),r=this.getTabs().eq(t);n.external?this.loadExternal(n.url):(a=$.extend(n.url.getParams(),n.data),$.ajax({type:n.type,url:n.url,data:n.data,success:function(t){i.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url));var e=$.templateWrap(t);n.callback?n.callback.call(i,e,a):(i.html(t).initUI(),$.execHelperFn(i,e,a)),r.attr("data-loaded",1)},error:dwz.ajaxError}))},reload:function(t){t=t||this.getTabs().eq(this._currentIndex).attr("data-href"),this.load({index:this._currentIndex,url:t})},clearCache:function(t){var e=!(0<arguments.length&&void 0!==t)||t;this.$box&&(this.getTabs().each(function(t,e){return $(e).removeAttr("data-loaded")}),e&&this.reload())},loadExternal:function(t,e){t.html($.config.frag.external.replaceAll("{url}",e))},_indexTabId:function(a){if(!a)return-1;var n=-1;return this.getTabs().each(function(t,e){$(e).attr("tabid")==a&&(n=t)}),n},getTabs:function(){return this.$box.find(this.config.items$)},getPanels:function(){return this.$box.find(this.config.contents$)}},$.navView={config:{zIndexStart:100,idStart:"nav-view-",frag:'<div id="#boxId#" class="nav-view view-container box-shadow unitBox" style="display: none; z-index:#zIndex#">\n\t\t\t<main>\n\t\t\t\t<header>\n\t\t\t\t\t<div class="toolbar">\n\t\t\t\t\t\t<a class="bar-button back-button"><i class="dwz-icon-arrow-left"></i></a>\n\t\t\t\t\t\t<div class="header-title">#page_title#</div>\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\t\t\t\t<section></section>\n\t\t\t</main>\n        </div>'},$list:[],init:function(t){$.extend($.navView.config,t)},open:function(t){var a=$.extend({boxId:"",rel:"_blank",wipeClose:!1,history:!0,page_title:"",external:!1,type:"GET",url:"",data:{},interceptor:null,callback:null},t),e=a.boxId||$.navView.config.idStart+a.rel,n=$.navView.config.zIndexStart+$.navView.$list.length,i=$("#"+e);if(a.interceptor||(a.interceptor=dwz.getUrlInterceptor(a.url)),a.interceptor&&!1===a.interceptor.call(i,a.url,a.data))return!1;var r,o,t=!1,s=this.$list.length;if(0<s&&0<i.size()&&(r=this.$list[s-1],t=i.get(0)===r.get(0)),0==i.size()&&(r=a.page_title?decodeURI(a.page_title):"",$("body").append($.navView.config.frag.replaceAll("#boxId#",e).replaceAll("#zIndex#",n).replaceAll("#page_title#",r)),i=$("#"+e).initUI(),a.wipeClose&&i.touchwipe({wipeRight:function(){$.navView.close()},min_move_x:100}),this.$list.push(i)),!t){var l=this.$list,c=l[s-1];if(0<s&&i.get(0)!==l[s-1].get(0)){for(var d=0;d<s-1;d++)i.get(0)===l[d].get(0)&&(l[d]=c,l[s-1]=i);for(var u=0;u<s;u++)l[u].css({"z-index":$.navView.config.zIndexStart+u})}i.show().translateX(document.documentElement.clientWidth+"px"),setTimeout(function(){i.translateX("0px",300,"ease")},200)}a.url&&(i.data("dwz-params",{external:a.external,url:a.url,data:a.data,type:a.type}),(o=$.extend(a.url.getParams(),a.data)).ajaxDoneReload&&i.data("ajaxDoneReload",1),a.external||a.url.isUrl()?(a.url=decodeURI(a.url),this.loadExternal(a.url)):$.ajax({type:a.type,url:a.url,data:a.data,success:function(t){i.triggerPageClear(),a.callback||(a.callback=dwz.getUrlCallback(a.url));var e=$.templateWrap(t);a.callback?a.callback.call(i,e,o):(i.html(t).initUI(),$.execHelperFn(i,e,o))},error:dwz.ajaxError}),t="navView;"+a.rel+";"+a.url,$.history&&a.history&&$.history.add(t,function(t){$.dialog&&$.dialog.isOpen?$.dialog.close({popHistory:!1}):$.navView.close(!0,!1)},a.url))},reload:function(t){var e=this.$list[this.$list.length-1],t=$.extend({boxId:e.attr("id"),history:!1},e.data("dwz-params"),t);this.open(t)},loadExternal:function(t){this.$list[this.$list.length-1].find("main>section").html($.config.frag.external.replaceAll("{url}",t))},close:function(t,e){var a,n=!(0<arguments.length&&void 0!==t)||t,i=!(1<arguments.length&&void 0!==e)||e,r=this.$list.length;r<=0||(a=this.$list[r-1],this.$list.pop(),$.history&&n&&$.history.pop(i),a.animate({x:document.documentElement.clientWidth},300,"ease",function(){a.triggerPageClear(),a.remove()}))},closeByRel:function(t){t=this._getBoxData(t);t.$box&&($.navView.$list.splice(t.index,1),t.$box.remove())},_getBoxData:function(t){var a,n={$box:null,index:-1};return this.$list.length&&t&&((a=$("#"+$.navView.config.idStart+t)).size()&&this.$list.forEach(function(t,e){t.get(0)===a.get(0)&&(n={$box:t,index:e})})),n},getBox:function(t){return t&&this._getBoxData(t).$box,this.$list.length?this.$list[this.$list.length-1]:null},getBoxs:function(t){t=t||1;for(var e=[],a=1;a<=this.$list.length&&a<=t;a++)e.push(this.$list[this.$list.length-a]);return e}},$.dialog={config:{box$:"#dialog",popClass:["fullscreen","actionSheet","pic","pop"],openClass:"open",frag:'<div id="dialog" class="pop-window unitBox"></div>',bgBox$:"#mask-bg-dialog",bgFrag:'<div id="mask-bg-dialog" class="mask-bg"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){$.extend($.dialog.config,t),$("body").append($.dialog.config.frag).append($.dialog.config.bgFrag),this.$box=$($.dialog.config.box$),this.$bgBox=$($.dialog.config.bgBox$)},open:function(t){var a=$.extend({type:"GET",url:"",pop:"fullscreen",external:!1,page_title:"",data:{},callback:null},t),n=this.$box,t=this.$bgBox;if(a.interceptor||(a.interceptor=dwz.getUrlInterceptor(a.url)),a.interceptor&&!1===a.interceptor.call(n,a.url))return!1;if(t.addClass($.dialog.config.openClass),"actionSheet"==a.pop?t.removeClass("filter-blur"):t.addClass("filter-blur"),$.inArray(a.pop,$.dialog.config.popClass)&&n.addClass(a.pop),n.addClass($.dialog.config.openClass).translateY(document.documentElement.clientHeight+"px"),setTimeout(function(){n.animate({y:0},300,"ease")},20),a.url){if(a.external){t=a.page_title?decodeURI(a.page_title):"dialog";return void this.loadExternal(a.url,t)}a.callback||(a.callback=dwz.getUrlCallback(a.url));var i=$.extend(a.url.getParams(),a.data);$.ajax({global:!a.callback,type:"GET",url:a.url,data:a.data,success:function(t){n.triggerPageClear();var e=$.templateWrap(t);a.callback?a.callback.call(n,e,i):(n.html(t).initUI(),$.execHelperFn(n,e,i))},error:dwz.ajaxError})}this.isOpen=!0},loadExternal:function(t,e){t=$.config.frag.external.replaceAll("{url}",t);this.$box.html('\n\t\t<main>\n\t\t\t<header>\n\t\t\t\t<div class="toolbar">\n\t\t\t\t\t<a class="bar-button" onclick="$.dialog.close()"><i class="dwz-icon-close"></i></a>\n\t\t\t\t\t<div class="header-title">'+e+"</div>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<section>"+t+"</section>\n\t\t</main>").initUI()},close:function(t){t=$.extend({closeMsg:""},t);t.closeMsg?$.alert.confirm(t.closeMsg,function(t){1==t.buttonIndex&&$.dialog._closeDirect()}):$.dialog._closeDirect()},_closeDirect:function(){var t=this.$box,e=this.$bgBox;t.animate({y:document.documentElement.clientHeight},300,"ease",function(){t.html("").removeClass($.dialog.config.popClass.join(" ")).removeClass($.dialog.config.openClass),t.triggerPageClear()}),e.removeClass($.dialog.config.openClass),this.isOpen=!1},getBox:function(){return this.$box}},function(i){var e={panelCentent$:".panel-content",collapseBtn$:".item-right",collapseClass:"is-collapse"};i.fn.extend({panel:function(t){var n=i.extend(e,t);return this.each(function(){var e=i(this),t=e.find(n.collapseBtn$),a=t.find("i.dwz-icon-arrow-up");t.click(function(t){a.hasClass(n.collapseClass)?e.panelExpand(n):e.panelCollapse(n),t.stopPropagation()})})},panelExpand:function(t){var a=i.extend(e,t);return this.each(function(){var t=i(this),e=t.find(a.collapseBtn$).find("i.dwz-icon-arrow-up");t.find(a.panelCentent$).show(),e.removeClass(a.collapseClass)})},panelCollapse:function(t){var a=i.extend(e,t);return this.each(function(){var t=i(this),e=t.find(a.collapseBtn$).find("i.dwz-icon-arrow-up");t.find(a.panelCentent$).hide(),e.addClass(a.collapseClass)})}})}(dwz),$.fn.extend({tabs:function(t){var l=$.extend({currentIndex:0,tab$:":scope > .tab-bar > .tab-item",panel$:":scope > .tab-panel > .panel-item",ajaxClass:"dwz-ajax"},t);return this.each(function(){var a=$(this),n=a.find(l.tab$),i=a.find(l.panel$);n.each(function(e){var t=$(this);l.currentIndex==e?t.addClass("active"):t.removeClass("active"),t.click(function(t){r(a,n,i,e),t.preventDefault()})}),r(a,n,i,l.currentIndex)});function r(t,e,a,n){var i=e.eq(n);l.currentIndex=n,e.removeClass("active"),i.addClass("active");var r,o,s=a.removeClass("active").eq(l.currentIndex).addClass("active");setTimeout(function(){t.trigger($.event.type.activated,{$tab:i,$panel:s,$tabs:e,$panels:a,currentIndex:l.currentIndex})},200),!i.hasClass(l.ajaxClass)||(r=i.attr("data-href"))&&!s.attr("data-loaded")&&(o=r.getParams(),$.ajax({type:"GET",url:r,data:o,success:function(t){s.triggerPageClear();var e=dwz.getUrlCallback(r),a=$.templateWrap(t);e?e.call(s,a,o):(s.html(t).initUI(),$.execHelperFn(s,a,o)),s.attr("data-loaded",!0)}}))}}}),function(g){g.fn.extend({slide:function(t){var p=g.extend({titActive:"on",titSelector:".hd > ul",wrapCell:".bd",currentIndex:0,delayTime:400,interTime:5e3,loop:!0,autoPlay:!1,autoCss:!1},t);return this.each(function(){var t=Math.round(1e7*Math.random()),e=g(this).attr("data-slide-id",t),a=p.wrapCell?e.find(p.wrapCell):e,n=a.children(),i=null,r=e.find(p.titSelector),o=a.width(),s=o,l=n.children();p.autoCss&&(a.css({overflow:"hidden",position:"relative"}),n.css({overflow:"hidden",position:"relative",padding:"0px",margin:"0px"}),l.css({display:"table-cell","vertical-align":"top"}));var c,d=p.currentIndex,u=l.size();function h(){var t=(o-s)/2;p.loop?-1==d?n.animate({x:-(d+1)*s+t},p.delayTime,"ease",function(){d=u-1,n.translateX(-(d+1)*s+t+"px"),i&&i.removeClass(p.titActive).eq(d).addClass(p.titActive)}):u<=d?n.animate({x:-(d+1)*s+t},p.delayTime,"ease",function(){d=0,n.translateX(-(d+1)*s+t+"px"),i&&i.removeClass(p.titActive).eq(d).addClass(p.titActive)}):(n.animate({x:-(d+1)*s+t},p.delayTime,"ease"),i&&i.removeClass(p.titActive).eq(d).addClass(p.titActive)):(u<=d&&(d=0),n.animate({x:-d*s+t},p.delayTime,"ease"),i&&i.removeClass(p.titActive).eq(d).addClass(p.titActive))}function f(){-1==c&&p.autoPlay&&(c=setInterval(function(){0!=g('div[data-slide-id="'+t+'"]').size()?(d++,h()):clearInterval(c)},p.interTime))}0!=u&&(0<u&&(s=e.width()),u<2&&(p.loop=!1),r.size()&&(r.html(new Array(u+1).join("<li></li>")),i=r.find("> li")),l.css({width:s+"px"}),n.css({width:s*u+"px"}),n.find("img").on("dragstart",function(t){return!1}),p.loop&&(n.append(l.eq(0).clone(!0)),n.prepend(l.eq(u-1).clone(!0)),n.css({width:s*(u+2)+"px"})),e.on("slide-resize",function(){setTimeout(function(){o=a.width(),s=o,0<u&&(s=e.width()),n.children().css({width:s+"px"}),n.css({width:s*u+"px"}),p.loop&&n.css({width:s*(u+2)+"px"}),h()},200)}),c=-1,h(),1<u&&(f(),i&&i.each(function(t){g(this).touchwipe({touch:function(){d=t,h()}})}),n.touchwipe({direction:"horizontal",touchstart:function(){-1!=c&&(clearInterval(c),c=-1)},touchmove:function(t,e){var a=p.loop?1:0;n.translateX(-(d+a)*s-e.dx+"px")},touchend:function(t,e){40<e.dx?d<u-(p.loop?0:1)&&(d++,g.slideMedia&&g.slideMedia.play()):e.dx<-40&&d>(p.loop?-1:0)&&(d--,g.slideMedia&&g.slideMedia.play()),h(),f()}})))})}})}(dwz),function(m){m.fn.extend({slideTab:function(t){var g=m.extend({activeClass:"on",header$:".hd",content$:".bd",currentIndex:0,delayTime:400,onSwitchSlide:null},t);return this.each(function(){var t=Math.round(1e7*Math.random()),e=m(this).attr("data-slide-tab-id",t),t=e.find(g.content$),r=t.children("ul"),o=e.find(g.header$),n=o.children("ul"),s=n.children(),i=0,l=0,e=function(){l=i=0,s.each(function(t){var e=m(this).width(!0);i<e&&(i=e),l+=e}),n.css({width:l+"px"})};e();var a,c=r.children(),d=g.currentIndex,u=s.size();0==c.size()&&(a="",s.each(function(t){a+="<li></li>"}),r.html(a),c=r.children());var h=t.width()||m("body").width();function f(t){var e,a=s.removeClass(g.activeClass).eq(d).addClass(g.activeClass);t&&(e=-d*i,0<(a=((t=o.width())-i+(i-a.width()))/2)&&(0<(e+=a)?e=0:e<t-l&&(e=t-l)),n.animate({x:e},g.delayTime,"ease"))}function p(){var a=c.eq(d),t=-d*h,e=(o.width()-h+(h-a.width()))/2;0<e&&(t+=e),r.animate({x:t},g.delayTime,"ease"),c.removeClass(g.activeClass).eq(d).addClass(g.activeClass);var n,i=s.eq(d),t=i.attr("data-href");g.onSwitchSlide&&t&&(n=t.getParams(),i.attr("data-loaded")||m.ajax({type:"GET",url:t,data:n,success:function(t){i.attr("data-loaded",1);var e=i.find("img");0<e.size()&&(n.img_src=e.attr("src")),g.onSwitchSlide(a,t,n)},error:dwz.ajaxError}))}c.each(function(t){var e=m(this).width(!0);h<e&&(h=e)}),0<u&&(o.scroll({scrollX:!0,scrollY:!1,scroll$:":scope > ul",stopPropagationEvents:!0,touchstart:e}),f(),p(),s.each(function(t){m(this).touchwipe({data:t,touch:function(t){d=t.data,f(!0),p()}})}),r.touchwipe({stopPropagationEvents:!0,direction:"horizontal",touchstart:function(){},touchmove:function(t,e){g.loop;r.translateX(-d*h-e.dx+"px")},touchend:function(t,e){40<e.dx?d<u-1&&(d++,f(!0),m.slideMedia&&m.slideMedia.play()):e.dx<-40&&0<d&&(d--,f(!0),m.slideMedia&&m.slideMedia.play()),p()}}))})}})}(dwz),$.filterSelect={config:{box$:"#filter-select",openClass:"open",frag:'<div id="filter-select" class="unitBox"></div>',bgBox$:"#mask-filter-select",bgFrag:'<div id="mask-filter-select" class="mask-bg"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){this.$box||($.extend($.filterSelect.config,t),$("body").append($.filterSelect.config.frag),$("body").append($.filterSelect.config.bgFrag),this.$box=$($.filterSelect.config.box$),this.$bgBox=$($.filterSelect.config.bgBox$),this.$bgBox.on($.event.hasTouch?"touchstart":"click",function(){$.filterSelect.close()}))},open:function(t){this.init(t);var a,n=$.extend({type:"GET",url:"",data:{},callback:null,pop:"default",top:0},t),i=this.$box,e=this.$bgBox,r=document.documentElement.clientHeight-n.top;"fullscreen"!=n.pop&&(r*=.7),e.addClass($.filterSelect.config.openClass),i.addClass($.filterSelect.config.openClass),setTimeout(function(){i.css({top:n.top+"px",height:r+"px"}),e.css({top:n.top+"px"})},20),n.url&&(a=$.extend(n.url.getParams(),n.data),$.ajax({type:"GET",url:n.url,data:n.data,success:function(t){i.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url));var e=$.templateWrap(t);n.callback?n.callback.call(i,e):(i.html(t).initUI(),$.execHelperFn(i,e,a))},error:dwz.ajaxError})),this.isOpen=!0},close:function(){var t=$.filterSelect.$box,e=$.filterSelect.$bgBox;e&&e.removeClass($.filterSelect.config.openClass),t&&(t.css({height:"0px"}),setTimeout(function(){t.removeClass($.filterSelect.config.openClass)},500)),this.isOpen=!1},getBox:function(){return this.$box}},$.filterPanel={config:{box$:"#filter-panel",openClass:"open",frag:'<div id="filter-panel" class="unitBox"></div>',bgBox$:"#mask-filter-panel",bgFrag:'<div id="mask-filter-panel" class="mask-bg"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){$.extend($.filterPanel.config,t),$("body").append($.filterPanel.config.frag).append($.filterPanel.config.bgFrag),this.$box=$($.filterPanel.config.box$),this.$bgBox=$($.filterPanel.config.bgBox$),this.$bgBox.click(function(){$.filterPanel.close()})},open:function(t){var a,n=$.extend({type:"GET",url:"",pop:"default",data:{},callback:null},t),i=this.$box;this.$bgBox.addClass($.filterPanel.config.openClass),i.show().translateX(i.get(0).clientWidth+"px"),setTimeout(function(){i.animate({x:0},400,"ease")},10),n.url&&(a=$.extend(n.url.getParams(),n.data),$.ajax({type:"GET",url:n.url,data:n.data,success:function(t){i.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url));var e=$.templateWrap(t);n.callback?n.callback.call(i,e,a):(i.html(t).initUI(),$.execHelperFn(i,e,a))},error:dwz.ajaxError})),this.isOpen=!0},close:function(){var t=this.$box,e=this.$bgBox;t.animate({x:t.get(0).clientWidth},500,"ease",function(){t.html("").hide()}),e.removeClass($.filterPanel.config.openClass),this.isOpen=!1},getBox:function(){return this.$box}},function(l){l.croppic={imgCropData:function(t,e){var a=l.extend({imgBg$:"img.croppic-bg",imgWrap$:".crop-img-wrap"},e),n=t.find(a.imgWrap$),e=n.find("img"),t=e.get(0),a=e.position(),t={src:e.attr("src"),left:-a.left,top:-a.top,width:n.width(),naturalWidth:t.naturalWidth,height:n.height(),naturalHeight:t.naturalHeight,rate:1};return 0<t.naturalWidth&&(t.rate=e.width()/t.naturalWidth,t.left=t.left/t.rate,t.top=t.top/t.rate,t.width=t.width/t.rate,t.height=t.height/t.rate),t.left<0&&(t.left=0),t.top<0&&(t.top=0),t.width>t.naturalWidth-t.left&&(t.width=t.naturalWidth-t.left),t.height>t.naturalHeight-t.top&&(t.height=t.naturalHeight-t.top),t},render:function(t,e){var e=l.extend({imgBg$:"img.croppic-bg",imgWrap$:".crop-img-wrap"},e),i=t.find(e.imgWrap$),r=i.find("img"),o=t.find(e.imgBg$);0==o.size()?o=l('<img class="croppic-bg" src="'+r.attr("src")+'">').appendTo(t):o.attr("src",r.attr("src"));e=t.width();e<i.width()&&i.css({width:e+"px",height:e+"px"}),r.on("load",function(){var t=i.position();r.css({width:i.width()+"px"}),o.css({width:i.width()+"px"});var e=(i.height()-r.height())/2,a=(i.width()-r.width())/2;r.css({top:e+"px",left:a+"px"}),o.css({top:t.top+e+"px",left:t.left+a+"px"})});var s={getImgStyle:function(){var t=o.position(),e=o.get(0);return{left:t.left,top:t.top,width:o.width(),naturalWidth:e.naturalWidth,height:o.height(),naturalHeight:e.naturalHeight}},cacheStartStyle:function(){o.data("zoom-start",s.getImgStyle())},setZoom:function(t){var e=l.event.getDistance(t.startX,t.startY,t.startX2,t.startY2),a=l.event.getDistance(t.x,t.y,t.x2,t.y2),n=i.position(),t=o.data("zoom-start")||s.getImgStyle(),a=t.width*a/e;a<i.width()&&(a=i.width());e=t.top+(t.height-t.height*a/t.width)/2,t=t.left+(t.width-a)/2;o.css({top:e+"px",left:t+"px",width:a+"px"}),r.css({top:e-n.top+"px",left:t-n.left+"px",width:a+"px"})},checkRestore:function(){r.width<i.width()&&(r.css({width:i.width()+"px"}),o.css({width:i.width()+"px"}));var t=i.position(),e=o.position(),a=r.height(),n=i.height();a<n?(r.css({top:(n-a)/2+"px"}),o.css({top:t.top+(n-a)/2+"px"})):e.top>t.top?(r.css({top:"0px"}),o.css({top:t.top+"px"})):e.top+o.height()<t.top+i.height()&&(r.css({top:i.height()-o.height()+"px"}),o.css({top:t.top+i.height()-o.height()+"px"})),e.left>t.left?(r.css({left:"0px"}),o.css({left:t.left+"px"})):e.left+o.width()<t.left+i.width()&&(r.css({left:i.width()-o.width()+"px"}),o.css({left:t.left+i.width()-o.width()+"px"}))},setPos:function(t){var e=o.data("zoom-start")||s.getImgStyle(),a=-t.dx+e.left,t=-t.dy+e.top,e=i.position();r.css({top:-e.top+t+"px",left:-e.left+a+"px"}),o.css({top:t+"px",left:a+"px"})}};t.touchwipe({direction:"all",touchstart:function(){s.cacheStartStyle()},touchmove:function(t,e){"zoom"==e.touchType&&s.setZoom(e),"touch"==e.touchType&&s.setPos(e)},touchend:function(){s.checkRestore()}})}}}(dwz),dwz.gps={PI:3.141592653589793,x_pi:52.35987755982988,delta:function(t,e){var a=.006693421622965943,n=this.transformLat(e-105,t-35),i=this.transformLng(e-105,t-35),r=t/180*this.PI,e=1-a*(e=Math.sin(r))*e,t=Math.sqrt(e);return{lat:n=180*n/(6378245*(1-a)/(e*t)*this.PI),lng:i=180*i/(6378245/t*Math.cos(r)*this.PI)}},gcj_encrypt:function(t,e){if(this.outOfChina(t,e))return{lat:t,lng:e};var a=this.delta(t,e);return{lat:t+a.lat,lng:e+a.lng}},gcj_decrypt:function(t,e){if(this.outOfChina(t,e))return{lat:t,lng:e};var a=this.delta(t,e);return{lat:t-a.lat,lng:e-a.lng}},bd_encrypt:function(t,e){var a=e,e=t,t=Math.sqrt(a*a+e*e)+2e-5*Math.sin(e*this.x_pi),a=Math.atan2(e,a)+3e-6*Math.cos(a*this.x_pi);return bdLng=t*Math.cos(a)+.0065,bdLat=t*Math.sin(a)+.006,{lat:bdLat,lng:bdLng}},bd_decrypt:function(t,e){var a=e-.0065,e=t-.006,t=Math.sqrt(a*a+e*e)-2e-5*Math.sin(e*this.x_pi),e=Math.atan2(e,a)-3e-6*Math.cos(a*this.x_pi),a=t*Math.cos(e);return{lat:t*Math.sin(e),lng:a}},mercator_encrypt:function(t,e){e=20037508.34*e/180;return{lat:20037508.34*(Math.log(Math.tan((90+t)*this.PI/360))/(this.PI/180))/180,lng:e}},mercator_decrypt:function(t,e){e=e/20037508.34*180,t=t/20037508.34*180;return{lat:t=180/this.PI*(2*Math.atan(Math.exp(t*this.PI/180))-this.PI/2),lng:e}},distance:function(t,e,a,n){a=Math.cos(t*this.PI/180)*Math.cos(a*this.PI/180)*Math.cos((e-n)*this.PI/180)+Math.sin(t*this.PI/180)*Math.sin(a*this.PI/180);1<a&&(a=1),a<-1&&(a=-1);var i=6371e3*Math.acos(a);return i},outOfChina:function(t,e){return e<72.004||137.8347<e||(t<.8293||55.8271<t)},transformLat:function(t,e){var a=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return a+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,a+=2*(20*Math.sin(e*this.PI)+40*Math.sin(e/3*this.PI))/3,a+=2*(160*Math.sin(e/12*this.PI)+320*Math.sin(e*this.PI/30))/3},transformLng:function(t,e){e=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return e+=2*(20*Math.sin(6*t*this.PI)+20*Math.sin(2*t*this.PI))/3,e+=2*(20*Math.sin(t*this.PI)+40*Math.sin(t/3*this.PI))/3,e+=2*(150*Math.sin(t/12*this.PI)+300*Math.sin(t/30*this.PI))/3}},function(i){i.bmap={config:{addMarker:{map:null,point:null,iconUrl:"./image/icon/markers.png",iconWidth:25,iconHeight:40,imageOffsetLeft:0,imageOffsetTop:0,anchor:null,imageSize:null}},calRotation:function(t){var e=i.extend({map:null,startPos:null,endPos:null},t),a=0,n=e.map.pointToPixel(e.startPos),t=e.map.pointToPixel(e.endPos);return a=t.x!=n.x?(e=(t.y-n.y)/(t.x-n.x),a=360*Math.atan(e)/(2*Math.PI),-(a=t.x<n.x?90-a+90:-a)):90*-(0<t.y-n.y?-1:1)},addMarker:function(t,e){var a=i.extend({},i.bmap.config.addMarker,t),t=new BMap.Icon(a.iconUrl,new BMap.Size(a.iconWidth,a.iconHeight),{anchor:a.anchor||new BMap.Size(a.iconWidth/2,a.iconHeight),imageSize:a.imageSize||new BMap.Size(a.iconWidth,a.iconHeight),imageOffset:new BMap.Size(a.imageOffsetLeft,a.imageOffsetTop)}),t=new BMap.Marker(a.point,{icon:t});return a.map.addOverlay(t),e&&e(t),t},apInfoWindow:function(t,e,a){var a=i.extend({frag:'<div class="InfoWindow"><p>#address#</p><p>经度：#lng# &nbsp;&nbsp; 纬度：#lat#</p></div>',showStatus:!0,showCount:!0,showTime:!1},a).frag.replaceAll("#address#",e.address?"地址："+e.address:"").replaceAll("#lng#",e.lng).replaceAll("#lat#",e.lat),e={title:'<h2 class="InfoWindowTitle">名称：'+e.name+"</h2>"},n=new BMap.InfoWindow("<div class='InfoWindow'>"+a+"</div>",e);t.addEventListener("click",function(){this.openInfoWindow(n)})}}}(dwz),$.fn.extend({suggestMap:function(t){var r=$.extend({location:"金华市",lng:"lng",lat:"lat"},t);return this.each(function(){var a=$(this),t=a.val(),n=a.parentsUntil(function(){return $(this).is("form")}).get(0),i=new BMap.Autocomplete({input:this,location:r.location,onSearchComplete:function(t){console.log(t)}});t&&i.setInputValue(t);var e=new BMap.LocalSearch(r.location);e.setSearchCompleteCallback(function(t){var e;!t||(e=t.getPoi(0))&&(a.attr("data-keyword",t.keyword),n[r.lng].value=e.point.lng,n[r.lat].value=e.point.lat,i.hide())}),i.addEventListener("onconfirm",function(t){t=t.item.value,t=t.street+t.business;a.val(t),e.search(t)}),a.on("keyup",function(){var t=a.attr("data-keyword");t&&a.val().indexOf(t)<0&&(n[r.lng].value="",n[r.lat].value="")})})}}),function(r){function n(t){this.$el=t.$el,this.canvas=this.$el.get(0),this.ctx=this.canvas.getContext("2d"),t.width&&(this.canvas.width=t.width),t.height&&(this.canvas.height=t.height),this.ctx.fillStyle=t.fillStyle||"#ffffff",this.p=0,this.l=10,this.arr=[],this.canvas.onmousedown=this.downEvent.bind(this),this.canvas.onmousemove=this.moveEvent.bind(this),this.canvas.onmouseup=this.upEvent.bind(this),this.canvas.addEventListener("touchstart",this.downEvent.bind(this),!1),this.canvas.addEventListener("touchmove",this.moveEvent.bind(this),!1),this.canvas.addEventListener("touchend",this.upEvent.bind(this),!1),this.canvas.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.moveFlag=!1,this.upof={},this.radius=0,this.has=[],this.lineMax=10,this.lineMin=5,this.linePressure=1,this.smoothness=80,this.img=new Image,this.img.src=t.brushUrl||"image/drawingBoard/pen1.png"}n.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.toDataURL=function(){for(var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),e=0;e<t.data.length;e+=4)0==t.data[e+3]&&(t.data[e]=255,t.data[e+1]=255,t.data[e+2]=255,t.data[e+3]=255);return this.ctx.putImageData(t,0,0),this.canvas.toDataURL("image/jpeg",1)},n.prototype.clickEvent=function(t){this.cli=this.getXY(t)},n.prototype.downEvent=function(t){window.console.log("点击"),this.moveFlag=!0,this.has=[],this.upof=this.getXY(t);var e=this.upof.x,t=this.upof.y;this.arr.unshift({x1:e,y1:t})},n.prototype.moveEvent=function(t){if(this.moveFlag){t.preventDefault();var e=this.getXY(t),a=this.upof;this.radius;this.has.unshift({time:(new Date).getTime(),dis:this.distance(a,e)});for(var n=0,i=0,r=0;r<this.has.length-1&&(n+=this.has[r].dis,i+=this.has[r].time-this.has[r+1].time,!(n>this.smoothness));r++);var o=Math.min(i/n*this.linePressure+this.lineMin,this.lineMax)/2;this.radius=o,this.upof=e;for(var s=Math.round(this.has[0].dis/2)+1,l=0;l<s;l++){var c=a.x+(e.x-a.x)/s*l,d=a.y+(e.y-a.y)/s*l;this.ctx.beginPath(),c-=this.l/2,d-=this.l/2,this.arr.unshift({x:c,y:d}),this.ctx.drawImage(this.img,c,d,this.l,this.l),this.l=this.l-.2,this.l<this.lineMin&&(this.l=this.lineMin),this.p++}}},n.prototype.upEvent=function(t){if(this.moveFlag=!1,this.l=this.lineMax,100<this.arr.length){for(var e=0;e<60;e++)this.arr[e].x=this.arr[e].x-this.l/4,this.arr[e].y=this.arr[e].y-this.l/4,this.ctx.drawImage(this.img,this.arr[e].x,this.arr[e].y,this.l,this.l),this.l=this.l-.3,this.l<5&&(this.l=5);this.l=this.lineMax,this.arr=[]}1==this.arr.length&&(this.ctx.drawImage(this.img,this.arr[0].x1-this.l/2,this.arr[0].y1-this.l/2,this.l,this.l),this.arr=[])},n.prototype.getXY=function(t){var e=t.clientX||t.touches[0].clientX,a=t.clientY||t.touches[0].clientY,t=this.$el.offset();return{x:e-t.left+(document.body.scrollLeft||document.documentElement.scrollLeft),y:a-t.top+(document.body.scrollTop||document.documentElement.scrollTop)}},n.prototype.distance=function(t,e){var a=e.x-t.x,t=e.y-t.y;return Math.sqrt(a*a+t*t)},r.extend({Brush:n,drawingBoardRender:function(t,e){var a=this,e=template.render(t.html,{params:e});a.html(e).initUI(),setTimeout(function(){var t=a.find("canvas"),i=new n({$el:a.find("canvas"),width:t.width(),height:t.height(),brushUrl:"image/drawingBoard/pen1.png"});a.find("button.dwz-btn-reset").click(function(){i.clear()}),a.find("button.dwz-btn-submit").click(function(){var t=i.toDataURL(),e=r.navView.getBox(),a=e.find("input.dwz-sign-input").val(t.replace("data:image/jpeg;base64,","")),t='<img src="'+t+'"><a class="btn-txt">重新签名</a>',n=e.find(".dwz-sign-box");n.data("btn_html")||n.data("btn_html",n.html()),n.html(t),n.find(".btn-txt").click(function(t){setTimeout(function(){n.html(n.data("btn_html")),a.val("")},200)}),r.dialog.close()})},500)}})}(dwz);var _createClass=function(){function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var DwzWidget=function(){function a(t){var t=t.$el,e=void 0===t?null:t;_classCallCheck(this,a),this.$el=e;try{e instanceof $||(this.$el=$(e))}catch(t){}this.eventNames={show:"show",hide:"hide"}}return _createClass(a,[{key:"find",value:function(t){return this.$el.find(t)}},{key:"findByCls",value:function(t){return this.$el.find("."+t)}},{key:"on",value:function(t,e,a){return this.$el.on(t,e,a)}},{key:"off",value:function(t,e){return this.$el.off(t,e)}},{key:"trigger",value:function(t,e){return this.$el.trigger(t,e)}},{key:"show",value:function(){return this.$el.show(),this.trigger(this.eventNames.show)}},{key:"hide",value:function(){return this.$el.hide(),this.trigger(this.eventNames.hide)}},{key:"isEventTarget",value:function(t){return this.$el.get(0)==t.target}}]),a}(),DwzMarquee=function(){function l(t){var e=t.$el,a=t.cls,n=void 0===a?"marquee":a,i=t.itemCls,r=void 0===i?"marquee-item":i,o=t.duration,e=void 0===o?1e4:o,a=t.delay,i=void 0===a?1e3:a,o=t.selectIndex,a=void 0===o?0:o,o=t.pageSize,o=void 0===o?1:o;_classCallCheck(this,l);var s=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,t));return s.cls=n,s.itemCls=r,s.selectIndex=a,s.pageSize=o,s.duration=e,s.delay=i,s.isOver=!1,s.isLastPlay=!0,setTimeout(function(){s.play(),s._triggerActive()},200),s.$el.on("mouseover",function(){s.isOver=!0}),s.$el.on("mouseout",function(){s.isOver=!1}),s}return _inherits(l,DwzWidget),_createClass(l,[{key:"_triggerActive",value:function(){var t=this.findByCls(this.itemCls),e=t.size(),a=e>this.selectIndex?this.selectIndex:0;e<=0&&(a=-1),this.trigger($.event.type.activated,{$item:0<=a?t.eq(a):null,$items:t,selectIndex:a})}},{key:"_animationEvent",value:function(){var t,e=this,a=this.findByCls(this.cls),n=this.findByCls(this.itemCls);0!=n.size()&&(t=n.eq(0).height(),a.translate({y:0}),a.off($.animationendNames).on($.animationendNames,function(t){a.off($.animationendNames),a.translate({y:0}),n=e.findByCls(e.itemCls),e.isLastPlay&&n.size()&&a.append(n.eq(0)),e._triggerActive(),e._timer=setTimeout(function(){e._animationEvent()},1<e.pageSize?e.delay:10)}),setTimeout(function(){e.isOver&&1<e.pageSize?(e.isLastPlay=!1,a.translateY("0.1px",e.duration,"linear")):(e.isLastPlay=!0,a.translateY(-t+"px",e.duration,"linear"))},50))}},{key:"play",value:function(){var t,e,a=this;0!=this.$el.size()&&(this.isOver=!1,0==(t=this.findByCls(this.cls)).size()&&(this.$el.html('<div class="'+this.cls+'">'+this.$el.html()+"</div>"),t=this.findByCls(this.cls)),e=this.findByCls(this.itemCls),1==this.pageSize&&0<e.size()&&t.height()>this.$el.height()&&(t.append(e.eq(0).clone(!0)),e=this.findByCls(this.itemCls)),1<e.size()&&(1<this.pageSize&&this.$el.css({height:e.eq(0).height()*this.pageSize+"px"}),setTimeout(function(){a._animationEvent()},this.delay)))}},{key:"_stop",value:function(){this.isOver=!0,this._timer&&(clearTimeout(this._timer),this._timer=null)}},{key:"html",value:function(t){this._stop(),this.$el.html(t),this.play(),this._triggerActive()}},{key:"appendItem",value:function(t){1<this.pageSize&&(this._stop(),this.findByCls(this.cls).append(t),this.play(),this._triggerActive())}},{key:"removeItem",value:function(t){this.updateItem(t)}},{key:"updateItem",value:function(a,n,t){var i,e=2<arguments.length&&void 0!==t&&t,r=this.findByCls(this.itemCls);this._stop(),$.isFunction(a)?(i=0,r.each(function(t,e){a(t,e)&&(i++,(n?$(e).after(n):$(e)).remove())}),!i&&e&&this.findByCls(this.cls).append(n)):0<=a&&a<r.size()&&(r=r.eq(a),(n?r.after(n):r).remove()),this.play(),this._triggerActive()}}]),l}(),DwzFlyPop=function(){function n(t){var e=t.$el,a=void 0===e?null:e,e=t.cls,t=t.delay,t=void 0===t?3e3:t;_classCallCheck(this,n);a=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,{$el:a||$("body")}));return a.$items=[],a.cls=e,a.delay=t,a}return _inherits(n,DwzWidget),_createClass(n,[{key:"_triggerActive",value:function(){this.trigger($.event.type.activated,0<this.$items.length?this.$items[this.$items.length-1]:null)}},{key:"fly",value:function(t){var e=this,a=t.html,n=void 0===a?"":a,a=t.left,i=void 0===a?0:a,t=t.top,r=void 0===t?0:t,o=$(n).appendTo(this.$el);setTimeout(function(){o.css({left:i+"px",top:r+"px"}).addClass(e.cls),o.animationend(function(t){e._triggerActive()})},this.delay),this.$items.push(o)}},{key:"remove",value:function(a){$.isFunction(a)?this.$items.forEach(function(t,e){a(e,t)&&$(t).remove()}):0<=a&&a<this.$items.length&&$items[a].remove()}},{key:"clear",value:function(){this.$items.forEach(function(t){$(t).remove()})}}]),n}();$.extend({DwzMarquee:DwzMarquee,DwzFlyPop:DwzFlyPop});var _createClass=function(){function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DwzCountUp=function(){function i(t){var e=t.$el,a=t.endVal,n=void 0===a?0:a,e=t.options;_classCallCheck(this,i);a=_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return a.paused=!0,a.options=$.extend({startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:""},e),a.formattingFn=a.options.formattingFn||a.formatNumber,a.easingFn=a.options.easingFn||a.easeOutExpo,a.startVal=a.validateValue(a.options.startVal),a.frameVal=a.startVal,a.endVal=a.validateValue(n),a.options.decimalPlaces=Math.max(a.options.decimalPlaces),a.resetDuration(),a.options.separator=String(a.options.separator),a.useEasing=a.options.useEasing,""===a.options.separator&&(a.options.useGrouping=!1),a}return _inherits(i,DwzWidget),_createClass(i,[{key:"determineDirectionAndSmartEasing",value:function(){var t=this.finalEndVal||this.endVal;this.countDown=this.startVal>t;var e=t-this.startVal;Math.abs(e)>this.options.smartEasingThreshold?(this.finalEndVal=t,e=this.countDown?1:-1,this.endVal=t+e*this.options.smartEasingAmount,this.duration=this.duration/2):(this.endVal=t,this.finalEndVal=null),this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing}},{key:"start",value:function(t){this.error||(this.callback=t,0<this.duration?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count.bind(this))):this.printValue(this.endVal))}},{key:"pauseResume",value:function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count.bind(this))):cancelAnimationFrame(this.rAF),this.paused=!this.paused}},{key:"reset",value:function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)}},{key:"update",value:function(t){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(t),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal||this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count.bind(this)))}},{key:"count",value:function(t){this.startTime||(this.startTime=t);t-=this.startTime;this.remaining=this.duration-t,this.useEasing?this.countDown?this.frameVal=this.startVal-this.easingFn(t,0,this.startVal-this.endVal,this.duration):this.frameVal=this.easingFn(t,this.startVal,this.endVal-this.startVal,this.duration):this.countDown?this.frameVal=this.startVal-(this.startVal-this.endVal)*(t/this.duration):this.frameVal=this.startVal+(this.endVal-this.startVal)*(t/this.duration),this.countDown?this.frameVal=this.frameVal<this.endVal?this.endVal:this.frameVal:this.frameVal=this.frameVal>this.endVal?this.endVal:this.frameVal,this.frameVal=Number(this.frameVal.toFixed(this.options.decimalPlaces)),this.printValue(this.frameVal),t<this.duration?this.rAF=requestAnimationFrame(this.count.bind(this)):null!==this.finalEndVal?this.update(this.finalEndVal):this.callback&&this.callback()}},{key:"printValue",value:function(t){t=this.formattingFn(t);this.$el.is("input")?this.$el.val(t):this.$el.html(t)}},{key:"ensureNumber",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"validateValue",value:function(t){var e=Number(t);return this.ensureNumber(e)?e:(this.error="[CountUp] invalid start or end value: "+t,null)}},{key:"resetDuration",value:function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration}},{key:"formatNumber",value:function(t){var e,a=this,n=t<0?"-":"",i=void 0,r="",o="",s="",i=Math.abs(t).toFixed(this.options.decimalPlaces),r=(e=(i+="").split("."))[0],o=1<e.length?this.options.decimal+e[1]:"";if(this.options.useGrouping){s="";for(var l=0,c=r.length;l<c;++l)0!==l&&l%3==0&&(s=this.options.separator+s),s=r[c-l-1]+s;r=s}return this.options.numerals&&this.options.numerals.length&&(r=r.replace(/[0-9]/g,function(t){return a.options.numerals[+t]}),o=o.replace(/[0-9]/g,function(t){return a.options.numerals[+t]})),n+this.options.prefix+r+o+this.options.suffix}},{key:"easeOutExpo",value:function(t,e,a,n){return a*(1-Math.pow(2,-10*t/n))*1024/1023+e}}]),i}();$.extend({DwzCountUp:DwzCountUp});var _createClass=function(){function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DwzChartBase=function(){function h(t){t.$el;var e=t.decimals,a=void 0===e?0:e,n=t.animationStep,i=void 0===n?5:n,r=t.animationInterval,o=void 0===r?30:r,s=t.startColor,l=void 0===s?"#0099DD":s,c=t.endColor,d=void 0===c?"#7ED7FF":c,u=t.textColor,e=void 0===u?"#aaa":u,n=t.textSize,r=void 0===n?"30px":n,s=t.infoText,c=void 0===s?"":s,u=t.infoTextColor,n=void 0===u?"#aaa":u,s=t.infoTextSize,u=void 0===s?"14px":s;_classCallCheck(this,h);s=_possibleConstructorReturn(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,t));return s.decimals=a,s.animationStep=i,s.animationInterval=o,s.textColor=e,s.textSize=r,s.infoText=c,s.infoTextColor=n,s.infoTextSize=u,s.startRgba=$.colorRgba({color:l}),s.endRgba=$.colorRgba({color:d}),s}return _inherits(h,DwzWidget),_createClass(h,[{key:"midRgbaColor",value:function(t){var e=0<arguments.length&&void 0!==t?t:.5,a=/(?:\(|\)|rgba|RGBA)*/g,n=this.startRgba.replace(a,"").split(","),i=this.endRgba.replace(a,"").split(","),r=[];if(4!=n.length||4!=i.length)return this.startRgba||this.endRgba;for(var o=0;o<n.length;o++){var s=parseInt(n[o]),l=parseInt(i[o]),s=Math.abs(s+(l-s)*e);o<3&&(s=parseInt(s)),r.push(s)}return"rgba("+r.join(",")+")"}}]),h}(),DwzChartPercent=function(){function c(t){t.$el;var e=t.data,a=void 0===e?0:e,n=t.infoText,i=t.strokeLinecap,r=void 0===i?"round":i,o=t.rateColor,s=void 0===o?.7:o,l=t.bgColor,e=void 0===l?"rgba(200, 200, 200, .5)":l,n=t.fgWidth,i=void 0===n?10:n,o=t.bgWidth,l=void 0===o?10:o,n=t.sideType,o=void 0===n?"onside":n;_classCallCheck(this,c);n=_possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,$.extend({textColor:"#aaa",textSize:"30px",infoText:"",infoTextColor:"rgba(0,0,0,0.3)",infoTextSize:"14px",startColor:"#0099DD",endColor:"#7ED7FF",rateColor:.7},t)));n.midRgba=n.midRgbaColor(s),n.strokeLinecap=r,n.circleRadius=360,n.data=a,n.randomKey=Math.ceil(1e5*Math.random());a=57;"inside"==o?a=57-i:"outside"==o&&(a=57+i);r='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 150 150" class="dwz-chart-percent">\n\t\t\t<defs>\n\t\t\t\t<linearGradient x1="0%" y1="0%" x2="100%" y2="0%" id="lg-'+n.randomKey+'-1">\n\t\t\t\t\t<stop stop-color="'+("round"==n.strokeLinecap?n.midRgba:n.startRgba)+'" offset="0%"></stop>\n\t\t\t\t\t<stop stop-color="'+n.endRgba+'" offset="100%"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<linearGradient x1="0%" y1="0%" x2="100%" y2="0%" id="lg-'+n.randomKey+'-2">\n\t\t\t\t\t<stop stop-color="'+n.startRgba+'" offset="0%"></stop>\n\t\t\t\t\t<stop stop-color="'+n.midRgba+'" offset="100%"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t</defs>\n\t\t\t<circle class="svg-border" cx="75" cy="75" r="'+a+'" fill="none" stroke="'+e+'" stroke-width="'+l+'" stroke-dasharray="460" transform="rotate(-90,75,75)"></circle>\n\t\t\t<circle class="svg-circle-1" cx="75" cy="75" r="57" fill="none" stroke="url(#lg-'+n.randomKey+'-1)" stroke-width="'+i+'" stroke-dasharray="0, 20000" transform="rotate(-90,75,75)" stroke-linecap="'+r+'"></circle>\n\t\t\t<circle class="svg-circle-2" style="display: none" cx="75" cy="75" r="57" fill="none" stroke="url(#lg-'+n.randomKey+'-2)" stroke-width="'+i+'" stroke-dasharray="0, 20000" transform="rotate(90,75,75)" stroke-linecap="'+r+'"></circle>\n\t\t\t<text class="timer" text-anchor="middle" x="80" y="'+(n.infoText?80:85)+'" style="font-size: '+n.textSize+';" fill="'+n.textColor+'">\n\t\t\t\t<tspan class="number">--</tspan><tspan class="percent" style="font-size:.5em">%</tspan>\t\n\t\t\t</text>\n\t\t\t<text class="infoText" text-anchor="middle" x="75" y="100" style="font-size: '+n.infoTextSize+';" fill="rgba(0,0,0,0.4)">'+(n.infoText||"")+"</text>\n\t\t</svg>";return n.$el.html(r),n.$circle1=n.$el.find("circle.svg-circle-1"),n.$circle2=n.$el.find("circle.svg-circle-2"),n.$number=n.$el.find("tspan.number"),n.$infoText=n.$el.find("text.infoText"),n.render(),n}return _inherits(c,DwzChartBase),_createClass(c,[{key:"_angleCal",value:function(t){return this.circleRadius*t/100}},{key:"setData",value:function(t,e){0<=t&&t<=100&&(this.data=t,void 0!==e&&(this.infoText=e,this.$infoText.text(e)),this.render())}},{key:"render",value:function(){var a=this,n=this._angleCal(this.data),i=0;this.timer&&window.clearInterval(this.timer),this.timer=window.setInterval(function(){n<=i?(a.timer&&window.clearInterval(a.timer),a.timer=null):i+=a.animationStep;var t,e=parseFloat(i/a.circleRadius*100);e>=a.data&&(i=n,e=a.data),e=e.toFixed(a.decimals),"round"==a.strokeLinecap?((t=(t=i)-1)<0&&(t=0),180<t?(a.$circle2.css({display:"block"}),a.$circle2.attr("stroke-dasharray",t-180+", 20000")):(a.$circle2.css({display:"none"}),a.$circle1.attr("stroke-dasharray",t+", 20000"))):a.$circle1.attr("stroke-dasharray",i+", 20000"),a.$number.text(e)},this.animationInterval)}}]),c}(),DwzChartCircle=function(){function h(t){t.$el;var e=t.data,a=void 0===e?[]:e,n=t.bgColor,i=void 0===n?"rgba(200, 200, 200, .5)":n,r=t.fgWidth,o=void 0===r?10:r,s=t.bgWidth,l=void 0===s?3:s,e=t.sideType,n=void 0===e?"onside":e,r=t.color,s=void 0===r?[]:r,e=t.axis,c=void 0===e?[]:e,r=t.img,e=void 0===r?"":r,r=t.space,r=void 0===r?1:r;_classCallCheck(this,h);var d=_possibleConstructorReturn(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,$.extend({textColor:"#aaa",textSize:"20px"},t)));if(!(d.color=s)||s.length<c.length){d.color=[];for(var u=0;u<c.length;u++)d.color.push($.randomColor(.7))}d.circleRadius=360,d.data=a,d.space=r,d.angleRadius=d._angleCal(a);a=57;"inside"==n?a=57+o:"outside"==n&&(a=57-o);e='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 150 150" class="dwz-chart-percent">\n\t\t\t\t<circle class="svg-border" cx="75" cy="75" r="'+a+'" fill="none" stroke="'+i+'" stroke-width="'+l+'" stroke-dasharray="460" transform="rotate(-90,75,75)"></circle>\n\t\t\t\t'+d._genCircle(o)+"\t\n\t\t\t\t"+(e?'<image id="chart-SVGIMG" xlink:href="'+e+'" height="40%" width="40%" x="44" y="43"/>':"")+"\n\t\t\t</svg>";return d.$el.html(e),d.$circlelist=d.$el.find("circle.svg-circle"),d.render(),d}return _inherits(h,DwzChartBase),_createClass(h,[{key:"_genCircle",value:function(t){for(var e="",a=0;a<this.color.length;a++)e+='<circle class="svg-circle" cx="75" cy="75" r="57" fill="none" stroke="'+this.color[a]+'" stroke-width="'+t+'" stroke-dasharray="0, 20000" transform="rotate('+this.angleRadius[a].start+',75,75)" stroke-linecap="butt"></circle>';return e}},{key:"_angleCal",value:function(t){for(var e=[],a=0;a<t.length;a++){var n={start:-90,angle:0};0<a&&(n.start=e[a-1].start+e[a-1].angle+this.space),n.angle=t[a]/100*(this.circleRadius-this.space*t.length),e.push(n)}return e}},{key:"setData",value:function(t){$.isArray(t)&&t.length==this.data.length&&(this.data=t,this.render())}},{key:"render",value:function(){var e=this,a=0,n=0;this.$circlelist.attr("stroke-dasharray","0, 20000"),this.timer&&window.clearInterval(this.timer),this.timer=window.setInterval(function(){if(a>e.angleRadius.length-1)return e.timer&&window.clearInterval(e.timer),void(e.timer=null);var t=!1;(n+=e.animationStep)>=e.angleRadius[a].angle&&(n=e.angleRadius[a].angle,t=!0),e.$circlelist.eq(a).attr("stroke-dasharray",n+", 20000"),t&&(a++,n=0)},this.animationInterval)}}]),h}();!function(t){t.setRegional("utilDate",{MONTH_NAMES:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月","1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],DAY_NAMES:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","周日","周一","周二","周三","周四","周五","周六"]}),t.setRegional("calendar",{dayNames:["日","一","二","三","四","五","六"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],yearName:"年",btnTxt:{ok:"确定",cancel:"取消",clean:"清除"}}),t.setRegional("alert",{title:{info:"提示",error:"错误",success:"成功",confirm:"确认提示"},btnTxt:{ok:"确定",cancel:"取消"}}),t.setRegional("actionSheet",{cancelTxt:"取消"})}(dwz),function(l){l.config.frag.external='<iframe src="{url}" class="iframe-pages" frameborder="no" scrolling="auto" border="0" marginwidth="0" marginheight="0" allowfullscreen="true"></iframe>',l.fn.extend({disableAutofocus:function(){return this.each(function(){var t=l(this);t.attr("readonly","readonly"),setTimeout(function(){t.removeAttr("readonly")},600)})},redirect:function(){return this.each(function(){l(this).touchwipe({touch:function(t){var e=l(this).attr("href");e&&(window.location=e),t.preventDefault()}})})},hoverClass:function(t){var e=0<arguments.length&&void 0!==t?t:"hover";return this.each(function(){var t=l(this);l.event.hasTouch?(t.on("touchstart",function(){t.addClass(e)}),t.on("touchend touchmove",function(){t.removeClass(e)})):(t.on("mousedown",function(){t.addClass(e)}),t.on("mouseup mouseout",function(){t.removeClass(e)}))})},touchOpenRight:function(){var a=l.extend({ctlClass:"dwz-open-right",openClass:"open-right"});return this.each(function(){var t=l(this),e=t.parent();t.touchwipe({wipeLeft:function(){e.find("."+a.ctlClass).removeClass(a.openClass),t.addClass(a.openClass)},wipeRight:function(){t.removeClass(a.openClass)}}),e.attr("data-"+a.openClass)||e.attr("data-"+a.openClass,1).click(function(){setTimeout(function(){e.find("."+a.ctlClass).removeClass(a.openClass)},500)})})},checkboxRadio:function(){return this.each(function(){var e=l(this),a=e.attr("data-checkbox-radio")||"form",n=e.attr("name");e.on("change",function(t){this.checked&&e.parentsUntil(function(){return l(this).is(a)}).find("input[name="+n+"]").each(function(){t.target!==this&&(this.checked=!1)})})})},toggleSelectRef:function(t){var o=l.extend({ref:"data-ref-box",refVal:"data-ref-val",ctrHide:"data-ctr-hide"},t);return this.each(function(){var s=l(this);function r(t,e,a,n){var i;!function(t,e){var a=s.val();if(e){if(!a||a==t)return 1;if(t)for(var n=t.split(","),i=0;i<n.length;i++)if(a==n[i])return 1}else if(a!=t){if(t)for(var r=t.split(","),o=0;o<r.length;o++)if(a==r[o])return;return 1}}(e,a)?(t.show().removeClass("ignoreRequired").find(":input").removeClass("ignore"),t.find("ul.upload-preview").removeClass("ignore")):(i=!1,t.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)}).each(function(){var t=l(this);t.get(0)==s.get(0)?i=!0:t.is(":checkbox")&&t.attr("checked",!1)}),i||(n||t.hide(),t.addClass("ignoreRequired").find(":input").addClass("ignore"),t.find("ul.upload-preview").addClass("ignore")))}function t(){for(var t=s.attr(o.ref).split("|"),e=s.attr(o.refVal).split("|"),a=s.attr(o.ctrHide)||!1,n=s.hasClass("ignoreOnly"),i=0;i<t.length;i++)r(l(t[i]),e[i],a,n)}t(),s.change(t)})},fleshVerifyImg:function(){return this.each(function(){l(this).touchwipe({touch:function(){l(this).attr("src",biz.server.getVerifyImgUrl())}})})},sendVerifyMs:function(){return this.each(function(){l(this).click(function(){var t,a,n,i=l(this),e=i.attr("rel"),r=i.attr("data-op"),e=i.parentsUnitBox().find(e).val();e&&e.isMobile()?(a=l('<span class="count">重发('+(t=60)+"s)</span>").appendTo(this.parentNode),i.hide(),n=setInterval(function(){a.text("重发("+t+"s)"),--t<=1&&(clearInterval(n),a.remove(),i.show())},1e3),l.ajax({type:"POST",dataType:"json",url:i.attr("data-href"),data:{mobile:e,sign:l.md5(e+"dwz_mobile"),type:r},success:function(t){console.log(JSON.stringify(t));var e=t[dwz.config.keys.message]||t.info;l.isAjaxStatusError(t)?(l.alert.error(e),clearInterval(n),a.remove(),i.show()):e&&l.alert.success(e)}})):l.alert.error("请输入您的11位手机号码")})})}})}(dwz),function(n){n.ui={screenChange:function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},e=n("body"),a=e.data("screen-size");a||e.data("screen-size",t),window.api&&a&&a.width+a.height!=t.width+t.height||(t=(a=t.height<t.width)?t.width:t.height,document.documentElement.style.fontSize=75*t/750+"px",a?e.addClass("landscape"):e.removeClass("landscape"))},init:function(){n.ui.screenChange(),window.addEventListener("resize",function(){n.ui.screenChange(),n("div.dwz-slide, div.slide").trigger("slide-resize"),n("div.nav-view").trigger("window-resize")},!1);var t=n("#progressBar").addClass("is-hide");n(document).on("ajaxStart",function(){t.removeClass("is-hide")}).on("ajaxStop",function(){t.addClass("is-hide")})}},n.regPlugins.push(function(t){n.fn.slide&&n("div.dwz-slide",t).each(function(){var t=n(this);t.slide({currentIndex:parseInt(t.attr("data-open-index"))||0,autoCss:!1,autoPlay:"false"!=t.attr("data-auto-play"),loop:"false"!=t.attr("data-loop"),zoom:"true"==t.attr("data-zoom")})}),n.navTab&&n("a[target=navTab]",t).touchwipe({touch:function(t){var e=n(this),a=e.attr("data-href");n.navTab.open({tabid:e.attr("rel"),url:a}),t.preventDefault()}}).hrefFix(),n.navView&&(n("a[target=navView], li[target=navView]",t).touchwipe({touch:function(t){var e=n(this),a=e.attr("data-href");n.navView.open({url:a,rel:e.attr("rel")||"_blank",external:e.attr("data-external")||!1,title:e.attr("title")||""}),t.stopPropagation()}}).hrefFix(),n("div.nav-view .back-button",t).click(function(t){n.navView.close()})),n.dialog&&(n("a[target=dialog], li[target=dialog]",t).click(function(t){var e=n(this);n.dialog.open({url:e.attr("data-href"),pop:e.attr("data-pop")||"fullscreen",external:e.attr("data-external")||!1}),t.stopPropagation()}).hrefFix(),n("img[target=dialog], a[target=dialog-pic]",t).click(function(t){var e=n(this);n.dialog.open({url:e.attr("data-href"),pop:"pic",data:{src:e.attr("data-src")||e.attr("src")}}),t.stopPropagation()}),n("#dialog .pop-down-close, #dialog .back-button",t).click(function(t){n.dialog.close(),t.stopPropagation()})),n.alert&&(n("a[target=alertPrompt]",t).click(function(t){var e=n(this);n.alert.prompt(e.attr("data-href")),t.stopPropagation()}).hrefFix(),n("#alertMsgBox .close",t).click(function(t){n.alert.close(),t.preventDefault()}),n("#alertPromptBox .close",t).click(function(t){n.alert.close("prompt"),t.preventDefault()})),n.fn.tabs&&n("div.dwz-tabs",t).each(function(){var t=n(this);t.tabs({currentIndex:t.attr("data-open-index")||0})}),n.fn.panel&&n("div.dwz-panel.dwz-collapse",t).panel(),n.fn.toggleSelectRef&&n("select.toggleSelectRef",t).each(function(){n(this).toggleSelectRef()}),n(".dwz-open-right",t).touchOpenRight(),n("input.dwz-disable-autofocus",t).disableAutofocus(),n.fn.clipboardTip&&n("input.dwz-clipboard, textarea.dwz-clipboard",t).clipboardTip(),n.fn.calendar&&n("input.dwz-calendar",t).calendar(),n("input.required, select.required, textarea.required, ul.upload-preview.required",t).each(function(t,e){n(e).parentsUnitBox("form-item").find(":scope > label, :scope > .item-content > label").addClass("required")}),n("div.dwz-ctl-eye",t).each(function(){var t=n(this),e=t.find("input[type=text], input[type=password]"),a=t.find(".icon-eye");a.click(function(){a.hasClass("eye-open")?(a.removeClass("eye-open"),e.attr("type","password")):(a.addClass("eye-open"),e.attr("type","text"))})}),n(".dwz-ctl-hover, header .bar-button, .button, .item-right",t).hoverClass("hover"),n("input[data-checkbox-radio]",t).checkboxRadio(),n("a[target=ajaxTodo]",t).ajaxTodo("active"),n.fn.previewUploadImg&&n("div.upload-wrap",t).each(function(){var t=n(this),e={maxW:70,maxH:70,inputName:t.attr("data-name")||"pics[]"},a=t.attr("data-max-count");a&&(e.maxCount=parseInt(a)),t.previewUploadImg(e)}),n.fn.previewImg&&n("ul.dwz-preview-img, ul.upload-preview",t).previewImg(),n.fn.dropdown&&n("div.dwz-dropdown",t).dropdown(),n.fn.redirect&&n("a[target=redirect]",t).redirect(),n.fn.sendVerifyMs&&n("a[target=sendVerifyMs]",t).sendVerifyMs(),n.fn.fleshVerifyImg&&n("img.fleshVerifyImg",t).fleshVerifyImg(),n("div.dwz-scroll",t).scroll(),n("div.dwz-scroll-x",t).scroll({scrollX:!0,scrollY:!1,scroll$:".scroll-x"});function e(t){t.stopPropagation()}n("textarea",t).on("focus",function(t){n(t.target).on("touchmove",e)}).on("blur",function(t){n(t.target).off("touchmove",e)})})}(dwz);var biz=window.biz||{server:{ENV:"LIVE",_flag:function(){return $.inArray(this.ENV,["TEST","UAT","LIVE"])?"REMOTE":this.ENV},baseUrl:{DEV:"",TEST:"/app_proxy",UAT:"https://mobile.jui.org",LIVE:"https://mobile.jui.org"},_verifyImg:{DEV:"./doc/verify.png",REMOTE:"/Public/verify"},login:{DEV:"./doc/json/login.json",REMOTE:"/login"},loginSms:{DEV:"./doc/json/login.json",REMOTE:"/login/verify"},register:{DEV:"./doc/json/register.json",REMOTE:"/register"},forgetPwd:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/forget"},changePwd:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/user/password"},changeMobile:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/user/phone"},userProfile:{DEV:"./doc/json/login.json",REMOTE:"/user"},sendSmsCode:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/code"},feedback:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/feedback"},userRealVerify:{DEV:"./doc/json/login.json",REMOTE:"/user/realVerify"},homeAd:{DEV:"./doc/json/homeAd.json",REMOTE:"/homeAd"},widgetList:{DEV:"./doc/json/widgetList.json",REMOTE:"/widgetList"},regionList:{DEV:"./doc/json/region/test_{code}.json",REMOTE:"/region/list"},persionList:{DEV:"./doc/json/persionList.json",REMOTE:"/persion/list"},calendar:{dayDetail:{DEV:"./doc/json/calendar/dayDetail.json",REMOTE:"/calendar/dayDetail"},weekStatistics:{DEV:"./doc/json/calendar/weekStatistics.json",REMOTE:"/calendar/weekStatistics"}},announce:{recommend:{DEV:"./doc/json/announce/list.json",REMOTE:"/announce/recommend"},list:{DEV:"./doc/json/announce/list.json",REMOTE:"/announce/list"},detail:{DEV:"./doc/json/announce/detail_{id}.json",REMOTE:"/announce/detail"}},transport:{task:{DEV:"./doc/json/transport/task.json",REMOTE:"/transport"},list:{DEV:"./doc/json/transport/list.json",REMOTE:"/transport/list"},detail:{DEV:"./doc/json/transport/detail.json",REMOTE:"/transport/detail"},start:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/start"},finish:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/finish"},first:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/first"},last:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/last"},picUpload:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/upload"},picDel:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/picDel"},gpsUpload:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/transport/point"}},message:{list:{DEV:"./doc/json/messageList.json",REMOTE:"/notice"},del:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/notice/delete"}},favorite:{list:{DEV:"./doc/json/favoriteList.json",REMOTE:"/RestApi/favoriteList"},del:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/favorite/delete"}},uploadUserIcon:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/upload"},getUrl:function(t,e){t=t[this._flag()].replace("{token}",UserInfo.token);return e&&(t=t.replaceTm(e)),t.startsWith("./doc/")?t:this.baseUrl[this.ENV]+t},getVerifyImgUrl:function(){return this.baseUrl[this.ENV]+this._verifyImg[this._flag()]+"?t="+(new Date).getTime()}}},CommonStore={data:[],getData:function(t){for(var e=$.extend({id:""},t),a=[],n=0;n<this.data.length;n++)a.push(this.data[n]),a[n].selected=a[n].id==e.id;return a},getItem:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].id==t)return this.data[e];return{}}},SexStore=$.extend({},CommonStore,{data:[{id:1,name:"男"},{id:2,name:"女"}]}),DepartmentStore=$.extend({},CommonStore,{data:[{id:1,name:"技术部"},{id:2,name:"市场部"},{id:3,name:"财务部"}]}),InterestStore=$.extend({},CommonStore,{data:[{id:1,name:"阅读"},{id:2,name:"写代码"},{id:3,name:"户外运动"},{id:4,name:"旅游"},{id:5,name:"美食"},{id:6,name:"其它"}]}),TransportStatus=$.extend({},CommonStore,{data:[{id:"0",icon:"status-pending",name:"待出发"},{id:"1",icon:"status-fail",name:"运输中"},{id:"2",icon:"status-pass",name:"已完成"}]});$.urlInterceptor=function(t){var e=!!UserInfo.token;if(!e)for(var a=["tpl/user/","tpl/module/","tpl/home.html"],n=t.getRequestURI(),i=0;i<a.length;i++)if(n.startsWith(a[i])){e=!0;break}return!!e||($.gotoLogin(),!1)},$._ajax=$.ajax,$.extend({ajax:function(t){var e={token:UserInfo.token||""},t=$.extend({data:{},header:e},t);t.url.startsWith("./doc/")&&(t.type="GET"),$._ajax(t)},fetchAjax:function(t){var e=$.extend({key:"",url:"",data:{},type:"GET",success:null},t),a="dwz_json_"+e.key;if(!e.key||!e.url)throw new Error("fetchAjax: key and url is required");$.ajax({type:e.type,url:e.url,dataType:"json",data:e.data,success:function(t){$.setStorage(a,t),e.success&&e.success(t)},error:function(){var t=$.getStorage(a);t&&e.success&&e.success(t)}})}}),$.extend(biz,{ajaxError:function(t){401!=t.status?$.alert.toast("操作失败，请稍后再试！"):$.gotoLogin()},safeAreaTop:0,safeAreaBottom:0,fixStatusBar:function(t){t.find("header, .dwz-fix-status-bar").css({"padding-top":biz.safeAreaTop+"px"}),t.find("footer, .dwz-fix-tab-bar").css({"padding-bottom":biz.safeAreaBottom+"px"})},getAppVersion:function(){return window.api?api.appVersion+" "+biz.server.ENV+"("+api.systemType+" "+api.systemVersion+")":window.plus?plus.runtime.version+" "+biz.server.ENV:"dev ("+biz.server.ENV+")"},getSystemType:function(){return window.api?api.systemType:window.plus?plus.os.name:"web"},checkLiveTime:function(){return new Date("2021/02/05").getTime()<=(new Date).getTime()},hasPermission:function(t){t=api.hasPermission({list:t});return console.log(JSON.stringify(t)),t},requestPermission:function(t,a){window.api&&api.requestPermission({list:t,code:100001},function(t,e){console.log(JSON.stringify(t)),a&&a(t)})},initPermission:function(t){window.api&&api.requestPermission({list:t},function(t){console.log(JSON.stringify(t))})},checkPermission:function(a,t){if(window.api){var e=biz.hasPermission([a]);if(!e||!e[0]||!e[0].granted)return api.confirm({title:"提醒",msg:"没有获得 "+(t||a)+" 权限\n是否前往设置？",buttons:["去设置","取消"]},function(t,e){1==t.buttonIndex&&biz.requestPermission([a])}),!1}return!0},updateApp:function(t){window.api&&("android"==api.systemType?api.download({url:t.source,report:!0},function(t,e){t&&!t.state&&$.alert.toast("正在下载应用"+t.percent+"%"),t&&t.state&&(t=t.savePath,api.installApp({appUri:t}))}):"ios"==api.systemType&&api.installApp({appUri:t.source}))},checkUpdate:function(){var t;!window.api||(t=api.require("mam"))&&t.checkUpdate(function(t,e){var a;t&&t.status?(a=t.result).update&&(t="新版本型号:"+a.version+";更新提示语:"+a.updateTip+";发布时间:"+a.time,a.closed&&"LIVE"==biz.server.ENV?$.alert.confirm({title:"有新的版本，请下载并安装",msg:t,buttons:["确定"]},function(t){1==t.buttonIndex&&biz.updateApp(a)}):$.alert.confirm({title:"有新的版本，是否下载并安装",msg:t,buttons:["确定","取消"],theme:"is-default"},function(t){1==t.buttonIndex&&biz.updateApp(a)})):$.alert.toast(e.msg)})},pageRender:function(t,e){e.UserInfo||(e.UserInfo=UserInfo);var a=template.render(t.html,e);this.html(a).initUI(),$.execHelperFn(this,t,e)},iframeRender:function(t,e){e=template.render(t.html,{page_title:decodeURI(e.page_title||"iframe外部页面"),page_url:decodeURI(e.page_url)});this.html(e).initUI()},calDayRange:function(t){var e=t.start,a=t.end,n=t.dateFmt,t=void 0===n?"yyyy-MM-dd":n,n=-1/0;return e&&a&&(e=e.parseDate(t),n=(a.parseDate(t)-e)/864e5+1),n},location:{lastTime:0,timestamp:0,truck_id:"",transport_id:"",lng:120,lat:30,zoom:8,updTransport:function(){$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.list),dataType:"json",data:{pageNum:1,status:1},cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&t.data.list&&t.data.list.length&&(biz.location.truck_id=t.data.list[0].truck_id,biz.location.transport_id=t.data.list[0].id)},error:biz.ajaxError})}},startLocation:function(){var a,t;biz.location.lastTime||(biz.location.updTransport(),a=$(document),(t=api.require("bmLocation")).configManager({accuracy:"battery_saving",filter:1,activityType:"automotiveNavigation",locationTimeout:10,reGeocodeTimeout:10,coordinateType:"BMK09LL"}),t.start({locatingWithReGeocode:!0,backgroundLocation:!0},function(t){var e;t.status&&(biz.location.lat=t.location.latitude,biz.location.lng=t.location.longitude,biz.location.timestamp=Math.round((new Date).getTime()),a.trigger("location.change",biz.location),biz.location.lastTime+1e4<biz.location.timestamp&&(e=biz.server.getUrl(biz.server.transport.gpsUpload),t={transport_id:biz.location.transport_id,truck_id:biz.location.truck_id,gathertime:Math.round(biz.location.timestamp/1e3),lng:biz.location.lng,lat:biz.location.lat},biz.location.lastTime=biz.location.timestamp,biz.location.transport_id&&$.ajax({type:"POST",url:e,dataType:"json",data:t,cache:!1,global:!1,success:function(t){console.log(JSON.stringify(t))},error:biz.ajaxError})))}))},getGPS:function(a,n){window.api?biz.checkPermission("location","gps定位")?api.require("bmLocation").singleLocation({reGeocode:!1,netWorkState:!1},function(t,e){t.status?(t={lat:t.location.latitude,lng:t.location.longitude},a&&a(t)):n&&n()}):n&&n():(new BMap.Geolocation).getCurrentPosition(function(t){var e;this.getStatus()==BMAP_STATUS_SUCCESS?(e=t.point,e=$.gps.bd_encrypt(e.lat,e.lng),a&&a(e,t)):n&&n()},{enableHighAccuracy:!0})},openPdf:function(t){api.require("pdfReader").open({path:t,hidden:{print:!0,export:!0,bookmark:!0,email:!0},androidHidden:{topBackButton:!0,topListButton:!0,topSearchButton:!0,bottomProgress:!0},backBtn:{size:{w:60,h:40},bg:{normal:"rgba(0,0,0,0)",highlight:"rgba(0,0,0,0)"},title:{text:"关闭",size:13,color:"ios"==api.systemType?"#000":"#fff",alignment:"center"},corner:5}})},openMapNav:function(t){var e=t.lng,a=t.lat,n=t.name,i=void 0===n?"":n,r=api.appInstalled({sync:!0,appBundle:"com.baidu.BaiduMap"}),t=api.appInstalled({sync:!0,appBundle:"com.autonavi.minimap"});api.hideProgress();var n=[],o=[];r&&(r=$.gps.bd_encrypt(a,e),o.push({androidPkg:"android.intent.action.VIEW",appParam:{destination:r.lat+","+r.lng,mode:"driving",sourceApplication:api.appName},uri:"intent://map/direction?destination=latlng:"+r.lat+","+r.lng+"|name:"+i+"&mode=driving&src="+api.appName+"#Intent;scheme=bdapp;package=com.baidu.BaiduMap;end",iosUrl:"baidumap://map/direction"}),n.push("百度地图")),t&&(o.push({androidPkg:"android.intent.action.VIEW",appParam:{lat:a,lon:e,dev:"0",style:"1",sourceApplication:api.appName},uri:"androidamap://navi?sourceApplication="+api.appName+"&poiname="+i+"&lat="+a+"&lon="+e+"&dev=0&style=1",iosUrl:"iosamap://navi"}),n.push("高德地图")),0==n.Length?$.alert.open({msg:"手机未安装百度地图或者高德地图，请保证手机有其中一个导航软件。"}):$.actionSheet.open({title:"请选择需要跳转的导航软件",buttons:n},function(t){t=t.buttonIndex;o[t-1]&&api.openApp(o[t-1],function(t,e){console.log(JSON.stringify(t))})})},format:{formatDateTime:function(t,e){return t?new Date(t).formatDate(e||"yyyy-MM-dd HH:mm:ss"):""},formatTime:function(t){return t?t<60?t+"秒":t<3600?(t/60).roundFloat(0)+"分钟":(t/3600).roundFloat(0)+"小时"+(t%3600/60).roundFloat(0)+"分钟":"--"},formatDistance:function(t){return t?t<1e3?parseInt(t)+"米":(t/1e3).toFixed(1)+"公里":"--"},percent:function(t,e){return(100*t).toFixed(e)},maskMobile:function(t){return biz.format.maskStr(t,3)},maskStr:function(t,e){var a=1<arguments.length&&void 0!==e?e:6;return t&&t.replace(new RegExp("(.{"+a+"}).*(.{4})","g"),"$1****$2")}}}),$.extend(template.defaults.imports,{filterInputNum:function(t){return t||""},showSex:function(t){return SexStore.getItem(t).name},showTransportStatus:function(t,e){return TransportStatus.getItem(t)[e||"name"]},showImg:function(t,e){return t||e||"image/browse-empty-bg.svg"},showUserIcon:function(t){return t||"image/dwz-logo.svg"},showStore:function(t,e,a){var n=2<arguments.length&&void 0!==a?a:"name";return e.getItem(t)[n]}},biz.format),biz.helper={listRender:function(t){var n=t.tpl,i=t.params,e=t.url,a=t.type,r=void 0===a?"GET":a,o=t.$form,s=t.$listBox,l=t.callback;o.requestList=function(a){var t=o.serializeArray();$.ajax({type:r,url:e,dataType:"json",data:t,success:function(t){var e;$.isAjaxStatusOk(t)&&(e=t.data.list||t.data||[],$.isObject(e)&&(e=Object.values(e)),t=t.data.total||t.total||e.length,o.listTotal(t,e),o.total&&o.find(".empty_box").hide(),t=template.render(n.tpl_list||n,{list:e,total:t,params:$.isFunction(i)?i():i}),(a?$(t).appendTo(s):s.html(t)).initUI(),l&&l())},error:biz.ajaxError})},$.listForm(o)},jsonDataList:function(t){var e=t.data?t.data.list||t.data:[];if(!$.isArray(e)){var a,n=[];for(a in e){var i=e[a];n.push({id:a,code:i.code||i.id,name:i.name||i.title||i})}e=n}return e},reqRegionHtml:function(t){var e=$.extend({url:"",code:"",valueName:"",labelName:"",callback:null,tpl:""},t);$.ajax({type:"GET",url:e.url||biz.server.getUrl(biz.server.regionList,{code:e.code}),dataType:"json",data:{code:e.code},success:function(t){$.isAjaxStatusOk(t)&&(t=biz.helper.jsonDataList(t),t=template.render(e.tpl,{valueName:e.valueName,labelName:e.labelName,list:t}),e.callback(t))},error:biz.ajaxError})},selectRegionRender:function(a,t){var l=$.extend({target:null,level:3,url:"",code:"",valueName:"code",labelName:"name",callback:null},t),t=template.render(a.html,{UserInfo:UserInfo,params:t,colList:new Array(l.level)});this.html(t).initUI();var c=this.find("ul.dwz-field");!function r(t){var e=t.index,o=void 0===e?0:e,t=t.code,t=void 0===t?"":t,s=c.eq(o);biz.helper.reqRegionHtml({url:l.url,labelName:l.labelName,valueName:l.valueName,code:t,tpl:a.tpl_list,callback:function(t){s.html(t);var i=s.find("li.item").click(function(){var a,n,t=$(this),e=t.attr("data-code");i.removeClass("active"),t.addClass("active"),s.attr("data-code",e),s.attr("data-name",t.attr("data-name")),o<l.level-1?(c.eq(o+1).html("").parentsUnitBox("dwz-scroll").scrollTo({y:0,duration:300}),r({index:o+1,code:e})):(a=[],n="",c.each(function(t,e){e={code:(e=$(e)).attr("data-code"),name:e.attr("data-name")},n+=(0==t?"":" ")+e.name,e.names=n,a.push(e)}),l.callback&&l.callback.call($(l.target),a))})}})}({index:0,code:l.code})},multipleSelectRender:function(t,e){var n=$.extend({target:null,callback:null},e),e=template.render(t.html,e);this.html(e).initUI();var i=this.find("form").on("submit",function(t){var e=i.find("input[type=checkbox]:checked");if(!e.size())return $.alert.error("至少选择一项"),!1;var a=[];return e.each(function(t,e){a.push({value:e.value,name:$(e).attr("data-name")})}),n.callback&&n.callback.call($(n.target),a),$.alert.close("prompt"),!1})},filterPanelRender:function(a,r){var o=$.extend({target:null,filterItems:[],callback:null},r),t=template.render(a.html,r);this.html(t).initUI();var s=this.find("form.dwz-list-form"),n=s.find("ul.dwz-list-box"),i=s.find(".dwz-btn-select");s.requestList=function(e){$.ajax({type:r.searchMethod||"GET",url:r.searchUrl,dataType:"json",data:s.serializeArray(),success:function(t){$.isAjaxStatusOk(t)&&(t=biz.helper.jsonDataList(t),t=template.render(a.tpl_list,{list:t}),t=$(t),e?items.appendTo(n).hoverClass():n.html(t).initUI(),i.size()?i.click(function(t){var e,a,n=[],i=s.find("input[type=checkbox]:checked, input[type=radio]:checked");if(!i.size()&&(r.selectSearchField&&r.searchField&&((e=s.find("input[name="+r.searchField+"]").val().trim())&&((a={searchField:r.searchField,name:e})[r.searchField]=e,n.push(a))),!n.length))return $.alert.error("至少选择一项"),!1;i.each(function(t,e){n.push(e.dataset)}),o.callback&&o.callback.call($(o.target),n),$.filterPanel.close()}):t.click(function(t){o.callback&&o.callback.call($(o.target),this.dataset),$.filterPanel.close()}))},error:biz.ajaxError})},$.listForm(s)},removeUnitBox:function(t,e){var a=$(t),n=a.parentsUnitBox("scroll-content"),t=a.parentsByTag("form");a.parentsUnitBox().remove(),n.scrollTo({y:"end",duration:800}),t.size()&&e&&((n=t.data("delItem")||[]).push(e),t.data("delItem",n))},itemDetailHelper:function(t){var e=this.find(".dwz-item-detail-box");this.find(".dwz-item-detail-btn").click(function(){$(t.tpl_item_detail).appendTo(e).initUI(),e.parentsUnitBox("scroll-content").scrollTo({y:"end",duration:800})})},searchFilterHelper:function(t,e){function n(t,e){t.find("li").removeClass("active"),t.find('li[data-value="'+e+'"]').addClass("active").size()&&t.data("value",e)}var i=e.$form,r=this.find("form"),e=i.find(":hidden");e.each(function(t,e){var a=r.find("ul[data-name="+e.name+"]");a.size()&&(n(a,e.value),a.find("li[data-value]").click(function(){var t=$(this);t.hasClass("active")||n(a,t.attr("data-value"))}))}),r.on("reset",function(t){r.find("ul[data-name").each(function(t,e){n($(e),"")})}),r.on("submit",function(t){r.find("ul[data-name").each(function(t,e){var a=$(e),e=i.find("input[name="+a.attr("data-name")+"]");e.size()&&e.val(a.data("value"))}),r.find("input").each(function(t,e){var a=i.find("input[name="+e.name+"]");a.size()&&a.val(e.value)}),i.trigger("submit"),$.filterPanel.close()})}};var UserInfo={token:"",mobile:"",realname:"",sex:1,address:"",user_type:"",headimgurl:""},UserInfoUtil={update:function(t){console.log(JSON.stringify(t));var e,a={token:"token",mobile:"mobile",realname:"realname",address:"address",user_type:"user_type",headimgurl:"headimgurl"};for(e in a){var n=a[e];null!=t[n]&&(UserInfo[e]=t[n])}null!=t.sex&&(UserInfo.sex=1==t.sex?1:2),$.setStorage("APP_USER_INFO",UserInfo)},clear:function(){UserInfo={},$.setStorage("APP_USER_INFO",UserInfo),$.navTab.clearCache(!1)}};function initUserInfo(t){UserInfo.token||(UserInfo=$.getStorage("APP_USER_INFO")||{}),console.log(JSON.stringify(UserInfo)),UserInfo.token?$.ajax({type:"POST",url:biz.server.getUrl(biz.server.userProfile),dataType:"json",data:{},success:function(t){console.log(JSON.stringify(t)),$.isAjaxStatusOk(t)?UserInfoUtil.update(t.data):(t[dwz.config.keys.message]&&$.alert.toast(t[dwz.config.keys.message]),UserInfoUtil.clear())},error:biz.ajaxError,complete:function(){t&&t()}}):t&&t()}function loginRender(t,e){e={form_url:biz.server.getUrl(biz.server.login),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode),login_sms_url:biz.server.getUrl(biz.server.loginSms),login_no_face:e.login_no_face,appVersion:biz.getAppVersion(),env:biz.server.ENV},e=template.render(t.html,e);this.html(e).initUI(),this.find("form").each(function(t,e){var a=$(e),e=function(){var t=a.find("button.primary");a.valid(!0)?t.removeAttr("disabled").removeClass("disabled"):t.attr("disabled","disabled").addClass("disabled")};e(),a.find(":input").on("change keyup",e)})}function forgetPwdRender(t,e){var a={form_url:biz.server.getUrl(biz.server.forgetPwd),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode)},a=template.render(t.html,a);this.html(a).initUI()}function registerRender(t,e){var a={form_url:biz.server.getUrl(biz.server.register),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode)},a=template.render(t.html,a);this.html(a).initUI()}function loginAjaxDone(t){console.log(JSON.stringify(t)),$.isAjaxStatusOk(t)?(UserInfoUtil.update(t.data),$.dialog.close(),$.navTab.open({url:"tpl/home.html?dwz_callback=biz.home.render",tabid:"home"})):$.alert.error(t.info)}function forgetAjaxDone(t){console.log(JSON.stringify(t)),$.isAjaxStatusOk(t)?($.gotoLogin(),$.alert.success(t.info)):$.alert.error(t.info)}function authAjaxDone(t){console.log(JSON.stringify(t)),$.navView.close(),$.isAjaxStatusOk(t)?(UserInfoUtil.update(t.data),$.alert.success("实名认证成功")):$.alert.success("实名认证失败")}function submitUserRealInfo(t){t=$(t);if(!t.valid())return!1;t=t.serializeMap();return window.api&&bizUtil.userRealVerify(t),!1}var bizUtil={userRealVerify:function(a,n){biz.checkPermission("camera","摄像头")&&api.require("dwzBaiduFaceLive").faceLiveness({debug:0,cropType:1,cropHeight:300,quality:70,eye:!1,mouth:!0,headRight:!1,headLeft:!1,headUp:!1,headDown:!1,headLeftOrRight:!1},function(t){var e;t.status?(e=t.face,n?n(e):(api.showProgress({title:"正在上传图片...",text:"先喝杯茶...",modal:!0}),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.userRealVerify),dataType:"json",data:{img:e,mobile:a.mobile,realname:a.realname,token:UserInfo.token},success:function(t){$.isAjaxStatusOk(t)&&authAjaxDone(t)},error:biz.ajaxError,complete:function(){api.hideProgress()}}))):t.message&&$.alert.toast(t.message)})}};biz.home={render:function(a,t){var n=this,t=template.render(a.html,{UserInfo:UserInfo,params:t,appVersion:biz.getAppVersion(),env:biz.server.ENV,checkLiveTime:biz.checkLiveTime()});this.html(t).initUI();var i=this.find("form.dwz-list-form");i.requestList=function(t){var e=i.serializeArray();$.ajax({type:"POST",url:biz.server.getUrl(biz.server.homeAd),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t=template.render(a.tpl_home_ad,t),n.find("#home-ad-box").html(t).initUI())},error:biz.ajaxError}),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.widgetList),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t.data.map(function(t){return t.url||(t.url="tpl/widget/"+t.name+"/index.html?dwz_callback=biz.pageRender&dwz_helper=script"),t}),t=template.render(a.tpl_home_widget,{widgetList:t.data}),n.find("#home-widget-box").html(t).initUI())},error:biz.ajaxError})},$.listForm(i)},aboutRender:function(t){t=template.render(t.html,{appVersion:biz.getAppVersion(),env:biz.server.ENV});this.html(t).initUI()}},biz.announce={listRender:function(t,e){var a=template.render(t.html,{UserInfo:UserInfo,params:e});this.html(a).initUI();var n=this.find("form.dwz-list-form"),i=n.find("ul.dwz-list-box"),a=biz.server.getUrl(biz.server.announce.list);biz.helper.listRender({tpl:t,params:e,url:a,type:"POST",$form:n,$listBox:i})},detailRender:function(e,t){var a=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.announce.detail,t),dataType:"json",data:{announce_id:t.id},cache:!1,global:!1,success:function(t){console.log(t);t=template.render(e.html,{UserInfo:UserInfo,vo:t.data});a.html(t).initUI()},error:biz.ajaxError})}},biz.transport={listRender:function(t,e){var a=template.render(t.html,{UserInfo:UserInfo,params:e});this.html(a).initUI();var n=this.find("form.dwz-list-form"),i=n.find("ul.dwz-list-box"),a=biz.server.getUrl(biz.server.transport.list);biz.helper.listRender({tpl:t,params:e,url:a,type:"POST",$form:n,$listBox:i})},detailRender:function(i,t){var r=this,e=template.render(i.html,{params:t});r.html(e).initUI();var o=r.find(".sheet-box"),e=r.find(".dwz-map-box"),s=new BMap.Map(e.get(0)),l=$.gps.bd_encrypt(biz.location.lat,biz.location.lng);s.centerAndZoom(new BMap.Point(l.lng,l.lat),biz.location.zoom);var c={car:$.bmap.addMarker({map:s,iconUrl:"./image/icon/marker-car.svg",point:new BMap.Point(l.lng,l.lat),iconWidth:42,iconHeight:42,anchor:new BMap.Size(21,21)}),start:null,end:[],status:0};$(document).on("location.change",function(t){var e,a,n=new BMap.Point(l.lng,l.lat);c.car.setPosition(n),(biz.location.lat||biz.location.lng)&&s.setCenter(n),c.start&&(biz.location.lng||biz.location.lat)&&(c.start.getPosition(),a=c.end.getPosition(),e=$.bmap.calRotation({map:s,startPos:n,endPos:a}),c.car.setRotation(e),a=[n,a],c.polyline?c.polyline.setPath(a):(c.polyline=new BMap.Polyline(a,{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}),s.addOverlay(c.polyline)))}),r.on(dwz.event.type.pageClear,function(){$(document).off("location.change")});var d=r.find("ul.receive-box"),e=r.find("form.dwz-list-form");e.on("submit",function(){return $.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.detail),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(e){var t,a,n;dwz.checkAjaxLogin(e)&&(n={UserInfo:UserInfo,vo:e.data,receive:e.data.receive||{},ship:e.data.ship||{}},t=template.render(i.tpl_sheet_box,n),o.html(t).initUI(),n=template.render(i.tpl_receive_box,n),d.html(n),r.find(".dwz-btn-start").touchwipe({wipeRight:function(){var t=$(this);t.hasClass("wipe-hover")||(t.addClass("wipe-hover"),setTimeout(function(){t.removeClass("wipe-hover")},3e3),biz.transport.transportStart(e.data))}}),r.find(".dwz-btn-finish").touchwipe({wipeRight:function(){var t=$(this);t.hasClass("wipe-hover")||(t.addClass("wipe-hover"),setTimeout(function(){t.removeClass("wipe-hover")},3e3),biz.transport.transportFinish(e.data))}}),biz.transport.vo=e.data,a=new BMap.Point(parseFloat(e.data.ship.lng),parseFloat(e.data.ship.lat)),setTimeout(function(){biz.location.lat&&biz.location.lng||s.setCenter(a)},500),c.start=$.bmap.addMarker({map:s,iconUrl:"./image/icon/marker-start.svg",point:a,iconWidth:42,iconHeight:42,anchor:new BMap.Size(21,21)}),n=$.gps.bd_encrypt(parseFloat(e.data.receive.lat),parseFloat(e.data.receive.lng)),c.end=$.bmap.addMarker({map:s,iconUrl:"./image/icon/marker-end.svg",point:new BMap.Point(n.lng,n.lat),iconWidth:28,iconHeight:42}),setTimeout(function(){$(document).trigger("location.change",biz.location)},800))},error:biz.ajaxError}),!1}),e.trigger("submit")},firstRender:function(e,t){var a=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.detail),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&(t=template.render(e.html,{vo:t.data,location:biz.location,form_url:biz.server.getUrl(biz.server.transport.first)}),a.html(t).initUI(),a.find("a.old-img-del").click(biz.transport.delPic))}})},lastRender:function(e,t){var a=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.detail),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&(t=template.render(e.html,{vo:t.data,location:biz.location,form_url:biz.server.getUrl(biz.server.transport.last)}),a.html(t).initUI(),a.find("a.old-img-del").click(biz.transport.delPic))}})},delPic:function(t){var e=$(this),a=e.parentsUntil(function(){return $(this).is("li.thumbnail")}),n=e.attr("data-id"),i=e.attr("data-img-url"),e=e.attr("data-field");i?$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.picDel),dataType:"json",data:{id:n,imgUrl:i,field:e},cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&a.remove()},error:biz.ajaxError}):a.remove(),t.stopPropagation()},confirmFirst:function(e){return $.alert.confirm({msg:"出发前先录入发货过磅信息"},function(t){1==t.buttonIndex&&$.navView.open({url:"tpl/transport/first.html?dwz_callback=biz.transport.firstRender",data:e,rel:"transportFirst"})}),!1},transportStart:function(t){if(!t.weigh_first_commit)return biz.transport.confirmFirst(t);$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.start),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){navViewAjaxDoneReload(t),biz.location.updTransport()},error:biz.ajaxError})},confirmFinish:function(e){return $.alert.confirm({msg:"完成前先录入卸货过磅信息"},function(t){1==t.buttonIndex&&$.navView.open({url:"tpl/transport/last.html?dwz_callback=biz.transport.lastRender",data:e,rel:"transportFinish"})}),!1},transportFinish:function(t){if(!t.weigh_last_commit)return biz.transport.confirmFinish(t);$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.finish),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){navViewAjaxDoneReload(t),biz.location.updTransport()},error:biz.ajaxError})},formSubmitWeigh:function(t){console.log("formSubmitWeigh()....");var e=$(t),a=$("#upload-weigh_pic"),n=$("#upload-weigh_site_pic");if(a.size()&&0==a.find(".thumbnail").size())return $.alert.open({msg:"请选择上传磅单图片"}),!1;if(n.size()&&0==n(".thumbnail").size())return $.alert.open({msg:"请选择上传现场图片"}),!1;n=e.find("input.dwz-sign-input");return n.size()&&!n.val()&&e.find(".dwz-sign-box").size()?($.alert.open({msg:"您还没有完成签字！"}),!1):$.validateCallback(t,function(t){console.log(JSON.stringify(t)),$.isAjaxStatusOk(t)?navViewAjaxDoneClose(t):$.ajaxDone(t)})}},biz.message={removeItem:function(t,e){var t=t.id,a=void 0===t?null:t;e&&e.stopPropagation(),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.message.del),dataType:"json",data:{id:a},success:function(t){$.isAjaxStatusOk(t)&&$(e.target).parentsUnitBox().find('ul.list li[data-id="'+a+'"]').remove()},error:biz.ajaxError})},listRender:function(t,e){var a=template.render(t.html,{UserInfo:UserInfo});this.html(a).initUI();var n=this.find("form.dwz-list-form"),i=n.find("ul.dwz-list-box"),a=biz.server.getUrl(biz.server.message.list);biz.helper.listRender({tpl:t,params:e,url:a,type:"GET",$form:n,$listBox:i})}},biz.favorite={removeItem:function(t){var t=t.id,e=void 0===t?null:t;$.alert.confirm({msg:"确认删除吗？"},function(t){1==t.buttonIndex&&$.ajax({type:"POST",url:biz.server.getUrl(biz.server.favorite.del),dataType:"json",data:{id:e},cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&$.navTab.getBox().find('ul.list li[data-id="'+e+'"]').remove()},error:biz.ajaxError})})},listRender:function(t,e){var a=template.render(t.html,{UserInfo:UserInfo});this.html(a).initUI();var n=this.find("form.dwz-list-form"),i=n.find("ul.dwz-list-box"),a=biz.server.getUrl(biz.server.favorite.list);biz.helper.listRender({tpl:t,params:e,url:a,type:"POST",$form:n,$listBox:i})}},biz.my={render:function(a){var n=this,t={UserInfo:UserInfo,appVersion:biz.getAppVersion(),env:biz.server.ENV},t=template.render(a.html,t);this.html(t).initUI();var i=this.find("form.dwz-list-form"),r=$("#my-announce-box");i.requestList=function(t){var e=i.serializeArray();$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport.task),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t=template.render(a.tpl_transport,t),n.find("#transport-card-box").html(t))},error:biz.ajaxError}),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.announce.recommend),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxStatusOk(t)&&(t=template.render(a.tpl_announce,t),r.html(t).initUI())},error:biz.ajaxError})},$.listForm(i)},settingRender:function(t){t=template.render(t.html,{UserInfo:UserInfo,appVersion:biz.getAppVersion(),env:biz.server.ENV});this.html(t).initUI(),this.find(".dwz-user-icon").click(function(t){$.plus.chooseImage({title:"修改用户头像",maximum:1,callback:function(t,e){t&&$.navView.open({url:"tpl/my/settingsIcon.html",rel:"mySettingsIcon",data:{imgPath:t,imgBase64:e?e.toLocalURL():""},callback:biz.my.settingIconRender})}})})},settingIconRender:function(t,a){t=template.render(t.html,{UserInfo:UserInfo,params:a});this.html(t).initUI();var t=biz.safeAreaTop+44,n=null;this.find("header .back-btn").click(function(){$.navView.close(),n&&n.close()});function i(e){$.navView.close(),$.isFunction(a.callbackFn)?a.callbackFn(e):$.ajax({type:"POST",dataType:"json",global:!0,url:biz.server.getUrl(biz.server.uploadUserIcon),data:{type:4,imgUrl:e},success:function(t){t.info&&$.alert.toast(t.info);t=$("#my_user_icon_img");0<t.size()&&t.attr("src",e);t=$("#setting_user_icon_img");0<t.size()&&t.attr("src",e),UserInfoUtil.update({headimgurl:e})}})}var r;window.plus?(r=this.find(".croppic"),$.croppic.render(r),this.find("header .txt-button").click(function(){var t=$.croppic.imgCropData(r),e={left:Math.floor(t.left)+"px",top:Math.floor(t.top)+"px",width:Math.floor(t.width)+"px",height:Math.floor(t.height)+"px"};console.log(JSON.stringify(t)),console.log(JSON.stringify(e)),dwz.plus.clipImage({src:t.src,dst:"_doc/camera/croppic.jpg",width:"auto",height:"auto",clip:e},function(t){console.log(t.toLocalURL()),dwz.plus.getBase64Image({imgPath:t.toLocalURL(),maxWidth:300,maxHeight:300,callback:i})})})):window.api&&((n=api.require("FNImageClip")).open({rect:{x:0,y:t,w:api.winWidth,h:api.winHeight-t},srcPath:a.imgPath,highDefinition:!1,isHideGrid:!0,style:{mask:"rgba(0,0,0,0.6)",clip:{w:300,h:300,x:(api.winWidth-300)/2,y:(api.winHeight-300)/2,borderColor:"#0f0",borderWidth:3,appearance:"rectangle"}},mode:"image",fixedOn:api.frameName},function(t,e){t?console.log(JSON.stringify(t)):alert(JSON.stringify(e))}),this.find("header .txt-button").click(function(){n.save({destPath:"fs://image/croppic_"+(new Date).getTime()+".jpg",copyToAlbum:!1,quality:1},function(t,e){t?(console.log(JSON.stringify(t)),n.close(),$.plus.getBase64Image({imgPath:t.destPath,maxWidth:300,maxHeight:300,callback:i})):alert(JSON.stringify(e))})}))}},biz.dwzBaiduFaceLive={faceLiveness:function(t,a){var e=t.debug,n=void 0===e?0:e,i=t.cropType,r=void 0===i?1:i,o=t.cropHeight,s=void 0===o?300:o,l=t.quality,c=void 0===l?70:l,d=t.eye,u=void 0===d||d,e=t.mouth,i=void 0!==e&&e,o=t.headRight,l=void 0!==o&&o,d=t.headLeft,e=void 0!==d&&d,o=t.headUp,d=void 0!==o&&o,o=t.headDown,o=void 0!==o&&o,t=t.headLeftOrRight;api.require("dwzBaiduFaceLive").faceLiveness({debug:n,cropType:r,cropHeight:s,quality:c,eye:u,mouth:i,headRight:l,headLeft:e,headUp:d,headDown:o},function(t,e){!t.status&&t.message&&$.alert.toast(t.message),a&&a(t)})},faceDetect:function(t,a){var e=t.debug,n=void 0===e?0:e,i=t.cropType,e=void 0===i?1:i,i=t.cropHeight,i=void 0===i?300:i,t=t.quality,t=void 0===t?70:t;api.require("dwzBaiduFaceLive").faceDetect({debug:n,cropType:e,cropHeight:i,quality:t},function(t,e){!t.status&&t.message&&$.alert.toast(t.message),a&&a(t)})},testFaceRender:function(e,a){var t=template.render(e.html,a);this.html(t).initUI();var n=this.find("div.dwz-img-box");this.find("button").click(function(t){1==a.isLiveness?biz.dwzBaiduFaceLive.faceLiveness({debug:1,cropType:1,cropHeight:300,quality:70,eye:!0,mouth:!1,headRight:!1,headLeft:!1,headUp:!1,headDown:!1,headLeftOrRight:!1},function(t){t.status&&(t=template.render(e.tpl_img,t),n.append(t))}):biz.dwzBaiduFaceLive.faceDetect({debug:0,cropType:2,cropHeight:300,quality:70},function(t){t.status&&(t=template.render(e.tpl_img,t),n.append(t))})})},faceLogin:function(){biz.dwzBaiduFaceLive.faceLiveness({debug:1},function(t){t.status&&$.ajax({type:"POST",url:biz.server.getUrl(biz.server.login),dataType:"json",data:{faceBase64:t.face},cache:!1,global:!1,success:loginAjaxDone,error:biz.ajaxError})})}},biz.dwzBytedanceImageX={testConvertImgRender:function(t){var e=this,t=template.render(t.html,{imageList:[{url:"http://imagex.dwzteam.site/tos-cn-i-yrjczxapd7/test-1~tplv-yrjczxapd7-heic.webp"},{url:"http://imagex.dwzteam.site/tos-cn-i-yrjczxapd7/test-2~tplv-yrjczxapd7-heic.heic"},{url:"http://imagex.dwzteam.site/tos-cn-i-yrjczxapd7/test-3~tplv-yrjczxapd7-image.heic"},{url:"http://imagex.dwzteam.site/tos-cn-i-yrjczxapd7/test-4~tplv-yrjczxapd7-image.heic"},{url:"http://imagex.dwzteam.site/tos-cn-i-yrjczxapd7/test-5~tplv-yrjczxapd7-image.heic"},{url:"http://imagex.dwzteam.site/tos-cn-i-yrjczxapd7/test-6~tplv-yrjczxapd7-image.heic"}]});this.html(t).initUI(),window.api&&setTimeout(function(){var n=api.require("dwzBytedanceImageX");e.find("img[data-src-imagex]").each(function(t,e){var a=$(e);n.convertImg({debug:0,url:a.attr("data-src-imagex")},function(t){t.status?e.src=t.base64str:console.log(JSON.stringify(t))})})},600)}};