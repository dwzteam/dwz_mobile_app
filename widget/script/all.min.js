var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.template=e():t.template=e()}("undefined"!=typeof self?self:this,function(){return i={},a.m=n=[function(t,e,n){"use strict";function u(t,e){return e.onerror(t,e),(e=function(){return"{Template Error}"}).mappings=[],e.sourcesContent=[],e}var d=n(6),p=n(2),f=n(22),n=function a(t,e){var i=1<arguments.length&&void 0!==e?e:{};"string"!=typeof t?i=t:i.source=t,t=(i=p.$extend(i)).source,!0===i.debug&&(i.cache=!1,i.minimize=!1,i.compileDebug=!0),i.compileDebug&&(i.minimize=!1),i.filename&&(i.filename=i.resolveFilename(i.filename,i));var n=i.filename,r=i.cache,e=i.caches;if(r&&n){var o=e.get(n);if(o)return o}if(!t)try{t=i.loader(n,i),i.source=t}catch(t){var s=new f({name:"CompileError",path:n,message:"template not found: "+t.message,stack:t.stack});if(i.bail)throw s;return u(s,i)}var l=void 0,c=new d(i);try{l=c.build()}catch(s){if(s=new f(s),i.bail)throw s;return u(s,i)}o=function(e,n){try{return l(e,n)}catch(t){if(!i.compileDebug)return i.cache=!1,i.compileDebug=!0,a(i)(e,n);if(t=new f(t),i.bail)throw t;return u(t,i)()}};return o.mappings=l.mappings,o.sourcesContent=l.sourcesContent,o.toString=function(){return l.toString()},r&&n&&e.set(n,o),o};n.Compiler=d,t.exports=n},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyu]{1,5}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,e.matchToToken=function(t){var e={type:"invalid",value:t[0]};return t[1]?(e.type="string",e.closed=!(!t[3]&&!t[4])):t[5]?e.type="comment":t[6]?(e.type="comment",e.closed=!!t[7]):t[8]?e.type="regex":t[9]?e.type="number":t[10]?e.type="name":t[11]?e.type="punctuator":t[12]&&(e.type="whitespace"),e}},function(t,e,n){"use strict";function a(){this.$extend=function(t){return r(t=t||{},t instanceof a?t:this)}}var i=n(10),r=n(12),o=n(13),s=n(14),l=n(15),c=n(16),u=n(17),d=n(18),p=n(19),n=n(21),i={source:null,filename:null,rules:[d,u],escape:!0,debug:!!("undefined"==typeof window)&&"production"!==process.env.NODE_ENV,bail:!0,cache:!0,minimize:!0,compileDebug:!1,resolveFilename:n,include:o,htmlMinifier:p,htmlMinifierOptions:{collapseWhitespace:!0,minifyCSS:!0,minifyJS:!0,ignoreCustomFragments:[]},onerror:s,loader:c,caches:l,root:"/",extname:".art",ignore:[],imports:i};a.prototype=i,t.exports=new a},function(t,e){},function(t,e,n){"use strict";var a=n(5),i=n(0),r=n(23),n=function(t,e){return e instanceof Object?a({filename:t},e):i({filename:t,source:e})};n.render=a,n.compile=i,n.defaults=r,t.exports=n},function(t,e,n){"use strict";var a=n(0);t.exports=function(t,e,n){return a(t,n)(e)}},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function b(t,e){return Object.hasOwnProperty.call(t,e)}var a=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t},i=n(7),x=n(9),w="$data",z="$imports",l="print",$="include",T="extend",c="block",k="$$out",C="$$line",I="$$blocks",u="$$slice",E="$$from",j="$$options",_=JSON.stringify,a=(a(d,[{key:"getTplTokens",value:function(){return x.apply(void 0,arguments)}},{key:"getEsTokens",value:function(t){return i(t)}},{key:"getVariables",value:function(t){var e=!1;return t.filter(function(t){return"whitespace"!==t.type&&"comment"!==t.type}).filter(function(t){return"name"===t.type&&!e||(e="punctuator"===t.type&&"."===t.value,!1)}).map(function(t){return t.value})}},{key:"importContext",value:function(t){var e=this,n="",a=this.internal,i=this.dependencies,r=this.ignore,o=this.context,s=this.options.imports,l=this.CONTEXT_MAP;b(l,t)||-1!==r.indexOf(t)||(b(a,t)?(n=a[t],b(i,t)&&i[t].forEach(function(t){return e.importContext(t)})):n="$escape"===t||"$each"===t||b(s,t)?z+"."+t:w+"."+t,l[t]=n,o.push({name:t,value:n}))}},{key:"parseString",value:function(t){var e,n=t.value;n&&(e=k+"+="+_(n),this.scripts.push({source:n,tplToken:t,code:e}))}},{key:"parseExpression",value:function(t){var e=this,n=t.value,a=t.script,i=a.output,r=this.options.escape,o=a.code;i&&(o=!1===r||i===x.TYPE_RAW?k+"+="+a.code:k+"+=$escape("+a.code+")");a=this.getEsTokens(o);this.getVariables(a).forEach(function(t){return e.importContext(t)}),this.scripts.push({source:n,tplToken:t,code:o})}},{key:"checkExpression",value:function(t){for(var e=[[/^\s*}[\w\W]*?{?[\s;]*$/,""],[/(^[\w\W]*?\([\w\W]*?(?:=>|\([\w\W]*?\))\s*{[\s;]*$)/,"$1})"],[/(^[\w\W]*?\([\w\W]*?\)\s*{[\s;]*$)/,"$1}"]],n=0;n<e.length;){if(e[n][0].test(t)){t=t.replace.apply(t,s(e[n]));break}n++}try{return new Function(t),!0}catch(t){return!1}}},{key:"build",value:function(){function e(t,e){var n=e.line,e=e.start,e={generated:{line:r.length+d+1,column:1},original:{line:n+1,column:e+1}};return d+=t.split(/\n/).length-1,e}function n(t){return t.replace(/^[\t ]+|[\t ]$/g,"")}var t=this.options,a=this.context,i=this.scripts,r=this.stacks,o=this.source,s=t.filename,l=t.imports,c=[],u=b(this.CONTEXT_MAP,T),d=0;r.push("function("+w+"){"),r.push("'use strict'"),r.push(w+"="+w+"||{}"),r.push("var "+a.map(function(t){return t.name+"="+t.value}).join(",")),t.compileDebug?(r.push("try{"),i.forEach(function(t){t.tplToken.type===x.TYPE_EXPRESSION&&r.push(C+"=["+[t.tplToken.line,t.tplToken.start].join(",")+"]"),c.push(e(t.code,t.tplToken)),r.push(n(t.code))}),r.push("}catch(error){"),r.push("throw {"+["name:'RuntimeError'","path:"+_(s),"message:error.message","line:"+C+"[0]+1","column:"+C+"[1]+1","source:"+_(o),"stack:error.stack"].join(",")+"}"),r.push("}")):i.forEach(function(t){c.push(e(t.code,t.tplToken)),r.push(n(t.code))}),u&&(r.push(k+"=''"),r.push($+"("+E+","+w+","+I+")")),r.push("return "+k),r.push("}");var p=r.join("\n");try{var f=new Function(z,j,"return "+p)(l,t);return f.mappings=c,f.sourcesContent=[o],f}catch(t){for(var h=0,g=0,m=0,v=void 0;h<i.length;){var y=i[h];if(!this.checkExpression(y.code)){g=y.tplToken.line,m=y.tplToken.start,v=y.code;break}h++}throw{name:"CompileError",path:s,message:t.message,line:g+1,column:m+1,source:o,generated:v,stack:t.stack}}}}]),d);function d(t){var e,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var a=t.source,i=t.minimize,r=t.htmlMinifier;if(this.options=t,this.stacks=[],this.context=[],this.scripts=[],this.CONTEXT_MAP={},this.ignore=[w,z,j].concat(s(t.ignore)),this.internal=(o(e={},k,"''"),o(e,C,"[0,0]"),o(e,I,"arguments[1]||{}"),o(e,E,"null"),o(e,l,"function(){var s=''.concat.apply('',arguments);"+k+"+=s;return s}"),o(e,$,"function(src,data){var s="+j+".include(src,data||"+w+",arguments[2]||"+I+","+j+");"+k+"+=s;return s}"),o(e,T,"function(from){"+E+"=from}"),o(e,u,"function(c,p,s){p="+k+";"+k+"='';c();s="+k+";"+k+"=p+s;return s}"),o(e,c,"function(){var a=arguments,s;if(typeof a[0]==='function'){return "+u+"(a[0])}else if("+E+"){if(!"+I+"[a[0]]){"+I+"[a[0]]="+u+"(a[1])}else{"+k+"+="+I+"[a[0]]}}else{s="+I+"[a[0]];if(typeof s==='string'){"+k+"+=s}else{s="+u+"(a[1])}return s}}"),e),this.dependencies=(o(e={},l,[k]),o(e,$,[k,j,w,I]),o(e,T,[E,$]),o(e,c,[u,E,k,I]),e),this.importContext(k),t.compileDebug&&this.importContext(C),i)try{a=r(a,t)}catch(t){}this.source=a,this.getTplTokens(a,t.rules,this).forEach(function(t){t.type===x.TYPE_STRING?n.parseString(t):n.parseExpression(t)})}function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}a.CONSTS={DATA:w,IMPORTS:z,PRINT:l,INCLUDE:$,EXTEND:T,BLOCK:c,OPTIONS:j,OUT:k,LINE:C,BLOCKS:I,SLICE:u,FROM:E,ESCAPE:"$escape",EACH:"$each"},t.exports=a},function(t,e,n){"use strict";var a=n(8),i=n(1).default,r=n(1).matchToToken;t.exports=function(t){return t.match(i).map(function(t){return i.lastIndex=0,r(i.exec(t))}).map(function(t){return"name"===t.type&&a(t.value)&&(t.type="keyword"),t})}},function(t,e,n){"use strict";var a={abstract:!0,await:!0,boolean:!0,break:!0,byte:!0,case:!0,catch:!0,char:!0,class:!0,const:!0,continue:!0,debugger:!0,default:!0,delete:!0,do:!0,double:!0,else:!0,enum:!0,export:!0,extends:!0,false:!0,final:!0,finally:!0,float:!0,for:!0,function:!0,goto:!0,if:!0,implements:!0,import:!0,in:!0,instanceof:!0,int:!0,interface:!0,let:!0,long:!0,native:!0,new:!0,null:!0,package:!0,private:!0,protected:!0,public:!0,return:!0,short:!0,static:!0,super:!0,switch:!0,synchronized:!0,this:!0,throw:!0,transient:!0,true:!0,try:!0,typeof:!0,var:!0,void:!0,volatile:!0,while:!0,with:!0,yield:!0};t.exports=function(t){return a.hasOwnProperty(t)}},function(t,e,n){"use strict";function v(t,e,n){this.type=t,this.value=e,this.script=null,n?(this.line=n.line+n.value.split(/\n/).length-1,this.line===n.line?this.start=n.end:this.start=n.value.length-n.value.lastIndexOf("\n")-1):(this.line=0,this.start=0),this.end=this.start+this.value.length}function a(t,e){for(var n,a,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=[new v("string",t)],o=0;o<e.length;o++)for(var s=e[o],l=s.test.ignoreCase?"ig":"g",c=new RegExp(s.test.source,l),u=0;u<r.length;u++){var d=r[u],p=r[u-1];if("string"===d.type){for(var f=void 0,h=0,g=[],m=d.value;null!==(f=c.exec(m));)f.index>h&&(p=new v("string",m.slice(h,f.index),p),g.push(p)),p=new v("expression",f[0],p),f[0]=(n=p,a=void 0,(a=new String(n.value)).line=n.line,a.start=n.start,a.end=n.end,a),p.script=s.use.apply(i,f),g.push(p),h=f.index+f[0].length;h<m.length&&(p=new v("string",m.slice(h),p),g.push(p)),r.splice.apply(r,[u,1].concat(g)),u+=g.length-1}}return r}a.TYPE_STRING="string",a.TYPE_EXPRESSION="expression",a.TYPE_RAW="raw",a.TYPE_ESCAPE="escape",t.exports=a},function(e,t,n){"use strict";(function(t){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},t=Object.create(t),s=/["&'<>]/;t.$escape=function(t){return function(t){var e=""+t,n=s.exec(e);if(!n)return t;for(var a="",i=void 0,r=void 0,o=void 0,i=n.index,r=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:o="&#34;";break;case 38:o="&#38;";break;case 39:o="&#39;";break;case 60:o="&#60;";break;case 62:o="&#62;";break;default:continue}r!==i&&(a+=e.substring(r,i)),r=i+1,a+=o}return r!==i?a+e.substring(r,i):a}(function t(e){return"string"!=typeof e&&(e=null==e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e)),e}(t))},t.$each=function(t,e){if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)e(t[n],n);else for(var i in t)e(t[i],i)},e.exports=t}).call(t,n(11))},function(t,e){var n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==("undefined"==typeof window?"undefined":_typeof(window))&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t,e){var n=void 0,a=null===(a=t)?"Null":o.call(a).slice(8,-1);if("Object"===a?n=Object.create(e||{}):"Array"===a&&(n=[].concat(e||[])),n){for(var i in t)Object.hasOwnProperty.call(t,i)&&(n[i]=r(t[i],n[i]));return n}return t}var o=Object.prototype.toString;t.exports=r},function(t,e,i){"use strict";t.exports=function(t,e,n,a){return i(0)(a=a.$extend({filename:a.resolveFilename(t,a),bail:!0,source:null}))(e,n)}},function(t,e,n){"use strict";t.exports=function(t){console.error(t.name,t.message)}},function(t,e,n){"use strict";var a={__data:Object.create(null),set:function(t,e){this.__data[t]=e},get:function(t){return this.__data[t]},reset:function(){this.__data={}}};t.exports=a},function(t,e,n){"use strict";var a="undefined"==typeof window;t.exports=function(t){if(a)return n(3).readFileSync(t,"utf8");t=document.getElementById(t);return t.value||t.innerHTML}},function(t,e,n){"use strict";var f={test:/{{([@#]?)[ \t]*(\/?)([\w\W]*?)[ \t]*}}/,use:function(n,t,e,a){function i(t,e){console.warn((r.filename||"anonymous")+":"+(n.line+1)+":"+(n.start+1)+"\nTemplate upgrade: {{"+t+"}} -> {{"+e+"}}")}var r=this.options,o=this.getEsTokens(a),s=o.map(function(t){return t.value}),l={},c=void 0,u=!!t&&"raw",d=e+s.shift();switch("#"===t&&i("#value","@value"),d){case"set":a="var "+s.join("").trim();break;case"if":a="if("+s.join("").trim()+"){";break;case"else":var p=s.indexOf("if");a=~p?(s.splice(0,p+1),"}else if("+s.join("").trim()+"){"):"}else{";break;case"/if":a="}";break;case"each":(c=f._split(o)).shift(),"as"===c[1]&&(i("each object as value index","each object value index"),c.splice(1,1)),a="$each("+(c[0]||"$data")+",function("+(c[1]||"$value")+","+(c[2]||"$index")+"){";break;case"/each":a="})";break;case"block":(c=f._split(o)).shift(),a="block("+c.join(",").trim()+",function(){";break;case"/block":a="})";break;case"echo":d="print",i("echo value","value");case"print":case"include":case"extend":if(0!==s.join("").trim().indexOf("(")){(c=f._split(o)).shift(),a=d+"("+c.join(",")+")";break}default:~s.indexOf("|")&&(a=(p=o.reduce(function(t,e){var n=e.value,a=e.type;return"|"===n?t.push([]):"whitespace"!==a&&"comment"!==a&&(t.length||t.push([]),":"===n&&1===t[t.length-1].length?i("value | filter: argv","value | filter argv"):t[t.length-1].push(e)),t},[]).map(function(t){return f._split(t)})).reduce(function(t,e){var n=e.shift();return e.unshift(t),"$imports."+n+"("+e.join(",")+")"},p.shift().join(" ").trim())),u=u||"escape"}return l.code=a,l.output=u,l},_split:function(t){for(var e=0,n=(t=t.filter(function(t){t=t.type;return"whitespace"!==t&&"comment"!==t})).shift(),a=/\]|\)/,i=[[n]];e<t.length;){var r=t[e];"punctuator"===r.type||"punctuator"===n.type&&!a.test(n.value)?i[i.length-1].push(r):i.push([r]),n=r,e++}return i.map(function(t){return t.map(function(t){return t.value}).join("")})}};t.exports=f},function(t,e,n){"use strict";t.exports={test:/<%(#?)((?:==|=#|[=-])?)[ \t]*([\w\W]*?)[ \t]*(-?)%>/,use:function(t,e,n,a){return n={"-":"raw","=":"escape","":!1,"==":"raw","=#":"raw"}[n],e&&(a="/*"+a+"*/",n=!1),{code:a,output:n}}}},function(t,e,r){"use strict";var o="undefined"==typeof window;t.exports=function(t,e){var n,a,i;return o&&(a=r(20).minify,i=e.htmlMinifierOptions,e=e.rules.map(function(t){return t.test}),(n=i.ignoreCustomFragments).push.apply(n,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e)),t=a(t,i)),t}},function(t,e){("object"==(typeof t==="undefined"?"undefined":_typeof(t))&&"object"==_typeof(t.exports)?t.exports:window).noop=function(){}},function(t,e,r){"use strict";var o="undefined"==typeof window,s=/^\.+\//;t.exports=function(t,e){var n,a,i;return o&&(n=r(3),a=e.root,i=e.extname,t=s.test(t)?(e=!(e=e.filename)||t===e?a:n.dirname(e),n.resolve(e,t)):n.resolve(a,t),n.extname(t)||(t+=i)),t}},function(t,e,n){"use strict";var a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_typeof(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,Error),i);function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t.message));return e.name="TemplateError",e.message=function(t){var e=t.name,n=t.source,a=t.path,i=t.line,r=t.column,o=t.generated,s=t.message;if(!n)return s;var t=n.split(/\n/),l=Math.max(i-3,0),n=Math.min(t.length,i+3),n=t.slice(l,n).map(function(t,e){e=e+l+1;return(e===i?" >> ":"    ")+e+"| "+t}).join("\n");return(a||"anonymous")+":"+i+":"+r+"\n"+n+"\n\n"+e+": "+s+(o?"\n   generated: "+o:"")}(t),Error.captureStackTrace&&Error.captureStackTrace(e,e.constructor),e}t.exports=a},function(t,e,n){"use strict";t.exports=n(2)}],a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=4);function a(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}var n,i});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dwz=function t(e,n){return new t.prototype.init(e,n)};function validateCallback(t,e,n){var a=$(t);if(!a.valid())return!1;var i,r=a.serializeArray();return n&&($.isFunction(n)?(n=n.call(t,a),r.forEach(function(t,e){t.name.startsWith("__")||n.push(t)}),r=n):r.push({name:"_data",value:JSON.stringify(n)})),"application/json"==a.attr("enctype")?(i={},r.forEach(function(t){i[t.name]=t.value}),$.ajax({global:!0,type:t.method||"POST",url:a.attr("action"),data:JSON.stringify(i),dataType:"json",contentType:"application/json; charset=UTF-8",cache:!1,success:e||dwz.ajaxDone,error:dwz.ajaxError})):$.ajax({global:!0,type:t.method||"POST",url:a.attr("action"),data:r,dataType:"json",cache:!1,success:e||dwz.ajaxDone,error:dwz.ajaxError}),!1}function iframeCallback(t,e){var n=$(t),a=$("#callbackframe");if(!n.valid())return!1;0==a.size()&&($("body").append('<iframe id="callbackframe" name="callbackframe" src="about:blank" style="display:none"></iframe>'),a=$("#callbackframe")),t.target="callbackframe",_iframeResponse(a,e||dwz.ajaxDone)}function _iframeResponse(a,i){var r=a.get(0),o=$(document);o.trigger("ajaxStart");function s(t){if(a.off("load",s),o.trigger("ajaxStop"),"javascript:'%3Chtml%3E%3C/html%3E';"!=r.src&&"javascript:'<html></html>';"!=r.src){var e,n=r.contentDocument||r.document;if(!(n.readyState&&"complete"!=n.readyState||n.body&&"false"==n.body.innerHTML)){if(n.XMLDocument)e=n.XMLDocument;else if(n.body)try{e=r.contentDocument.body.innerText,e=$.parseJSON(e)}catch(t){e=n.body.innerText}else e=n;i(e)}}}a.on("load",s)}function navViewAjaxDone(t){dwz.ajaxDone(t),t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok&&("closeCurrent"==t.callbackType?$.navView.close(!0,!0):"forward"==t.callbackType&&$.navView.reload({url:t.forwardUrl}),t.navTabId?$.navTab.open({tabid:t.navTabId,url:t.forwardUrl}):t.navViewId&&$.navView.open({rel:t.navViewId,url:t.forwardUrl}))}function navViewAjaxDoneReload(t){dwz.ajaxDone(t),$.isAjaxOkStatus(t)&&$.navView.getBoxs(3).forEach(function(t){0==t.find("form.dwz-list-form").trigger("submit").size()&&t.data("ajaxDoneReload")&&$.navView.reload()})}function navViewAjaxDoneClose(t){$.isAjaxOkStatus(t)&&$.navView.close(!0,!0),navViewAjaxDoneReload(t)}function dialogAjaxDone(t){dwz.ajaxDone(t),t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok&&("closeCurrent"==t.callbackType?$.dialog.close():"forward"==t.callbackType&&$.dialog.open({url:t.forwardUrl}),t.navTabId?$.navTab.open({tabid:t.navTabId,url:t.forwardUrl}):t.navViewId&&$.navView.open({rel:t.navViewId,url:t.forwardUrl}))}function ajaxConfirm(t){var e=$.extend({msg:"",url:"",data:{},success:dwz.ajaxDone},t);$.alert.confirm(e.msg,{okCall:function(){$.ajax({type:"post",url:e.url,data:e.data,dataType:"json",cache:!1,success:e.success,error:dwz.ajaxError})}})}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}window.$=window.$||dwz,dwz.version="mobile 1.0.0",dwz.rootNodeRE=/^(?:body|html)$/i,dwz.config={pageInfo:{pageNum:"pageNum"},statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},unitBox:"unitBox",rreturn:/\r/g,r20:/%20/g,rCRLF:/\r?\n/g,rsubmitterTypes:/^(?:submit|button|image|reset|file)$/i,rsubmittable:/^(?:input|select|textarea|keygen)/i,rcheckableType:/^(?:checkbox|radio)$/i,rnotwhite:/\S+/g,frag:{}},dwz.regPlugins=[],dwz.extend=function(){var t,e=arguments[0]||{},n=1,a=arguments.length;for("boolean"==typeof e&&(e=arguments[1]||{},n=2),"object"===(void 0===e?"undefined":_typeof(e))||e||(e={}),a==n&&(e=this,--n);n<a;n++)if(null!=(t=arguments[n]))for(var i in t){e[i];var r=t[i];e!==r&&void 0!==r&&(e[i]=r)}return e},dwz.extend({eavl:function(t){return t?(0,eval)(t):null},isFunction:function(t){return"function"==typeof t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},instanceOf:function(t){return!!t&&t instanceof dwz.prototype.init},inArray:function(t,e,n){return null==e?-1:-1!=[].indexOf.call(e,t,n)},makeArray:function(t,e){e=e||[];return null!=t&&[].push.call(e,t),e},merge:function(t,e){for(var n=+e.length,a=0,i=t.length;a<n;a++)t[i++]=e[a];return t.length=i,t},each:function(t,e,n){if(dwz.isArray(t)){for(var a=[],i=0;i<t.length;i++){var r=e.call(t[i],i,t[i],n);if(void 0!==r&&a.push(r),!1===r)break}return a}for(var o=[],i=0;i<t.length;i++){var s=t.get(i),l=e.call(s,i,s,n);if(!l&&void 0!==l||o.push(s),!1===l)break}return dwz(o)},get:function(t,e){return dwz.instanceOf(t)?t.get(e):t},error:function(t){throw new Error(t)},urlInterceptor:null,getUrlInterceptor:function(t){if(!t)return dwz.urlInterceptor;t=t.getParams();return t.dwz_interceptor?dwz.eavl(t.dwz_interceptor):dwz.urlInterceptor},getUrlCallback:function(t){if(!t)return null;t=t.getParams();return t.dwz_callback?dwz.eavl(t.dwz_callback):null},templateWrap:function(t){var e={tpl:t||""},t=/<script(.|\n)*?>(.|\n|\r\n)*?<\/script>/gi,n=e.tpl.match(t);if(n)for(var a=/<script(.|\n)*?>((.|\n|\r\n)*)?<\/script>/im,i=n.length,r=0;r<i;r++){var o=$(n[r]),s=o.attr("type"),o=o.attr("id");"text/html"==s&&o&&(s=n[r].match(a),e[o]=s[2])}return e.tpl=e.tpl.replace(t,""),e}}),dwz.config.selector={":input":"input, select, textarea, button",":text":"input:not([type=radio]):not([type=checkbox]):not([type=submit]):not([type=reset]):not([type=button]):not([type=file]):not([type=hidden]):not([type=image])",":password":"input[type=password]",":radio":"input[type=radio]",":checkbox":"input[type=checkbox]",":submit":"input[type=submit], button[type=submit]",":reset":"input[type=reset], button[type=reset]",":button":"input[type=button], input[type=submit], input[type=reset], input[type=image], button",":file":"input[type=file]",":image":"input[type=image]",":hidden":"input[type=hidden]"},dwz.prototype.init=function(t,e){if(this.selector=t,this.context=e,this.elements=[],this.length,!t)return this;var n=1;if("string"==typeof t)if(t.startsWith(">")&&(t=":scope"+t),e&&("string"==typeof e?e=document.querySelector(e):dwz.instanceOf(e)&&(e=1<(n=e.elements.length)?e.elements:e.elements[0])),this.context=e||document,1<n)for(var a=0;a<this.context.length;a++){var i=this.context[a].querySelectorAll(dwz.config.selector[t]||t);Array.prototype.push.apply(this.elements,i)}else 0<=t.indexOf("<")&&0<=t.indexOf(">")?this.elements=dwz.parseHTML(t,!0):this.elements=this.context.querySelectorAll(dwz.config.selector[t]||t);else{if(dwz.instanceOf(t))return t;if(t instanceof Element||t===document||t===window)this.elements=[t];else if(t instanceof NodeList||dwz.isArray(t))this.elements=t;else if(dwz.isFunction(t))return document.addEventListener("DOMContentLoaded",t),window.onload}return this.context||(this.context=document),this.length=this.elements.length,this},dwz.fn=dwz.extend(dwz.prototype.init.prototype,{extend:function(t){dwz.extend(dwz.fn,t)},toArray:function(){return this.elements},size:function(){return this.length},eq:function(t){return dwz(this.elements[t])},get:function(t){return void 0===t?this.elements:this.elements[t]},first:function(){return this.eq(0)},last:function(){return this.eq(this.elements.length-1)},parentNode:function(){return this.get(0).parentNode},parent:function(){return $(this.parentNode())},parentsUntil:function(t){for(var e=this.get(0),n=document.getElementsByTagName("body"),a=0;a<100;){if(e=e.parentNode,t.call(e,a))return dwz(e);if(e==n||e==document)break;a++}return dwz()},parentsUnitBox:function(t){return this.parentsUntil(function(){return dwz.hasClass(this,t||dwz.config.unitBox)})},children:function(t){return this.find(":scope > "+(t||"*"))},find:function(t){return 0==this.size()?this:dwz(t,this)},filter:function(t){for(var e=[],n=0;n<this.length;n++){var a=this.get(n);t.call(a,n)&&e.push(a)}return dwz(e)},each:function(t,e){return dwz.each(this,t,e)},is:function(t){var e=!1,n=this.get(0);return $(t,this.parentNode()).each(function(){this==n&&(e=!0)}),e},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}}),dwz.extend({getStorage:function(t){t=localStorage.getItem(t);if(t)return JSON.parse(t)},setStorage:function(t,e){localStorage.setItem(t,JSON.stringify(e))},removeStorage:function(t){localStorage.removeItem(t)},clientX:function(t){return t.pageX||t.clientX||(t.targetTouches?t.targetTouches[0].clientX:0)},clientY:function(t){return t.pageY||t.clientY||(t.targetTouches?t.targetTouches[0].clientY:0)},speed:{pre:{x:0,y:0,speedX:0,speedY:0,time:0},init:!1,getX:function(){return dwz.speed.pre.speedX},getY:function(){return dwz.speed.pre.speedY},cal:function(t){dwz.speed.init||(dwz.speed.init=!0,dwz.speed.pre.x=t.clientX,dwz.speed.pre.y=t.clientY,dwz.speed.pre.time=(new Date).getTime());var e=dwz.clientX(t),n=dwz.clientY(t),a=e-dwz.speed.pre.x,i=n-dwz.speed.pre.y,r=(new Date).getTime(),t=r-dwz.speed.pre.time;return dwz.speed.pre.speedX=0<t?a/t*1e3:a,dwz.speed.pre.speedY=0<t?i/t*1e3:i,dwz.speed.pre.x=e,dwz.speed.pre.y=n,dwz.speed.pre.time=r,dwz.speed.pre}},event:{hasTouch:"ontouchstart"in window,type:{pageClear:"pageClear",pageShow:"pageShow",pageHide:"pageHide"},add:function(n,t,a,i){var r=dwz.data(n,"_events")||{};i||(i=a,a=void 0),dwz.each(t.split(/\s+/),function(t){function e(t){void 0!==a&&(t.data=a),!1===i.call(n,t)&&(t.stopPropagation(),t.preventDefault())}r[this]=r[this]||[],r[this].push({handler:e,fn:i}),n.addEventListener(this,e,!1)}),dwz.data(n,"_events",r)},remove:function(a,t,i){var r=dwz.data(a,"_events")||{};dwz.each(t.split(/\s+/),function(t){var e=this;if(r[e]){for(var n=0;n<r[e].length;n++)if(i){if(i===r[e][n].fn){a.removeEventListener(e,r[e][n].handler,!1),r[e].splice(n,1);break}}else a.removeEventListener(e,r[e][n].handler,!1);void 0===i&&(r[e]=[])}}),dwz.data(a,"_events",r)},trigger:function(t,e,n){e=new Event(e);void 0!==n&&(e.data=n),t.dispatchEvent(e)},isBind:function(t,e,n){var a=dwz.data(t,"_events")||{};if(a[e]&&0<a[e].length){if(void 0===n)return!0;for(var i=0;i<a[e].length;i++)if(n===a[e][i].fn)return!0}return!1},getDistance:function(t,e,n,a){t=Math.abs(n-t),e=Math.abs(a-e);return Math.sqrt(t*t+e*e)},getCenterPos:function(t,e,n,a){var i=Math.min(t,n),t=Math.max(t,n),n=Math.min(e,a);return{x:i+(t-i)/2,y:n+(Math.max(e,a)-n)/2}}},contains:document.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e=e&&e.parentNode;)if(e===t)return!0;return!1},offset:function(t){t=t.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},position:function(t){if(t){var e=dwz.offsetParent(t),n=dwz.offset(t),a=dwz.rootNodeRE.test(e.nodeName)?{top:0,left:0}:dwz.offset(e);return n.top-=parseFloat(t.style.marginTop)||0,n.left-=parseFloat(t.style.marginLeft)||0,a.top+=parseFloat(e.style.borderTopWidth)||0,a.left+=parseFloat(e.style.borderLeftWidth)||0,{top:n.top-a.top,left:n.left-a.left}}},offsetParent:function(t){for(var e=t.offsetParent||document.body;e&&!dwz.rootNodeRE.test(e.nodeName)&&"static"==e.style.position;)e=e.offsetParent;return e},hasClass:function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},addClass:function(t,e){var n=t.className.replace(/[\t\r\n]/g," ");return dwz.each(e.split(/\s+/),function(){dwz.hasClass(t,this)||(n+=" "+this)}),t.className=n.replace(/^\s+|\s+$/g,""),t},removeClass:function(t,e){var n=" "+t.className.replace(/[\t\r\n]/g," ")+" ";return dwz.each(e.split(/\s+/),function(){for(;0<=n.indexOf(" "+this+" ");)n=n.replace(" "+this+" "," ")}),t.className=n.replace(/^\s+|\s+$/g,""),t},toggleClass:function(t,e){return this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e),t},attr:function(t,e,n){return t!==document&&t!==window&&(void 0===n?t.getAttribute(e):void(null===n?t.removeAttribute(e):t.setAttribute(e,n)))},prop:function(t,e,n){return!!$.inArray(e,["checked","selected","disabled"])&&(void 0===n?t[e]:void(t[e]=n&&!0))},css:function(t,e,n){if(void 0!==n)t.style[e]=n;else{if("string"==typeof e)return(t.currentStyle||document.defaultView.getComputedStyle(t,null))[e];for(var a in e)t.style[a]=e[a]}},data:function(t,e,n){if(t.dwz_data=t.dwz_data||{},void 0===e)return t.dwz_data;if("string"==typeof e){var a=dwz.camelCase(e);if(void 0===n)return t.dwz_data[a];t.dwz_data[a]=n}else if("object"===(void 0===e?"undefined":_typeof(e)))for(var i in e){a=dwz.camelCase(i);t.dwz_data[a]=e[i]}},removeData:function(t,e){t.dwz_data&&delete t.dwz_data[e]},cacheCss:function(t,e,n){var a=dwz.data(t,"_css")||{},i=dwz.css(t,e);return n&&i!=n&&(a[e]=i,dwz.data(t,"_css",a)),a[e]},camelCase:function(t){return t.replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})},html:function(t,e){if(void 0===e)return t.innerHTML;"string"==typeof e?t.innerHTML=e.replace(/<script(.|\n)*?>(.|\n|\r\n)*?<\/script>/gi,""):t.innerHTML=e},text:function(t,e){if(void 0===e){var n=t.innerText||t.textContent;return n?n.trim():""}void 0!==t.innerText?t.innerText=e:t.textContent=e},param:function(t){var e="";if(dwz.isArray(t))for(var n=0;n<t.length;n++)e+=(e?"&":"")+t[n].name+"="+(t[n].value+"").encodeParam();else for(var a in t)e+=(e?"&":"")+a+"="+(t[a]+"").encodeParam();return e},parseJSON:function(t){return JSON.parse(t+"")},parseXML:function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||dwz.error("Invalid XML: "+t),e},parseHTML:function(t,e){var n=document.createElement("div");return n.innerHTML=t,e?n.querySelectorAll(":scope > *"):n.querySelector("*")}}),dwz.extend(String.prototype,{trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return 0<=e&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},getRequestURI:function(){var t=this.indexOf("?");return-1==t?this:this.substr(0,t)},getParams:function(t){var e={},n=this.indexOf("?");if(-1!=n)for(var a=this.substr(n+1).split("&"),i=0;i<a.length;i++){var r=a[i].split("="),o=t?r[1].encodeParam():r[1];e[r[0]]=1<r.length?o:""}return e},encodeParam:function(){return encodeURIComponent(this).replace(dwz.config.rCRLF,"\r\n").replace(dwz.config.r20,"+")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(){return new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this)},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var t=0;t<this.length;t+=1){var e=this.charAt(t);if(" "!=e&&"\n"!=e&&"\t"!=e&&"\r"!=e)return!1}return!0},isMobile:function(){return new RegExp(/(^[0-9]{11,11}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf("://"+document.domain)},parseCurrency:function(t){var e=parseFloat(this);return parseFloat(e.toFixed(t||2))}}),dwz.extend(Number.prototype,{formatCurrency:function(t){var e=(e=this).toString().replace(/\$|\,/g,"");isNaN(e)&&(e="0");var n=e==(e=Math.abs(e)),a=(e=Math.floor(100*e+.50000000001))%100;if(e=Math.floor(e/100).toString(),a<10&&(a="0"+a),t)for(var i=0;i<Math.floor((e.length-(1+i))/3);i++)e=e.substring(0,e.length-(4*i+3))+","+e.substring(e.length-(4*i+3));return(n?"":"-")+e+"."+a},parseCurrency:function(t){return parseFloat(this.toFixed(t||2))}}),dwz.fn.extend({initUI:function(){return this.each(function(){var e=$(this);$.each(dwz.regPlugins,function(t){this(e)})})},on:function(t,e,n){return this.each(function(){dwz.event.add(this,t,e,n)})},off:function(t,e){return this.each(function(){dwz.event.remove(this,t,e)})},trigger:function(t,e){return this.each(function(){dwz.event.trigger(this,t,e)})},isBind:function(t,e){return dwz.event.isBind(this.get(0),t,e)},onPageClear:function(t,e){return this.on(dwz.event.type.pageClear,t,e)},offPageClear:function(t,e){return this.off(dwz.event.type.pageClear,t,e)},triggerPageClear:function(t){return this.trigger(dwz.event.type.pageClear,t)},click:function(t,e){return $.event.hasTouch&&$.fn.touchwipe?this.touchwipe({touch:e||t,data:e?t:void 0}):this.on($.event.hasTouch?"touchstart":"click",t,e)},change:function(t,e){return this.on("change",t,e)},offset:function(){return dwz.offset(this.get(0))},position:function(){return dwz.position(this.get(0))},offsetParent:function(){return dwz.offsetParent(this.get(0))},show:function(){return this.each(function(){var t=dwz.cacheCss(this,"display","none")||"block";this.style.display=t})},hide:function(){return this.each(function(){dwz.cacheCss(this,"display","none"),this.style.display="none"})},toggle:function(){return this.each(function(){var t=dwz.cacheCss(this,"display","none")||"block";this.style.display="none"==this.style.display?t:"none"})},hasClass:function(t){return 0===this.size()||dwz.hasClass(this.get(0),t)},addClass:function(t){return this.each(function(){dwz.addClass(this,t)})},removeClass:function(t){return this.each(function(){dwz.removeClass(this,t)})},toggleClass:function(t){return this.each(function(){dwz.toggleClass(this,t)})},attr:function(t,e){return void 0===e?dwz.attr(this.get(0),t):this.each(function(){dwz.attr(this,t,e)})},removeAttr:function(t){return this.each(function(){dwz.attr(this,t,null)})},prop:function(t,e){return void 0===e?dwz.prop(this.get(0),t):this.each(function(){dwz.prop(this,t,e)})},data:function(t,e){return"object"===(void 0===t?"undefined":_typeof(t))||void 0===e?dwz.data(this.get(0),t):this.each(function(){dwz.data(this,t,e)})},css:function(e,t){return void 0!==t?this.each(function(){this.style[e]=t}):void 0===e?this.get(0).style:"string"==typeof e?dwz.css(this.get(0),e):this.each(function(){for(var t in e)this.style[t]=e[t]})},width:function(t){var e=parseFloat(this.css("width"));return t&&(e+=parseFloat(this.css("marginLeft")),e+=parseFloat(this.css("marginRight"))),e},height:function(t){var e=parseFloat(this.css("height"));return t&&(e+=parseFloat(this.css("marginTop")),e+=parseFloat(this.css("marginBottom"))),e},outerWidth:function(t){return this.width(t)+parseFloat(this.css("borderLeft"))+parseFloat(this.css("borderRight"))},outerHeight:function(t){return this.height(t)+parseFloat(this.css("borderTop"))+parseFloat(this.css("borderTop"))},html:function(t){var e=dwz.html(this.get(0),t);return void 0===t?e:this},text:function(t){var e=dwz.text(this.get(0),t);return void 0===t?e:this},prepend:function(t){var e=this.get(0);return $(t).each(function(){e.insertBefore(this,e.firstChild)}),this},append:function(t){var e=this.get(0);return $(t).each(function(){e.appendChild(this)}),this},after:function(t){return this.parent().append(t)},prependTo:function(e){return dwz.instanceOf(e)&&(e=e.get(0)),this.each(function(t){e.insertBefore(this,e.firstChild)}),this},appendTo:function(e){return dwz.instanceOf(e)&&(e=e.get(0)),this.each(function(t){e.appendChild(this)}),this},afterTo:function(t){return dwz.instanceOf(t)&&(t=t.get(0)),this.appendTo(t.parentNode)},remove:function(){return this.each(function(t){this.parentNode.removeChild(this)})},wrap:function(e){var n=dwz.isFunction(e);return this.each(function(t){t=dwz.parseHTML(n?e.call(this,t):e);this.parentNode.appendChild(t),t.appendChild(this)})},clone:function(){return dwz(this.get(0).cloneNode(!0))},serialize:function(){return dwz.param(this.serializeArray())},serializeArray:function(){var n=[];return this.is("form")&&this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)&&(this.checked||!dwz.config.rcheckableType.test(t))}).each(function(){var t=$(this).val()||"",e=this.name;n.push({name:e,value:t})}),n},serializeMap:function(){var e={};return this.is("form")&&this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)&&(this.checked||!dwz.config.rcheckableType.test(t))}).each(function(){var t=$(this).val()||"";e[this.name]="number"==this.type||"range"==this.type?parseFloat(t)||0:t}),e},getPagerForm:function(t){var e=$(this.attr("rel")),n=e.get(0);return n&&("number"==typeof t?n[dwz.config.pageInfo.pageNum].value=t:"next"==t&&(n[dwz.config.pageInfo.pageNum].value=parseInt(n[dwz.config.pageInfo.pageNum].value)+1)),e},val:function(e){var n,t,a,i=this.get(0);return arguments.length?(a=dwz.isFunction(e),this.each(function(t){1===this.nodeType&&(null==(t=a?e.call(this,t,dwz(this).val()):e)?t="":"number"==typeof t?t+="":dwz.isArray(t)&&(t=dwz.each(t,function(){return null==this?"":this+""})),(n=dwz.valHooks[this.type]||dwz.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):i?(n=dwz.valHooks[i.type]||dwz.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(t=n.get(i,"value"))?t:"string"==typeof(t=i.value)?t.replace(dwz.config.rreturn,""):null==t?"":t:void 0},hrefFix:function(){return this.each(function(){var t=$(this),e=t.attr("href");e&&"javascript:"!=e&&t.attr("data-href",e).attr("href","javascript:")})}}),dwz.extend({valHooks:{option:{get:function(t){var e=dwz.attr(t,"value");return null!=e?e:dwz.text(t)}},select:{get:function(t){for(var e,n=t.options,a=t.selectedIndex,i="select-one"===t.type||a<0,r=i?null:[],o=i?a+1:n.length,s=a<0?o:i?a:0;s<o;s++)if(((e=n[s]).selected||s===a)&&!e.disabled&&(!e.parentNode.disabled||!dwz.nodeName(e.parentNode,"optgroup"))){if(e=dwz(e).val(),i)return e;r.push(e)}return r},set:function(t,e){for(var n,a,i=t.options,r=dwz.makeArray(e),o=i.length;o--;)((a=i[o]).selected=dwz.inArray(a.value,r))&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),dwz.each(["radio","checkbox"],function(){dwz.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"1":t.value},set:function(t,e){if(dwz.isArray(e))return t.checked=dwz.inArray(dwz(t).val(),e)}}}),dwz.extend({active:0,ajaxSettings:{type:"POST",global:!1,cache:!1,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"*",headers:{"X-Requested-With":"XMLHttpRequest"},accepts:{"*":"*/".concat("*"),text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{json:dwz.parseJSON,xml:dwz.parseXML}},ajaxSetup:function(t){return dwz.extend(dwz.ajaxSettings,t)},dataFilter:function(t,e){var n=t[e.responseFields[e.dataType]||e.responseFields.text]||t.responseText,e=e.converters[e.dataType];return e&&(n=e.call(t,n)),n},ajax:function(t){var e=dwz.extend({},dwz.ajaxSettings,t);e.type=e.type.toUpperCase(),e.header&&dwz.extend(e.headers,e.header),e.global&&0==dwz.active++&&dwz.event.trigger(document,"ajaxStart");var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHttp"),a=e.url,i="";e.cache||(a=e.url+(-1==e.url.indexOf("?")?"?":"&")+"t="+(new Date).getTime()),"GET"!=e.type||!e.data||(t="string"==typeof e.data?e.data:dwz.param(e.data))&&(a+=(-1==a.indexOf("?")?"?":"&")+t),window.debuggap&&0!==a.indexOf("http")&&(a=window.location.origin+"/"+a),n.open(e.type,a,e.async);var r,a=(a=e.accepts[e.dataType])?a+", "+e.accepts["*"]+"; q=0.01":e.accepts["*"];for(r in n.setRequestHeader("Accept",a),e.headers)n.setRequestHeader(r,e.headers[r]);"POST"==e.type&&e.data&&("POST"==e.type&&e.contentType&&n.setRequestHeader("content-type",e.contentType),i="string"==typeof e.data?e.data:dwz.param(e.data)),n.onreadystatechange=function(){var t;4==n.readyState&&(t=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,200<=n.status&&n.status<300||304===n.status||0==n.status&&"file:"==t?(t=dwz.dataFilter(n,e),e.success&&e.success(t,n.status,n)):e.error&&e.error(n,n.status),e.complete&&e.complete(n,n.status),e.global&&!--dwz.active&&dwz.event.trigger(document,"ajaxStop"))},n.send(i)},setRegional:function(t,e){dwz.regional||(dwz.regional={}),dwz.regional[t]=e}}),function(){var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");function LZ(t){return(t<0||9<t?"":"0")+t}function formatDate(t,e){e+="";var n,a="",i=0,r="",o=t.getYear()+"",s=t.getMonth()+1,l=t.getDate(),c=t.getDay(),u=t.getHours(),d=t.getMinutes(),t=t.getSeconds(),p={};for(o.length<4&&(o=""+(+o+1900)),p.y=""+o,p.yyyy=o,p.yy=o.substring(2,4),p.M=s,p.MM=LZ(s),p.MMM=MONTH_NAMES[s-1],p.NNN=MONTH_NAMES[s+11],p.d=l,p.dd=LZ(l),p.E=DAY_NAMES[c+7],p.EE=DAY_NAMES[c],p.H=u,p.HH=LZ(u),p.h=0==u?12:12<u?u-12:u,p.hh=LZ(p.h),p.K=11<u?u-12:u,p.k=u+1,p.KK=LZ(p.K),p.kk=LZ(p.k),p.a=11<u?"PM":"AM",p.m=d,p.mm=LZ(d),p.s=t,p.ss=LZ(t);i<e.length;){for(n=e.charAt(i),r="";e.charAt(i)==n&&i<e.length;)r+=e.charAt(i++);null!=p[r]?a+=p[r]:a+=r}return a}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,n,a){for(var i=a;n<=i;i--){var r=t.substring(e,e+i);if(r.length<n)return null;if(_isInteger(r))return r}return null}function parseDate(t,e){t+="",e+="";for(var n,a,i,r=0,o=0,s="",l=new Date(1900,0,1),c=l.getYear(),u=l.getMonth()+1,d=1,p=l.getHours(),f=l.getMinutes(),h=l.getSeconds(),g="";o<e.length;){for(n=e.charAt(o),s="";e.charAt(o)==n&&o<e.length;)s+=e.charAt(o++);if("yyyy"==s||"yy"==s||"y"==s){if("yyyy"==s&&(i=a=4),"yy"==s&&(i=a=2),"y"==s&&(a=2,i=4),null==(c=_getInt(t,r,a,i)))return 0;r+=c.length,2==c.length&&(c=70<c?+c+1900:+c+2e3)}else if("MMM"==s||"NNN"==s){for(var m=u=0;m<MONTH_NAMES.length;m++){var v=MONTH_NAMES[m];if(t.substring(r,r+v.length).toLowerCase()==v.toLowerCase()&&("MMM"==s||"NNN"==s&&11<m)){12<(u=m+1)&&(u-=12),r+=v.length;break}}if(u<1||12<u)return 0}else if("EE"==s||"E"==s)for(m=0;m<DAY_NAMES.length;m++){var y=DAY_NAMES[m];if(t.substring(r,r+y.length).toLowerCase()==y.toLowerCase()){r+=y.length;break}}else if("MM"==s||"M"==s){if(null==(u=_getInt(t,r,s.length,2))||u<1||12<u)return 0;r+=u.length}else if("dd"==s||"d"==s){if(null==(d=_getInt(t,r,s.length,2))||d<1||31<d)return 0;r+=d.length}else if("hh"==s||"h"==s){if(null==(p=_getInt(t,r,s.length,2))||p<1||12<p)return 0;r+=p.length}else if("HH"==s||"H"==s){if(null==(p=_getInt(t,r,s.length,2))||p<0||23<p)return 0;r+=p.length}else if("KK"==s||"K"==s){if(null==(p=_getInt(t,r,s.length,2))||p<0||11<p)return 0;r+=p.length}else if("kk"==s||"k"==s){if(null==(p=_getInt(t,r,s.length,2))||p<1||24<p)return 0;r+=p.length,p--}else if("mm"==s||"m"==s){if(null==(f=_getInt(t,r,s.length,2))||f<0||59<f)return 0;r+=f.length}else if("ss"==s||"s"==s){if(null==(h=_getInt(t,r,s.length,2))||h<0||59<h)return 0;r+=h.length}else if("a"==s){if("am"==t.substring(r,r+2).toLowerCase())g="AM";else{if("pm"!=t.substring(r,r+2).toLowerCase())return 0;g="PM"}r+=2}else{if(t.substring(r,r+s.length)!=s)return 0;r+=s.length}}if(r!=t.length)return 0;if(2==u)if(c%4==0&&c%100!=0||c%400==0){if(29<d)return 0}else if(28<d)return 0;return(4==u||6==u||9==u||11==u)&&30<d?0:(p<12&&"PM"==g?p=+p+12:11<p&&"AM"==g&&(p-=12),new Date(c,u-1,d,p,f,h))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),n=this.getMonth()+1,a=this.getDate(),i=1900,r=0,o=1,a=replaceTmEval(t.replaceAll("%y",e).replaceAll("%M",n).replaceAll("%d",a)).split("-");return 0<a.length&&(i=a[0]),1<a.length&&(r=a[1]-1),2<a.length&&(o=a[2]),new Date(i,r,o).formatDate("yyyy-MM-dd")}}(),function(s){s.plus={openImg:function(a){var e=api.require("FNPhotograph"),i=api.require("imageFilter");e.open({path:"fs://savePath",album:!0,quality:"medium"},function(t){var n;"takePhoto"==t.eventType&&(console.log(JSON.stringify(t)),e.close(),n="small_"+(new Date).getTime()+".jpg",i.compress({img:t.imagePath,quality:.5,scale:.5,save:{imgPath:"fs://smallImage",imgName:n}},function(t,e){console.log(JSON.stringify(t)),t.status?(console.log("fs://smallImage/"+n),a("fs://smallImage/"+n)):console.log(JSON.stringify(e))}))})},chooseImage:function(e){var n=this;api.actionSheet({title:e.title||"上传图片",cancelTitle:"取消",buttons:["拍照","从手机相册选择"]},function(t){switch(t.buttonIndex){case 0:break;case 1:e.sourceType="camera",n.captureImage(e);break;case 2:e.sourceType="library",n.captureImage(e)}})},captureImage:function(t){var n=s.extend({sourceType:"camera",maxWidth:800,maxHeight:800,callback:null,destinationType:"url"},t);if(biz.checkPermission){if("camera"==n.sourceType&&!biz.checkPermission("camera","摄像头"))return;if("library"==n.sourceType&&!biz.checkPermission("photos","相册"))return}api.getPicture({sourceType:n.sourceType,encodingType:"jpg",mediaValue:"pic",destinationType:n.destinationType,allowEdit:!1,quality:50,targetWidth:n.maxWidth,targetHeight:n.maxHeight,saveToPhotoAlbum:!1},function(t,e){t?n.callback&&n.callback(t.base64Data||t.data):alert(JSON.stringify(e))})},compressImage:function(t){return this.getBase64Image(t)},getBase64Image:function(t){var a=s.extend({imgPath:"",maxWidth:800,maxHeight:800,callback:null},t),i=new Image;i.src=a.imgPath,i.onload=function(){var t=document.createElement("canvas"),e=i.width,n=i.height;n<e?e>a.maxWidth&&(n=Math.round(n*=a.maxWidth/e),e=a.maxWidth):n>a.maxHeight&&(e=Math.round(e*=a.maxHeight/n),n=a.maxHeight),t.width=e,t.height=n,t.getContext("2d").drawImage(i,0,0,e,n);t=t.toDataURL("image/jpeg",.8);a.callback&&a.callback(t)}}},s.fn.extend({previewUploadImg:function(t){var r=s.extend({maxW:80,maxH:80,maxCount:4,inputName:"pics[]",callback:null},t);return this.each(function(){var e=s(this),t=s(e.attr("rel")),n=t.get(0),a=e.find("button"),i=t.find("li").size();i+1>=r.maxCount&&e.hide(),a.touchwipe({touch:function(){(i=t.find("li").size())<r.maxCount&&dwz.plus.chooseImage({maximum:r.maxCount-i,destinationType:"base64",callback:function(t){s.plus.getBase64Image({imgPath:t,maxWidth:r.maxWidth,maxHeight:r.maxHeight,callback:function(t){!function(t,n,e,a,i){var r=document.createElement("li");r.classList.add("thumbnail");var o=document.createElement("img");o.src=n,r.appendChild(o),t.appendChild(r),e=dwz.parseHTML('<input type="hidden" name="'+e+'" value="'+n+'">'),r.appendChild(e),o.onload=function(){var t=o.naturalWidth,e=o.naturalHeight;o.setAttribute("data-width",t),o.setAttribute("data-height",e),o.setAttribute("data-src",n),a&&i&&(e/i<t/a?o.setAttribute("width",a):o.setAttribute("height",i))},s(t).hasClass("dwz-ctl-del")&&s('<a class="img-del"></a>').prependTo(r).click(function(t){s(r).remove(),t.stopPropagation()})}(n,t,r.inputName,r.maxW,r.maxH)}}),i+1>=r.maxCount&&e.hide(),r.callback&&r.callback(t)}})}})})},previewImg:function(t){s.extend({attrW:"data-width",attrH:"data-height",attrSrc:"data-src"},t);return this.each(function(){var n=s(this);n.touchwipe({touch:function(t){t.preventDefault(),t.stopPropagation();var e=n.find("img");s.previewBigImg.open(e,t)}})})}}),s.previewBigImg={isOpen:!1,autoLayout:function(){var t=s("#preview-big-img"),e=document.body.offsetWidth,n=(window.screen.availHeight,t.find(".bd li"));n.each(function(){s(this).css({width:e+"px"})}),t.find(".bd ul").css({width:e*n.size()+"px"})},open:function(t,n){var e=this,a=s("#preview-big-img");0==a.size()&&(s("body").append('<div id="preview-big-img" style="display:none"></div>'),(a=s("#preview-big-img")).touchwipe({touch:function(t){t.preventDefault(),t.stopPropagation(),e.close(!0)}}));document.body.offsetWidth;var i="",r="",o=0;t.each(function(t){var e=s(this),e=e.attr("data-src")||e.attr("src");i+='<li><div class="pop-inner"><img src="'+e+'"></div></li>',r+='<li class="'+(0==t?"on":"")+'"></li>',n.target==this&&(o=t)}),a.html('<div class="slideBox" data-auto-play="false" data-loop="false" data-zoom="true" data-open-index="#currentIndex#"><div class="bd"><ul>#li#</ul></div><div class="hd"><ul>#item#</ul></div></div>'.replaceAll("#li#",i).replaceAll("#item#",r).replaceAll("#currentIndex#",o)).show().initUI(),window.addEventListener("resize",e.autoLayout,!1),e.autoLayout(),this.isOpen=!0},close:function(t){var e=s("#preview-big-img");0!=e.size()&&(this._scroll&&(this._scroll.destroy(),this._scroll=null),e.html("").hide(),window.removeEventListener("resize",this.autoLayout,!1),s.history&&t&&s.history.pop(),this.isOpen=!1)}}}(dwz),function(a){a.extend({history:{_hash:new Array,_currentHash:"",_isPop:!1,_isHis:!0,init:function(t,e){var n=e||location.hash;n&&(a.history._currentHash=n.skipChar("#").replace("?","|"),a.isFunction(t)&&setTimeout(function(){t(n.skipChar("#").replace("|","?"))},200)),window.onhashchange=a.history._check},_check:function(){var t=location.hash.skipChar("#").replace("?","|");t||a(window).trigger("hash.empty"),!a.history._isHis&&a.history._isPop||!t||t==a.history._currentHash||(a.history._currentHash=t,a.history.load(t)),a.history._isHis=!0},add:function(t,e,n){t=t.replace("?","|").replace(/\?.*$/,""),a.history._isPop=!1,a.history._currentHash=t,a.history._hash.push([t,e,n]),location.hash=t},pop:function(t){t?(a.history._isPop=!0,a.history._isHis=!1):(a.history._isPop=!1,a.history._isHis=!0),0<a.history._hash.length?(a.history._hash.pop(),t&&history.back()):a(window).trigger("hash.empty.pop")},load:function(t){for(var e=0;e<a.history._hash.length;e+=1){var n=a.history._hash[e][1];if(a.history._hash[e][0]==t&&n)return void n(a.history._hash[e][2])}}}})}(dwz),function(y){y.fn.extend({touchwipe:function(t){var v={min_move_x:30,min_move_y:30,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},touch:null,touchstart:null,touchmove:null,touchend:null,direction:"vertical",preventDefaultEvents:!1,stopPropagationEvents:!1,data:null};return t&&y.extend(v,t),this.each(function(){var n=y(this),a=0,i=0,r=0,o=0,s=0,l=0,c=0,u=0,d=null,p=null,f={dx:0,dy:0};function h(){y.event.remove(n.get(0),"touchmove",g),y.event.remove(n.get(0),"mousemove",g)}function g(t){var e;d&&((e={startX:a,startY:i,endX:s,endY:l,startX2:r,startY2:o,endX2:s,endY2:l,x:("mousemove"==t.type?t:t.touches[0]).pageX,y:("mousemove"==t.type?t:t.touches[0]).pageY,touchType:d}).dx=a-e.x,e.dy=i-e.y,s=e.x,l=e.y,t.touches&&1<t.touches.length&&(e.x2=t.touches[1].pageX,e.y2=t.touches[1].pageY,c=e.x2,u=e.y2),!p&&(Math.abs(e.dx)>v.min_move_x||Math.abs(e.dy)>v.min_move_y)&&(p=Math.abs(e.dx)>Math.abs(e.dy)?"horizontal":"vertical"),Math.abs(e.dx)>f.dx&&(f.dx=e.dx),Math.abs(e.dy)>f.dy&&(f.dy=e.dy),v.touchmove?v.direction!=p&&"all"!=v.direction||v.touchmove.call(this,t,e):Math.abs(e.dx)>=v.min_move_x?(h(),(0<e.dx?v.wipeLeft:v.wipeRight).call(this,t,e)):Math.abs(e.dy)>=v.min_move_y&&(h(),(0<e.dy?v.wipeUp:v.wipeDown).call(this,t,e)),"mousemove"==t.type&&0===t.buttons&&(h(),m(t)))}function t(t){if(p=null,v.preventDefaultEvents&&t.preventDefault(),v.stopPropagationEvents&&t.stopPropagation(),t.data=v.data,"mousedown"==t.type)a=s=t.pageX,i=l=t.pageY,d="touch",y.event.add(n.get(0),"mousemove",g);else{if(!t.touches.length)return;a=s=t.touches[0].pageX,i=l=t.touches[0].pageY,d="touch",1<t.touches.length&&(r=c=t.touches[1].pageX,o=u=t.touches[1].pageY,d="zoom"),y.event.add(n.get(0),"touchmove",g)}var e;v.touchstart&&(e={x:a,y:i,x2:r,y2:o,touchType:d},v.touchstart.call(this,t,e))}function m(t){var e;t.data=v.data,v.touchend&&(e={startX:a,startY:i,x:s,y:l,dx:a-s,dy:i-l,startX2:r,startY2:o,x2:c,y2:u,touchType:d},v.touchend.call(this,t,e)),"touch"==d&&Math.abs(f.dx)<v.min_move_x&&Math.abs(f.dy)<v.min_move_y&&v.touch&&this!==window&&v.touch.call(this,t,{x:a,y:i}),h(),f={dx:0,dy:0}}v.touch&&n.attr("dwz-event-touchwipe-touch")||(v.touch&&n.attr("dwz-event-touchwipe-touch","touch"),"ontouchstart"in window?(y.event.add(n.get(0),"touchstart",t),y.event.add(n.get(0),"touchend",m)):(y.event.add(n.get(0),"mousedown",t),y.event.add(n.get(0),"mouseup",m)),y.event.add(n.get(0),"mousewheel",function(t){v.stopPropagationEvents&&t.stopPropagation();var e={startX:0,startY:0,x:0,y:t.deltaY,dx:0,dy:-t.deltaY,type:"mousewheel"};v.touchmove&&v.touchmove.call(this,t,e)}))})}})}(dwz),function(l){l.extend({_randomColorFactor:function(t){return Math.round(Math.random()*(t||255))},randomColor:function(t,e,n,a){return"rgba("+this._randomColorFactor(e)+","+this._randomColorFactor(n)+","+this._randomColorFactor(a)+","+(t||".3")+")"},animate:function(t,e,n,a,i){for(var r in e){var o,s;"width"==r||"height"==r?(l.transition(t,{transitionType:"all",duration:n,effectType:a}),t.style[r]=e[r]+"px"):(o=e.x||0,s=e.y||0,void 0===e.x&&void 0===e.y||l(t).translate({x:o+"px",y:s+"px",duration:n,effectType:a}))}i&&setTimeout(function(){i.call(t)},(n||1)+10)},transition:function(t,e){e=l.extend({transitionType:"all",duration:0,effectType:"ease"},e),t=l(t);e.duration?(e=e.transitionType+" "+e.duration/1e3+"s "+(e.effectType||"ease"),t.css({"-webkit-transition":"-webkit-"+e,transition:e})):t.css({"-webkit-transition":"",transition:""})}}),l.fn.extend({animate:function(t,e,n,a){return l.animate(this.get(0),t,e,n,a),this},fadeOut:function(t,e){return this.effect([{className:"fadeOut animated",after:function(){this.hide()}}],e)},fadeIn:function(t,e){return this.effect([{className:"fadeIn animated",before:function(){this.show()},after:function(){this.show()}}],e)},translate:function(t){t=l.extend({x:"0px",y:"0px",z:"0px",duration:0,effectType:"ease"},t);return t.transform="translate3d("+t.x+","+t.y+","+t.z+")",this.translateCss(t)},translateCss:function(t){var e=l.extend({transform:"",duration:0,effectType:"ease"},t);return this.each(function(){l.transition(this,{transitionType:"transform",duration:e.duration,effectType:e.effectType}),l(this).css({"-webkit-transform":e.transform,transform:e.transform})})},translateY:function(t,e,n){return this.translate({y:t,duration:e,effectType:n})},translateX:function(t,e,n){return this.translate({x:t,duration:e,effectType:n})},rotate:function(t){var e=l.extend({deg:"0deg",duration:0,effectType:"ease"},t);return this.each(function(){var t="rotate("+e.deg+")";l.transition(this,{transitionType:"transform",duration:e.duration,effectType:e.effectType}),l(this).css({"-webkit-transform":t,transform:t})})},getComputedPos:function(){var t=window.getComputedStyle(this.get(0),null),e=0,n=0,a=1,i=t["-webkit-transform"]||t.transform;return i&&"none"!=i&&(e=+((t=i.replace("matrix(","").split(")")[0].split(", "))[12]||t[4]),n=+(t[13]||t[5]),a=+t[3]),{x:e,y:n,scale:a}},flipCard:function(t){var e=l.extend({},t);return this.each(function(){var t=l(this);t.removeClass("animation-rotate-up").removeClass("animation-rotate-up-back"),t.addClass("animation-rotate-up"),setTimeout(function(){t.addClass("animation-rotate-up-back"),e.callback&&e.callback(t)},500)})},effectBubble:function(t){var i=l.extend({content:"+1",y:-100,duration:500,effectType:"ease",className:"",fontSize:2},t);return this.each(function(){var t=l(this),e=t.offset(),n=t.width(),t="effect-fly-"+(new Date).getTime(),t='<span id="#flyId#" class="effect-bubble-fly #class#" style="top:#top#px;left:#left#px;font-size: #fontSize#rem;">#content#</span>'.replaceAll("#left#",e.left+n/2).replaceAll("#top#",e.top).replaceAll("#flyId#",t).replaceAll("#content#",i.content).replaceAll("#class#",i.className).replaceAll("#fontSize#",i.fontSize),a=l(t).appendTo(l("body").get(0));setTimeout(function(){a.css({top:e.top+i.y+"px"})},10),setTimeout(function(){a.fadeOut(500,function(){a.remove()})},i.duration||500)})},effect:function(r,o){return this.each(function(){var a=l(this),i="webkitAnimationEnd animationend webkitTransitionEnd transitionend";!function e(t){var n;r&&0<r.length&&(n=l.extend({className:"",style:"",before:null,after:null},r.shift()),t&&((t=a.data("orig_style")||a.attr("style"))&&a.data("orig_style",t),a.off(i),a.removeClass(l.animateCls.all+" animated")),a.on(i,function(){var t;a.off(i),0==r.length&&((t=a.data("orig_style"))&&a.attr("style",t),o&&o.call(a,n)),n.className&&a.removeClass(n.className+" animated"),n.after&&n.after.call(a,n),e()}),setTimeout(function(){var t;n.before&&n.before.call(a,n),n.style&&((t=a.data("orig_style")||"")&&!t.endsWith(";")&&(t+=";"),a.attr("style",t+n.style)),n.className&&a.addClass(n.className).addClass("animated")},50))}(!0)})}}),l.animateCls={std_names:"bounce flash pulse rubberBand shake swing tada wobble jello flip hinge jackInTheBox",in_names:"bounceIn bounceInDown bounceInLeft bounceInRight bounceInUp fadeIn fadeInDown fadeInDownBig fadeInLeft fadeInLeftBig fadeInRight fadeInRightBig fadeInUp fadeInUpBig flipInX flipInY lightSpeedIn rollIn rotateIn rotateInDownLeft rotateInDownRight rotateInUpLeft rotateInUpRight slideInUp slideInDown slideInLeft slideInRight zoomIn zoomInDown zoomInLeft zoomInRight zoomInUp",out_names:"bounceOut bounceOutDown bounceOutLeft bounceOutRight bounceOutUp fadeOut fadeOutDown fadeOutDownBig fadeOutLeft fadeOutLeftBig fadeOutRight fadeOutRightBig fadeOutUp fadeOutUpBig flipOutX flipOutY lightSpeedOut rollOut rotateOut rotateOutDownLeft rotateOutDownRight rotateOutUpLeft rotateOutUpRight slideOutUp slideOutDown slideOutLeft slideOutRight zoomOut zoomOutDown zoomOutLeft zoomOutRight zoomOutUp"},l.animateCls.all_names=l.animateCls.std_names+" "+l.animateCls.in_names+" "+l.animateCls.out_names,l.fn.animateCls=function(t,e){var n={className:t};return l.inArray(t,l.animateCls.in_names.split(" "))?(n.before=function(){this.show()},n.after=function(){this.show()}):l.inArray(t,l.animateCls.out_names.split(" "))&&(n.before=function(){this.show()},n.after=function(){this.hide()}),this.effect([n],e)}}(dwz),dwz.extend({ajaxError:function(t,e,n){401!=t.status?$.alert?$.alert.error("<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+"</div><div>thrownError: "+n+"</div><div>"+t.responseText+"</div>"):alert("Http status: "+t.status+" "+t.statusText+"\najaxOptions: "+e+"\nthrownError:"+n+"\n"+t.responseText):$.gotoLogin()},ajaxDone:function(t){t[dwz.config.keys.statusCode]==dwz.config.statusCode.error?t[dwz.config.keys.message]&&$.alert&&$.alert.error(t[dwz.config.keys.message]):t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok&&(t[dwz.config.keys.message]&&$.alert&&$.alert.success(t[dwz.config.keys.message]),"redirect"==t.callbackType&&t.forwardUrl&&setTimeout(function(){window.location=t.forwardUrl},1500))},isAjaxOkStatus:function(t){return t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok},gotoLogin:function(){$.dialog.open({url:"tpl/user/login.html?dwz_callback=loginRender",pop:"fullscreen"})},checkAjaxLogin:function(t){return t[dwz.config.keys.statusCode]==dwz.config.statusCode.timeout?($.alert.toast(t[dwz.config.keys.message]||"用户登入"),$.gotoLogin(),!1):($.ajaxDone(t),!0)}}),function(l){l.fn.extend({valid:function(){var r=!0;return this.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)}).each(function(){var t=l(this),e=t.val(),n=this.required||t.hasClass("required"),a=t.attr("pattern")||t.attr("data-pattern"),i=t.attr("data-error");if(t.hasClass("ignore")||(dwz.config.rcheckableType.test(this.type)?!this.checked&&n&&(r=!1):(!e&&n||e&&a&&!new RegExp(a).test(e))&&(r=!1)),!r&&i&&l.alert)return l.alert.error(i),!1}),r},ajaxTodo:function(t){var s=l.extend({className:"active",disabledInvert:"disabled-invert",relCount$:"data-rel-count"},t);return this.each(function(){function i(t){var e;0<n.size()&&(0<=(e=parseInt(n.text()))+t&&n.text(e+t))}var r=l(this).hrefFix(),n=l(r.attr(s.relCount$)),o=r.hasClass(s.disabledInvert);r.touchwipe({touch:function(t){var e=r.attr("data-href"),n=parseInt(r.attr("data-count")||1),a=r.hasClass(s.className);e&&"javascript:"!=e?l.ajax({type:"POST",url:e,data:{active:a?0:1},dataType:"json",cache:!1,success:function(t){dwz.ajaxDone(t),t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok&&(a&&!o?(r.removeClass(s.className),i(-n)):(r.addClass(s.className),i(+n)))},error:dwz.ajaxError}):a&&!o?(r.removeClass(s.className),i(-n)):(r.addClass(s.className),i(+n)),t.preventDefault(),t.stopPropagation()}})})},bringBack:function(a){return this.each(function(){l(this).find(":input").each(function(){var t,e=l(this),n=e.attr("name");for(t in a)if(t==n){e.val(a[t]);break}})})}})}(dwz),function(o){o.setRegional("alert",{title:{error:"错误",info:"提示",warn:"警告",success:"成功",confirm:"确认提示"},btnMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}}),o.alert={config:{box$:"#alertMsgBox",types:{error:"error",info:"info",warn:"warn",success:"success",confirm:"confirm"},dialogFrag:'<div id="alertDialogBox"><div class="alert-mask"></div><div class="alert-dialog"></div></div>',boxFrag:'<div id="alertMsgBox" class="alert-dialog-#type#">\t\t\t\t\t<div class="alert-mask"></div>\t\t\t\t\t<div class="alert-dialog">\t\t\t\t\t\t<div class="alert-dialog-hd"><strong class="alert-dialog-title">#title#</strong></div>\t\t\t\t\t\t<div class="alert-dialog-bd">#message#</div>\t\t\t\t\t\t<div class="alert-dialog-ft">#butFragment#</div>\t\t\t\t\t</div>\t\t\t\t</div>',btnFrag:'<a href="javascript:" class="alert_btn_dialog #class#">#butMsg#</a>'},_open:function(t,e,n){o(this.config.box$).remove();var a="";if(n)for(var i=0;i<n.length;i++)a+=this.config.btnFrag.replace("#butMsg#",n[i].name).replace("#class#","ok"==n[i].sn?"primary":"default");e=this.config.boxFrag.replace("#type#",t).replace("#title#",o.regional.alert.title[t]).replace("#message#",e).replace("#butFragment#",a);o("body").append(e);for(var r=o(this.config.box$).find("a.alert_btn_dialog"),i=0;i<n.length;i++)r.eq(i).on(o.event.hasTouch?"touchstart":"click",i,function(t){var e=t.data,e=n[e].call;e&&e(t),o.alert.close(),t.preventDefault(),t.stopPropagation()})},close:function(){o(this.config.box$).remove()},error:function(t,e){this._alert(this.config.types.error,t,e)},warn:function(t,e){this._alert(this.config.types.warn,t,e)},success:function(t,e){this._alert(this.config.types.success,t,e)},toast:function(t,e){var n,a,e=o.extend({msg:t,duration:4e3},e);window.api?api.toast(e):(o("#alert-toast").remove(),this._timer&&(clearTimeout(this._timer),this._timer=null),(n=o('<div id="alert-toast">'+e.msg+"</div>").appendTo(o("body"))).animateCls("fadeInDown"),(a=this)._timer=setTimeout(function(){clearTimeout(this._timer),a._timer=null,n.animateCls("fadeOutUp",function(){n.remove()})},e.duration))},_alert:function(t,e,n){n=o.extend({okName:o.regional.alert.btnMsg.ok,okCall:null},n),n=[{sn:"ok",name:n.okName,call:n.okCall}];this._open(t,e,n)},confirm:function(t,e){e=o.extend({okName:o.regional.alert.btnMsg.ok,okCall:null,cancelName:o.regional.alert.btnMsg.cancel,cancelCall:null},e),e=[{sn:"cancel",name:e.cancelName,call:e.cancelCall},{sn:"ok",name:e.okName,call:e.okCall}];this._open(this.config.types.confirm,t,e)},openDialog:function(n){o(this.config.box$).remove();var a,i=o(o.alert.config.dialogFrag).appendTo(o("body").get(0)).find(".alert-dialog");n&&(a=n.getParams(),o.ajax({type:"GET",url:n,data:a,success:function(t){i.triggerPageClear();var e=dwz.getUrlCallback(n);e?e.call(i,t,a):i.html(t).initUI()},error:dwz.ajaxError}))},closeDialog:function(){o("#alertDialogBox").remove()}}}(dwz),function(a){a.fn.extend({scrollTo:function(n){return this.each(function(){var t,e=a(this).children().eq(0);"end"==n.y?0<(t=e.height()-a(this).height())&&(n.y=-t+"px",e.translate(n)):e.translate(n)})},scroll:function(t){var p=a.extend({scrollX:!1,scrollY:!0,delayTime:400,touchstart:null,touchmove:null,touchend:null,scroll$:".scroll",topBtn$:".top-btn",stopPropagationEvents:!1},t);return this.each(function(){var i=a(this),r=i.find(p.scroll$),o=i.find(p.topBtn$),s=0;function l(){var t=r.get(0).clientWidth-i.get(0).clientWidth;return 0<t?t:0}function c(){var t=r.get(0).clientHeight-i.get(0).clientHeight;return 0<t?t:0}o.click(function(t){t.stopPropagation(),s=(new Date).getTime(),i.scrollTo({y:0,duration:800}),o.addClass("hide")});var u=0,d={x:0,y:0},t="vertical";p.scrollX&&(t=p.scrollY?"all":"horizontal"),i.touchwipe({direction:t,stopPropagationEvents:p.stopPropagationEvents,touchstart:function(t,e){d=r.getComputedPos(),p.scrollY&&r.translateY(d.y+"px",0),p.scrollX&&r.translateX(d.x+"px",0),p.touchstart&&p.touchstart.call(r,t,e)},touchmove:function(t,e){var n,a,i=(new Date).getTime();300<i-u&&Math.abs(e.dx)<10&&Math.abs(e.dy)<10||(p.scrollY&&(n=c(),0<(a=-Math.round(e.dy-d.y))?a/=3:a<-n&&(a=(a+n)/3-n),r.translateY(a+"px",0,"linear"),0<o.size()&&(a<-100?o.removeClass("hide"):o.addClass("hide")),e.scrollH=n,e.scrollY=a),p.scrollX&&(n=l(),0<(a=-Math.round(e.dx-d.x))?a/=3:a<-n&&(a=(a+n)/3-n),r.translateX(a+"px",0,"linear"),e.scrollW=n,e.scrollX=a),p.touchmove&&p.touchmove.call(r,t,e))},touchend:function(t,e){var n,a;(u=(new Date).getTime())-s<300||(p.scrollY&&20<Math.abs(e.dy)&&(e.scrollH=c(),e.dy-d.y<0?r.animate({y:0},p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):e.dy-d.y>e.scrollH?r.animate({y:-e.scrollH},p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):(a=r.getComputedPos(),(n=dwz.speed.getY()*(i.get(0).clientHeight/680)+a.y)<-e.scrollH?n=-e.scrollH:0<n&&(n=0),r.animate({y:n},3*p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"))),p.scrollX&&20<Math.abs(e.dx)&&(e.scrollW=l(),e.dx-d.x<0?r.animate({x:0},p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):e.dx-d.x>e.scrollW?r.animate({x:-e.scrollW},p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"):(a=r.getComputedPos(),(a=dwz.speed.getX()+a.x)<-e.scrollW?a=-e.scrollW:0<a&&(a=0),r.animate({x:a},3*p.delayTime,"cubic-bezier(0.1, 0.57, 0.1, 1)"))),p.touchend&&p.touchend.call(r,t,e))}})})}})}(dwz),$.fn.extend({list:function(t){var e=$.extend({pullDown$:"div.pullDown",pullUp$:"div.pullUp",pullDownLabel$:"span.pullDownLabel",pullUpLabel$:"span.pullUpLabel",scroll$:".scroll",refreshFn:function(){},loadMoreFn:function(){}},t);return this.each(function(){var t=$(this),n=(t.find(e.scroll$),t.find(e.pullDown$)),a=t.find(e.pullUp$),i=n?n.find(e.pullDownLabel$):null,r=a?a.find(e.pullUpLabel$):null,o=t.parentsUnitBox().find(".hideBarCtl"),s={txt:"",flip:""},l={txt:"",loading:""};0<i.size()&&(s={txt:i.html(),flip:i.attr("data-flip")||"Release to Refresh"}),0<r.size()&&(l={loadMoreTxt:r.html(),noMoreRecordsTxt:"",loading:r.attr("data-loading")||"Loading..."}),t.scroll({scrollX:!1,scrollY:!0,scroll$:e.scroll$,touchmove:function(t,e){0<n.size()&&(60<e.scrollY?(n.addClass("flip"),i.html(s.flip)):(n.removeClass("flip"),i.html(s.txt))),0<a.size()&&(e.scrollY+30<-e.scrollH?(a.addClass("loading"),r.html(l.loading)):(a.removeClass("loading"),r.html(l.loadMoreTxt))),0<o.size()&&(e.scrollY<-50&&5<e.scrollH&&e.endY>e.y+3?o.addClass("hideBar"):e.endY<e.y-3&&o.removeClass("hideBar"))},touchend:function(){0<n.size()&&n.hasClass("flip")&&(n.removeClass("flip").addClass("loading"),setTimeout(function(){n.removeClass("loading")},1e3),e.refreshFn.call(t,n)),0<a.size()&&a.hasClass("loading")&&(setTimeout(function(){a.removeClass("loading")},1e3),e.loadMoreFn.call(t,a))}})})}}),$.extend({listForm:function(t){var e=t.find("div.dwz-list");t.on("submit",function(){return t.requestList(),e.scrollTo({y:0,duration:800}),!1}),setTimeout(function(){t.trigger("submit")},300);var n=t.find('input[name="'+dwz.config.pageInfo.pageNum+'"]');e.list({refreshFn:function(){console.log("refreshFn..."),n.size()&&n.val(1),t.requestList()},loadMoreFn:function(){console.log("loadMoreFn..."),n.size()&&t.total&&t.total>e.find("li.item").size()&&(n.val(parseInt(n.val())+1),t.requestList(!0))}})}}),$.navTab={config:{box$:"#nav-tab",items$:"#nav-tab > .tab-bar > [tabid]",contents$:"#nav-tab > .tab-panel > .panel-item",activeClass:"active",cachedClass:"cached",openIndex:-1},$box:null,_currentIndex:0,init:function(t){var e,n=$.extend($.navTab.config,t);this.$box=$($.navTab.config.box$),this.getTabs().each(function(t){var n=$(this).hrefFix(),e=n.attr("data-href"),e=e&&e.startsWith("#")?"":e;n.click({index:t,tabid:n.attr("tabid"),url:e},function(t){var e=t.data;e.loaded=n.attr("data-loaded")&&"true"==n.attr("data-cache"),$.navTab.open(e),t.preventDefault()})}),0<=n.openIndex&&($.navTab._open(n.openIndex),(e=location.hash)&&3!==e.split(";").length||(e=(e=(t=this.getTabs().eq(n.openIndex)).attr("data-href"))&&e.startsWith("#")?"":e,$.navTab.open({index:n.openIndex,tabid:t.attr("tabid"),url:e}))),n.history||$(window).on("hash.empty",function(t){$.dialog&&$.dialog.isOpen?$.dialog.close():$.navView&&$.navView.close(!1)})},getBox:function(){return this.getPanels().eq(this._currentIndex)},_open:function(t){for(var e=$.navTab.config,n=this.getTabs(),a=this.getPanels(),i=0;i<n.size();i++)i==t?(n.eq(i).addClass(e.activeClass).removeClass(e.cachedClass),a.eq(i).addClass(e.activeClass).removeClass(e.cachedClass)):(n.eq(i).addClass(e.cachedClass).removeClass(e.activeClass),a.eq(i).addClass(e.cachedClass).removeClass(e.activeClass));this._currentIndex=t},open:function(e){var n=0<=e.index?e.index:this._indexTabId(e.tabid);if(-1!=n){if(e.interceptor||(e.interceptor=dwz.getUrlInterceptor(e.url)),e.interceptor&&!1===e.interceptor.call(this.getPanels(n),e.url))return!1;this._currentIndex!=n&&this._open(n),e.url&&(e.loaded||this.load(e),e.history&&$.history&&e.tabid&&setTimeout(function(){var t=e.tabid+";"+e.url;$.history.add(t,function(t){$.navTab.open(t)},{index:n,url:e.url,loaded:!0})},10)),$.dialog&&$.dialog.isOpen?$.dialog.close():$.navView&&$.navView.close(!1)}},load:function(t){var e,n=$.extend((_defineProperty(e={type:"GET",external:!1},"type","GET"),_defineProperty(e,"url",""),_defineProperty(e,"data",{}),_defineProperty(e,"callback",null),e),t),t=0<=n.index?n.index:this._indexTabId(n.tabid),a=this.getPanels().eq(t),i=this.getTabs().eq(t);n.external?this.loadExternal(n.url):$.ajax({type:n.type,url:n.url,data:n.data,success:function(t){a.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url)),n.callback?n.callback.call(a,t,$.extend(n.url.getParams(),n.data)):(a.html(t),a.initUI()),i.attr("data-loaded",1)},error:dwz.ajaxError})},reload:function(t){this.load({index:$.navTab._currentIndex,url:t})},loadExternal:function(t,e){var n=this.$box.get(0).offsetHeight;t.html($.config.frag.external.replaceAll("{url}",e).replaceAll("{{height}}",n+"px"))},_indexTabId:function(e){if(!e)return-1;var n=-1;return this.getTabs().each(function(t){$(this).attr("tabid")==e&&(n=t)}),n},getTabs:function(){return this.$box.find(this.config.items$)},getPanels:function(){return this.$box.find(this.config.contents$)}},$.navView={config:{zIndexStart:100,idStart:"nav-view-",frag:'<div id="#boxId#" class="nav-view view-container pane box-shadow unitBox" style="display: none; z-index:#zIndex#">            <header>                <div class="toolbar">                    <a class="bar-button back-button"><i class="icon icon-back"></i></a>                </div>            </header>            <div class="content"></div>        </div>'},$list:[],init:function(t){$.extend($.navView.config,t)},open:function(t){var e=$.extend({boxId:"",rel:"_blank",wipeClose:!1,history:!0,external:!1,type:"GET",url:"",data:{},interceptor:null,callback:null},t),n=e.boxId||$.navView.config.idStart+e.rel,a=$.navView.config.zIndexStart+$.navView.$list.length,i=$("#"+n);if(e.interceptor||(e.interceptor=dwz.getUrlInterceptor(e.url)),e.interceptor&&!1===e.interceptor.call(i,e.url,e.data))return!1;var r,o=!1,s=this.$list.length;if(0<s&&0<i.size()&&(t=this.$list[s-1],o=i.get(0)===t.get(0)),0==i.size()&&($("body").append($.navView.config.frag.replaceAll("#boxId#",n).replaceAll("#zIndex#",a)),i=$("#"+n).initUI(),e.wipeClose&&i.touchwipe({wipeRight:function(){$.navView.close(!0,!0)},min_move_x:100}),this.$list.push(i)),!o){var l=this.$list,c=l[s-1];if(0<s&&i.get(0)!==l[s-1].get(0)){for(var u=0;u<s-1;u++)i.get(0)===l[u].get(0)&&(l[u]=c,l[s-1]=i);for(u=0;u<s;u++)l[u].css({"z-index":$.navView.config.zIndexStart+u})}i.show().translateX(document.documentElement.clientWidth+"px"),setTimeout(function(){i.translateX("0px",500,"ease")},200)}e.url&&(i.data("dwz-params",{external:e.external,url:e.url,data:e.data,type:e.type}),(r=$.extend(e.url.getParams(),e.data)).ajaxDoneReload&&i.data("ajaxDoneReload",1),e.external?this.loadExternal(e.url):($.ajax({type:e.type,url:e.url,data:r,success:function(t){i.triggerPageClear(),e.callback||(e.callback=dwz.getUrlCallback(e.url)),e.callback?e.callback.call(i,t,r):i.html(t).initUI()},error:dwz.ajaxError}),o="navView;"+e.rel+";"+e.url,$.history&&e.history&&$.history.add(o,function(t){$.dialog&&$.dialog.isOpen?$.dialog.close({popHistory:!1}):($.navView.close(!0),$.navView.open({url:t,rel:e.rel,history:!1}))},e.url)))},reload:function(t){var e=this.$list[this.$list.length-1],t=$.extend({boxId:e.attr("id"),history:!1},e.data("dwz-params"),t);this.open(t)},loadExternal:function(t){var e=this.$list[this.$list.length-1].find(".content"),n=e.get(0).offsetHeight;e.html($.config.frag.external.replaceAll("{url}",t).replaceAll("{{height}}",n+"px"))},close:function(t,e){var n,a=this.$list.length;a<=0||(n=this.$list[a-1],this.$list.pop(),$.history&&t&&$.history.pop(e),n.animate({x:document.documentElement.clientWidth},500,"ease",function(){n.triggerPageClear(),n.remove()}))},closeByRel:function(t){t=this._getBoxData(t);t.$box&&($.navView.$list.splice(t.index,1),t.$box.remove())},_getBoxData:function(t){var n,a={$box:null,index:-1};return this.$list.length&&t&&((n=$("#"+$.navView.config.idStart+t)).size()&&this.$list.forEach(function(t,e){t.get(0)===n.get(0)&&(a={$box:t,index:e})})),a},getBox:function(t){return t&&this._getBoxData(t).$box,this.$list.length?this.$list[this.$list.length-1]:null},getBoxs:function(t){t=t||1;for(var e=[],n=1;n<=this.$list.length&&n<=t;n++)e.push(this.$list[this.$list.length-n]);return e}},$.dialog={config:{box$:"#dialog",fullscreenClass:"fullscreen",openClass:"open",frag:'<div id="dialog" class="pop-window unitBox"><div class="pop-header"><span class="title">弹出框</span><a class="pop-close" href="javascript:$.dialog.close()"><i class="icon icon-close"></i></a></div><div class="pop-content"></div></div>',bgBox$:"#mask-background",bgFrag:'<div id="mask-background" class="mask-background"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){$.extend($.dialog.config,t),$("body").append($.dialog.config.frag).append($.dialog.config.bgFrag),this.$box=$($.dialog.config.box$),this.$bgBox=$($.dialog.config.bgBox$)},open:function(t){var e=$.extend({type:"GET",url:"",pop:"default",external:!1,data:{},callback:null},t),n=this.$box,t=this.$bgBox;if(e.interceptor||(e.interceptor=dwz.getUrlInterceptor(e.url)),e.interceptor&&!1===e.interceptor.call(n,e.url))return!1;if(t.addClass($.dialog.config.openClass),"pic"!=e.pop&&"login"!=e.pop&&"fullscreen"!=e.pop||n.addClass($.dialog.config.fullscreenClass),n.addClass($.dialog.config.openClass).translateY(document.documentElement.clientHeight+"px"),setTimeout(function(){n.animate({y:0},300,"ease")},20),e.url){if(e.external)return void this.loadExternal(e.url);e.callback||(e.callback=dwz.getUrlCallback(e.url));var a=e.url.getParams();$.ajax({global:!e.callback,type:"GET",url:e.url,data:a,success:function(t){n.triggerPageClear(),e.callback?e.callback.call(n,t,$.extend(a,e.data)):n.html(t).initUI()},error:dwz.ajaxError})}this.isOpen=!0},loadExternal:function(t){var e=this.$box.html('<a class="video-close" href="javascript:$.dialog.close()"><i class="icon icon-close-dialog"></i></a><div class="pop-content"></div>').find(".pop-content"),n=e.get(0).offsetHeight;e.html($.config.frag.external.replaceAll("{url}",t).replaceAll("{{height}}",n+"px"))},close:function(t){t=$.extend({closeMsg:""},t);t.closeMsg?$.alert.confirm(t.closeMsg,{okCall:function(){$.dialog._closeDirect()}}):$.dialog._closeDirect()},_closeDirect:function(){var t=this.$box,e=this.$bgBox;t.animate({y:document.documentElement.clientHeight},300,"ease",function(){t.html("").removeClass($.dialog.config.fullscreenClass+" "+$.dialog.config.openClass),t.triggerPageClear()}),e.removeClass($.dialog.config.openClass),this.isOpen=!1},getBox:function(){return this.$box}},function(i){var e={panelCentent$:".panel-content",collapseBtn$:".panel-title-right",iconUpClass:"icon-list-u"};i.fn.extend({panel:function(t){var a=i.extend(e,t);return this.each(function(){var e=i(this),t=e.find(a.collapseBtn$),n=t.find("i");t.touchwipe({touch:function(t){n.hasClass(a.iconUpClass)?e.panelCollapse(a):e.panelExpand(a),t.stopPropagation()}})})},panelExpand:function(t){var n=i.extend(e,t);return this.each(function(){var t=i(this),e=t.find(n.collapseBtn$).find("i");t.find(n.panelCentent$).show(),e.addClass(n.iconUpClass)})},panelCollapse:function(t){var n=i.extend(e,t);return this.each(function(){var t=i(this),e=t.find(n.collapseBtn$).find("i");t.find(n.panelCentent$).hide(),e.removeClass(n.iconUpClass)})}}),i.altPanel={config:{box$:"#alt-panel",openClass:"open",frag:'<div id="alt-panel" class="unitBox pop-up"></div>',bgBox$:"#alt-panel-mask-bg",bgFrag:'<div id="alt-panel-mask-bg"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){i.extend(i.dialog.config,t),i("body").append(i.altPanel.config.frag),i("body").append(i.altPanel.config.bgFrag),this.$box=i(i.altPanel.config.box$),this.$bgBox=i(i.altPanel.config.bgBox$),this.$bgBox.click(function(){i.altPanel.close()})},open:function(t){var e,n=i.extend({type:"GET",url:"",data:{},callback:null,pos:null},t),a=this.$box;this.$bgBox.addClass(i.altPanel.config.openClass),a.addClass(i.altPanel.config.openClass),n.pos&&(t=document.documentElement.clientHeight,n.pos.y<t/2?a.css({top:n.pos.y+5+"px",bottom:"auto"}).removeClass("pop-up"):a.css({top:"auto",bottom:t-n.pos.y+5+"px"}).addClass("pop-up")),n.url&&(e=n.url.getParams(),i.ajax({type:"GET",url:n.url,data:e,success:function(t){a.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url)),n.callback?n.callback.call(a,t,i.extend(e,n.data)):(a.html(t),a.initUI())},error:dwz.ajaxError})),this.isOpen=!0},close:function(){var t=this.$box,e=this.$bgBox;t.removeClass(i.altPanel.config.openClass),e.removeClass(i.altPanel.config.openClass),this.isOpen=!1}}}(dwz),$.fn.extend({tabs:function(t){var s=$.extend({currentIndex:0,tab$:":scope > .tab-bar > .tab-item",panel$:":scope > .tab-panel > .panel-item",ajaxClass:"j-ajax"},t);return this.each(function(){var t=$(this),n=t.find(s.tab$),a=t.find(s.panel$);n.each(function(e){var t=$(this);s.currentIndex==e?t.addClass("active"):t.removeClass("active"),t.each(function(){t.click(function(t){i(n,a,e),t.preventDefault()})})}),i(n,a,s.currentIndex)});function i(t,e,n){var a=t.eq(n);s.currentIndex=n,t.removeClass("active"),a.addClass("active");var i,r,o=e.removeClass("active").eq(s.currentIndex).addClass("active");!a.hasClass(s.ajaxClass)||(i=a.attr("data-href"))&&!o.attr("loaded")&&(r=i.getParams(),$.ajax({type:"GET",url:i,data:r,success:function(t){o.triggerPageClear();var e=dwz.getUrlCallback(i);e?e.call(o,t,r):o.html(t).initUI(),o.attr("loaded",!0)}}))}}}),function(g){g.fn.extend({touchSlide:function(t){var h=g.extend({titActive:"on",titSelector:".hd > ul",wrapCell:".bd",currentIndex:0,delayTime:400,interTime:5e3,loop:!0,autoPlay:!1,autoCss:!1},t);return this.each(function(){var t=Math.round(1e7*Math.random()),e=g(this).attr("data-slide-id",t),n=h.wrapCell?e.find(h.wrapCell):e,a=n.children(),i=null,r=e.find(h.titSelector),o=n.width(),s=o,l=a.children();h.autoCss&&(n.css({overflow:"hidden",position:"relative"}),a.css({overflow:"hidden",position:"relative",padding:"0px",margin:"0px"}),l.css({display:"table-cell","vertical-align":"top"}));var c,u,d=h.currentIndex,p=l.size();function f(){var t=(o-s)/2;h.loop?-1==d?a.animate({x:-(d+1)*s+t},h.delayTime,"ease",function(){d=p-1,a.translateX(-(d+1)*s+t+"px"),i&&i.removeClass(h.titActive).eq(d).addClass(h.titActive)}):p<=d?a.animate({x:-(d+1)*s+t},h.delayTime,"ease",function(){d=0,a.translateX(-(d+1)*s+t+"px"),i&&i.removeClass(h.titActive).eq(d).addClass(h.titActive)}):(a.animate({x:-(d+1)*s+t},h.delayTime,"ease"),i&&i.removeClass(h.titActive).eq(d).addClass(h.titActive)):(p<=d&&(d=0),a.animate({x:-d*s+t},h.delayTime,"ease"),i&&i.removeClass(h.titActive).eq(d).addClass(h.titActive))}0!=p&&(0<p&&(s=e.width()),p<2&&(h.loop=!1),r.size()&&(r.html("<li></li>".repeat(p)),i=r.find("> li")),l.css({width:s+"px"}),a.css({width:s*p+"px"}),a.find("img").on("dragstart",function(t){return!1}),h.loop&&(a.append(l.eq(0).clone(!0)),a.prepend(l.eq(p-1).clone(!0)),a.css({width:s*(p+2)+"px"})),e.on("touchSlide-resize",function(){setTimeout(function(){o=n.width(),s=o,0<p&&(s=e.width()),a.children().css({width:s+"px"}),a.css({width:s*p+"px"}),h.loop&&a.css({width:s*(p+2)+"px"}),f()},200)}),f(),1<p&&(c=function(){-1==u&&h.autoPlay&&(u=setInterval(function(){0!=g('div[data-slide-id="'+t+'"]').size()?(d++,f()):clearInterval(u)},h.interTime))},u=-1,c(),i&&i.each(function(t){g(this).touchwipe({touch:function(){d=t,f()}})}),a.touchwipe({direction:"horizontal",touchstart:function(){-1!=u&&(clearInterval(u),u=-1)},touchmove:function(t,e){var n=h.loop?1:0;a.translateX(-(d+n)*s-e.dx+"px")},touchend:function(t,e){40<e.dx?d<p-(h.loop?0:1)&&(d++,g.slideMedia&&g.slideMedia.play()):e.dx<-40&&d>(h.loop?-1:0)&&(d--,g.slideMedia&&g.slideMedia.play()),f(),c()}})))})}})}(dwz),$.filterSelect={config:{box$:"#filter-select",openClass:"open",frag:'<div id="filter-select" class="unitBox"></div>',bgBox$:"#mask-filter-select",bgFrag:'<div id="mask-filter-select" class="mask-background"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){this.$box||($.extend($.filterSelect.config,t),$("body").append($.filterSelect.config.frag),$("body").append($.filterSelect.config.bgFrag),this.$box=$($.filterSelect.config.box$),this.$bgBox=$($.filterSelect.config.bgBox$),this.$bgBox.on($.event.hasTouch?"touchstart":"click",function(){$.filterSelect.close()}))},open:function(t){this.init(t);var e,n=$.extend({type:"GET",url:"",data:{},callback:null,pop:"default",top:0},t),a=this.$box,i=this.$bgBox,r=document.documentElement.clientHeight-n.top;"fullscreen"!=n.pop&&(r*=.7),i.addClass($.filterSelect.config.openClass),a.addClass($.filterSelect.config.openClass),setTimeout(function(){a.css({top:n.top+"px",height:r+"px"}),i.css({top:n.top+"px"})},20),n.url&&(e=n.url.getParams(),$.ajax({type:"GET",url:n.url,data:e,success:function(t){a.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url)),n.callback?n.callback.call(a,t,$.extend(e,n.data)):a.html(t).initUI()},error:dwz.ajaxError})),this.isOpen=!0},close:function(){var t=$.filterSelect.$box,e=$.filterSelect.$bgBox;e&&e.removeClass($.filterSelect.config.openClass),t&&(t.css({height:"0px"}),setTimeout(function(){t.removeClass($.filterSelect.config.openClass)},500)),this.isOpen=!1},getBox:function(){return this.$box}},$.filterPanel={config:{box$:"#filter-panel",openClass:"open",frag:'<div id="filter-panel" class="unitBox"></div>',bgBox$:"#mask-filter-panel",bgFrag:'<div id="mask-filter-panel" class="mask-background"></div>'},isOpen:!1,$box:null,$bgBox:null,init:function(t){$.extend($.filterPanel.config,t),$("body").append($.filterPanel.config.frag),$("body").append($.filterPanel.config.bgFrag),this.$box=$($.filterPanel.config.box$),this.$bgBox=$($.filterPanel.config.bgBox$),this.$bgBox.click(function(){$.filterPanel.close()})},open:function(t){var e,n=$.extend({type:"GET",url:"",pop:"default",data:{},callback:null},t),a=this.$box;this.$bgBox.addClass($.filterPanel.config.openClass),a.show().translateX(a.get(0).clientWidth+"px"),setTimeout(function(){a.animate({x:0},400,"ease")},10),n.url&&(e=n.url.getParams(),$.ajax({type:"GET",url:n.url,data:e,success:function(t){a.triggerPageClear(),n.callback||(n.callback=dwz.getUrlCallback(n.url)),n.callback?n.callback.call(a,t,$.extend(e,n.data)):a.html(t).initUI()},error:dwz.ajaxError})),this.isOpen=!0},close:function(){var t=this.$box,e=this.$bgBox;t.animate({x:t.get(0).clientWidth},500,"ease",function(){t.html("").hide()}),e.removeClass($.filterPanel.config.openClass),this.isOpen=!1},getBox:function(){return this.$box}},function(l){l.croppic={imgCropData:function(t,e){var n=l.extend({imgBg$:"img.croppic-bg",imgWrap$:".crop-img-wrap"},e),a=t.find(n.imgWrap$),e=a.find("img"),t=e.get(0),n=e.position(),t={src:e.attr("src"),left:-n.left,top:-n.top,width:a.width(),naturalWidth:t.naturalWidth,height:a.height(),naturalHeight:t.naturalHeight,rate:1};return 0<t.naturalWidth&&(t.rate=e.width()/t.naturalWidth,t.left=t.left/t.rate,t.top=t.top/t.rate,t.width=t.width/t.rate,t.height=t.height/t.rate),t.left<0&&(t.left=0),t.top<0&&(t.top=0),t.width>t.naturalWidth-t.left&&(t.width=t.naturalWidth-t.left),t.height>t.naturalHeight-t.top&&(t.height=t.naturalHeight-t.top),t},render:function(t,e){var e=l.extend({imgBg$:"img.croppic-bg",imgWrap$:".crop-img-wrap"},e),i=t.find(e.imgWrap$),r=i.find("img"),o=t.find(e.imgBg$);0==o.size()?o=l('<img class="croppic-bg" src="'+r.attr("src")+'">').appendTo(t):o.attr("src",r.attr("src"));e=t.width();e<i.width()&&i.css({width:e+"px",height:e+"px"}),r.on("load",function(){var t=i.position();r.css({width:i.width()+"px"}),o.css({width:i.width()+"px"});var e=(i.height()-r.height())/2,n=(i.width()-r.width())/2;r.css({top:e+"px",left:n+"px"}),o.css({top:t.top+e+"px",left:t.left+n+"px"})});var s={getImgStyle:function(){var t=o.position(),e=o.get(0);return{left:t.left,top:t.top,width:o.width(),naturalWidth:e.naturalWidth,height:o.height(),naturalHeight:e.naturalHeight}},cacheStartStyle:function(){o.data("zoom-start",s.getImgStyle())},setZoom:function(t){var e=l.event.getDistance(t.startX,t.startY,t.startX2,t.startY2),n=l.event.getDistance(t.x,t.y,t.x2,t.y2),a=i.position(),t=o.data("zoom-start")||s.getImgStyle(),n=t.width*n/e;n<i.width()&&(n=i.width());e=t.top+(t.height-t.height*n/t.width)/2,t=t.left+(t.width-n)/2;o.css({top:e+"px",left:t+"px",width:n+"px"}),r.css({top:e-a.top+"px",left:t-a.left+"px",width:n+"px"})},checkRestore:function(){r.width<i.width()&&(r.css({width:i.width()+"px"}),o.css({width:i.width()+"px"}));var t=i.position(),e=o.position(),n=r.height(),a=i.height();n<a?(r.css({top:(a-n)/2+"px"}),o.css({top:t.top+(a-n)/2+"px"})):e.top>t.top?(r.css({top:"0px"}),o.css({top:t.top+"px"})):e.top+o.height()<t.top+i.height()&&(r.css({top:i.height()-o.height()+"px"}),o.css({top:t.top+i.height()-o.height()+"px"})),e.left>t.left?(r.css({left:"0px"}),o.css({left:t.left+"px"})):e.left+o.width()<t.left+i.width()&&(r.css({left:i.width()-o.width()+"px"}),o.css({left:t.left+i.width()-o.width()+"px"}))},setPos:function(t){var e=o.data("zoom-start")||s.getImgStyle(),n=-t.dx+e.left,t=-t.dy+e.top,e=i.position();r.css({top:-e.top+t+"px",left:-e.left+n+"px"}),o.css({top:t+"px",left:n+"px"})}};t.touchwipe({direction:"all",touchstart:function(){s.cacheStartStyle()},touchmove:function(t,e){"zoom"==e.touchType&&s.setZoom(e),"touch"==e.touchType&&s.setPos(e)},touchend:function(){s.checkRestore()}})}}}(dwz),function(i){i.amap={calDistance:function(t){var e=t.lat1,n=t.lng1,a=t.lat2,i=t.lng2,r=Math.PI;function o(t){return t*r/180}var s=o((e+a)/2),l=o((e-a)/2),t=o((n-i)/2),e=Math.sin(l),a=Math.sin(t),n=Math.sin(s),t=void 0,i=(e*=e)*(1-(a*=a))+(1-(n*=n))*a,l=(1-e)*(1-a)+n*a;return 2*(t=Math.atan(Math.sqrt(i/l)))*6378137*(1+1/298.257*((3*(s=Math.sqrt(i*l)/t)-1)/2/l*n*(1-e)-(3*s+1)/2/i*(1-n)*e))},calRotation:function(t){var e=i.extend({map:null,startPos:null,endPos:null},t),n=0,a=e.map.lnglatToPixel(e.startPos,e.map.getZoom()),t=e.map.lnglatToPixel(e.endPos,e.map.getZoom());return n=t.x!=a.x?(e=(t.y-a.y)/(t.x-a.x),n=360*Math.atan(e)/(2*Math.PI),-(n=t.x<a.x?90-n+90:-n)):90*-(0<t.y-a.y?-1:1)},addMarker:function(t){t=i.extend({map:null,position:null,offset:new AMap.Pixel(0,0),content:'<div class="dwz-marker icon-md"><img src="./images/icon/marker-end.svg"></div>',zIndex:100},t);return new AMap.Marker(t)}}}(dwz),function(r){function a(t){this.$el=t.$el,this.canvas=this.$el.get(0),this.ctx=this.canvas.getContext("2d"),t.width&&(this.canvas.width=t.width),t.height&&(this.canvas.height=t.height),this.ctx.fillStyle=t.fillStyle||"#ffffff",this.p=0,this.l=10,this.arr=[],this.canvas.onmousedown=this.downEvent.bind(this),this.canvas.onmousemove=this.moveEvent.bind(this),this.canvas.onmouseup=this.upEvent.bind(this),this.canvas.addEventListener("touchstart",this.downEvent.bind(this),!1),this.canvas.addEventListener("touchmove",this.moveEvent.bind(this),!1),this.canvas.addEventListener("touchend",this.upEvent.bind(this),!1),this.canvas.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.moveFlag=!1,this.upof={},this.radius=0,this.has=[],this.lineMax=10,this.lineMin=5,this.linePressure=1,this.smoothness=80,this.img=new Image,this.img.src=t.brushUrl||"images/drawingBoard/pen1.png"}a.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.toDataURL=function(){for(var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),e=0;e<t.data.length;e+=4)0==t.data[e+3]&&(t.data[e]=255,t.data[e+1]=255,t.data[e+2]=255,t.data[e+3]=255);return this.ctx.putImageData(t,0,0),this.canvas.toDataURL("image/jpeg",1)},a.prototype.clickEvent=function(t){this.cli=this.getXY(t)},a.prototype.downEvent=function(t){window.console.log("点击"),this.moveFlag=!0,this.has=[],this.upof=this.getXY(t);var e=this.upof.x,t=this.upof.y;this.arr.unshift({x1:e,y1:t})},a.prototype.moveEvent=function(t){if(this.moveFlag){t.preventDefault();var e=this.getXY(t),n=this.upof;this.radius;this.has.unshift({time:(new Date).getTime(),dis:this.distance(n,e)});for(var a=0,i=0,r=0;r<this.has.length-1&&(a+=this.has[r].dis,i+=this.has[r].time-this.has[r+1].time,!(a>this.smoothness));r++);var o=Math.min(i/a*this.linePressure+this.lineMin,this.lineMax)/2;this.radius=o,this.upof=e;for(var s=Math.round(this.has[0].dis/2)+1,l=0;l<s;l++){var c=n.x+(e.x-n.x)/s*l,u=n.y+(e.y-n.y)/s*l;this.ctx.beginPath(),c-=this.l/2,u-=this.l/2,this.arr.unshift({x:c,y:u}),this.ctx.drawImage(this.img,c,u,this.l,this.l),this.l=this.l-.2,this.l<this.lineMin&&(this.l=this.lineMin),this.p++}}},a.prototype.upEvent=function(t){if(this.moveFlag=!1,this.l=this.lineMax,100<this.arr.length){for(var e=0;e<60;e++)this.arr[e].x=this.arr[e].x-this.l/4,this.arr[e].y=this.arr[e].y-this.l/4,this.ctx.drawImage(this.img,this.arr[e].x,this.arr[e].y,this.l,this.l),this.l=this.l-.3,this.l<5&&(this.l=5);this.l=this.lineMax,this.arr=[]}1==this.arr.length&&(this.ctx.drawImage(this.img,this.arr[0].x1-this.l/2,this.arr[0].y1-this.l/2,this.l,this.l),this.arr=[])},a.prototype.getXY=function(t){var e=t.clientX||t.touches[0].clientX,n=t.clientY||t.touches[0].clientY,t=this.$el.offset();return{x:e-t.left+(document.body.scrollLeft||document.documentElement.scrollLeft),y:n-t.top+(document.body.scrollTop||document.documentElement.scrollTop)}},a.prototype.distance=function(t,e){var n=e.x-t.x,t=e.y-t.y;return Math.sqrt(n*n+t*t)},r.extend({Brush:a,drawingBoardRender:function(t,e){var n=this,e=template.render(t,{params:e});n.html(e).initUI(),setTimeout(function(){var t=n.find("canvas"),i=new a({$el:n.find("canvas"),width:t.width(),height:t.height(),brushUrl:"images/drawingBoard/pen1.png"});n.find("button.dwz-btn-reset").click(function(){i.clear()}),n.find("button.dwz-btn-submit").click(function(){var t=i.toDataURL(),e=r.navView.getBox(),n=e.find("input.dwz-sign-input").val(t.replace("data:image/jpeg;base64,","")),t='<img src="'+t+'"><a class="btn-txt">重新签名</a>',a=e.find(".dwz-sign-box");a.data("btn_html")||a.data("btn_html",a.html()),a.html(t),a.find(".btn-txt").touchwipe({touch:function(){setTimeout(function(){a.html(a.data("btn_html")),n.val("")},200)}}),r.dialog.close()})},1e3)}})}(dwz),function(t){t.setRegional("calendar",{dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),t.setRegional("alert",{title:{error:"错误",info:"提示",warn:"警告",success:"成功",confirm:"确认提示"},btnMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}})}(dwz),function(l){l.config.frag.external='<iframe src="{url}" style="width:100%;height:{{height}};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>',dwz.regPlugins.push(function(t){l.fn.touchSlide&&l("div.slideBox",t).each(function(){var t=l(this);t.touchSlide({currentIndex:t.attr("data-open-index")||0,autoCss:!1,autoPlay:"false"!=t.attr("data-auto-play"),loop:"false"!=t.attr("data-loop"),zoom:"true"==t.attr("data-zoom")})}),l.navTab&&l("a[target=navTab]",t).touchwipe({touch:function(t){var e=l(this),n=e.attr("data-href");l.navTab.open({tabid:e.attr("rel"),url:n}),t.preventDefault()}}).hrefFix(),l.navView&&(l("a[target=navView], li[target=navView]",t).touchwipe({touch:function(t){var e=l(this),n=e.attr("data-href");l.navView.open({url:n,rel:e.attr("rel")||"_blank",external:e.attr("data-external")||!1,title:e.attr("title")||""}),t.stopPropagation()}}).hrefFix(),l("div.nav-view .back-button",t).click(function(t){l.navView.close(!0,!0)})),l.dialog&&(l("a[target=dialog], li[target=dialog]",t).touchwipe({touch:function(t){var e=l(this);l.dialog.open({url:e.attr("data-href"),pop:e.attr("data-pop")||""}),t.stopPropagation()}}).hrefFix(),l("img[target=dialog], a[target=dialog-pic]",t).touchwipe({touch:function(t){var e=l(this);l.dialog.open({url:e.attr("data-href"),pop:"pic",data:{src:e.attr("data-src")||e.attr("src")}}),t.stopPropagation()}}),l("#dialog .pop-down-close, #dialog .back-button",t).click(function(t){l.dialog.close(),t.stopPropagation()})),l.alert&&(l("a[target=alertDialog]",t).touchwipe({touch:function(t){var e=l(this);l.alert.openDialog(e.attr("data-href")),t.stopPropagation()}}).hrefFix(),l("#alertMsgBox .close",t).click(function(t){l.alert.close(),t.preventDefault()}),l("#alertDialogBox .close",t).click(function(t){l.alert.closeDialog(),t.preventDefault()})),l.fn.tabs&&l("div.dwz-tabs",t).each(function(){var t=l(this);t.tabs({currentIndex:t.attr("data-open-index")||0})}),l.fn.panel&&l("div.m-panel.dwz-collapse",t).panel(),l.altPanel&&l("a[target=altPanel]",t).touchwipe({touch:function(t,e){var n=l(this);l.altPanel.open({url:n.attr("data-href"),pos:e}),t.stopPropagation()}}).hrefFix(),l.fn.toggleSelectRef&&l("select.toggleSelectRef",t).each(function(){l(this).toggleSelectRef()}),l(".dwz-open-right",t).touchOpenRight(),l("input.dwz-disable-autofocus",t).disableAutofocus()}),l.fn.extend({disableAutofocus:function(){return this.each(function(){var t=l(this);t.attr("readonly","readonly"),setTimeout(function(){t.removeAttr("readonly")},600)})},redirect:function(){return this.each(function(){l(this).touchwipe({touch:function(t){var e=l(this).attr("href");e&&(window.location=e),t.preventDefault()}})})},activeClass:function(e){return e=e||"active",this.each(function(){var t=l(this);l.event.hasTouch?(t.on("touchstart",function(){t.addClass(e)}),t.on("touchend",function(){t.removeClass(e)})):(t.on("mousedown",function(){t.addClass(e)}),t.on("mouseup",function(){t.removeClass(e)}),t.on("mouseout",function(){t.removeClass(e)}))})},touchOpenRight:function(){var n=l.extend({ctlClass:"dwz-open-right",openClass:"open-right"});return this.each(function(){var t=l(this),e=t.parent();t.touchwipe({wipeLeft:function(){e.find("."+n.ctlClass).removeClass(n.openClass),t.addClass(n.openClass)},wipeRight:function(){t.removeClass(n.openClass)}}),e.attr("data-"+n.openClass)||e.attr("data-"+n.openClass,1).on(l.event.hasTouch?"touchstart":"click",function(){e.find("."+n.ctlClass).removeClass(n.openClass)})})},checkboxRadio:function(){return this.each(function(){var e=l(this),n=e.attr("data-checkbox-radio")||"form",a=e.attr("name");e.on("change",function(t){this.checked&&e.parentsUntil(function(){return l(this).is(n)}).find("input[name="+a+"]").each(function(){t.target!==this&&(this.checked=!1)})})})},toggleSelectRef:function(t){var s=l.extend({ref:"data-ref-box",refVal:"data-ref-val",ctrShow:"data-ctr-show"},t);return this.each(function(){var r=l(this);function o(t,e,n,a){var i;!function(t,e){var n=r.val();if(e){if(n!=t){if(t)for(var a=t.split(","),i=0;i<a.length;i++)if(n==a[i])return;return 1}}else{if(!n||n==t)return 1;if(t)for(a=t.split(","),i=0;i<a.length;i++)if(n==a[i])return 1}}(e,n)?t.show().removeClass("ignoreRequired").find(":input").removeClass("ignore"):(i=!1,t.find(":input").filter(function(){var t=this.type;return this.name&&!dwz(this).is(":disabled")&&dwz.config.rsubmittable.test(this.nodeName)&&!dwz.config.rsubmitterTypes.test(t)}).each(function(){var t=l(this);t.get(0)==r.get(0)?i=!0:t.is(":checkbox")&&t.attr("checked",!1)}),i||(a||t.hide(),t.addClass("ignoreRequired").find(":input").addClass("ignore")))}function t(){for(var t=r.attr(s.ref).split("|"),e=r.attr(s.refVal).split("|"),n=r.attr(s.ctrShow)||!1,a=r.hasClass("ignoreOnly"),i=0;i<t.length;i++)o(l(t[i]),e[i],n,a)}t(),r.change(t)})}})}(dwz);var biz=window.biz||{ajaxError:function(){$.alert.toast("操作失败，请稍后再试！")},server:{ENV:"DEV",_flag:function(){return $.inArray(this.ENV,["TEST","UAT","LIVE"])?"REMOTE":this.ENV},baseUrl:{DEV:"",TEST:"/app_proxy",UAT:"http://47.96.239.247/easy_durg/public",LIVE:"http://47.96.239.247/easy_durg/public"},_verifyImg:{DEV:"./doc/verify.png",REMOTE:"/Public/verify"},_login:{DEV:"./doc/json/login.json",REMOTE:"/company/driver/login"},loginSms:{DEV:"./doc/json/login.json",REMOTE:"/company/driver/login/verify"},register:{DEV:"./doc/json/register.json",REMOTE:"/company/driver/register"},forgetPwd:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/forget"},changePwd:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/user/password"},changeMobile:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/user/phone"},userProfile:{DEV:"./doc/json/login.json",REMOTE:"/company/driver/user"},sendSmsCode:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/code"},userRealVerify:{DEV:"./doc/json/login.json",REMOTE:"/user/realVerify"},announce:{DEV:"./doc/json/announce.json",REMOTE:"/company/driver/announce"},announceList:{DEV:"./doc/json/announce.json",REMOTE:"/company/driver/announce/list"},announceDetail:{DEV:"./doc/json/announceDetail.json",REMOTE:"/company/driver/announce/detail"},transport:{DEV:"./doc/json/transport.json",REMOTE:"/company/driver/transport"},transportList:{DEV:"./doc/json/transportList.json",REMOTE:"/company/driver/transport/list"},transportDetail:{DEV:"./doc/json/transportDetail.json",REMOTE:"/company/driver/transport/detail"},transportStart:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/transport/start"},transportFinish:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/transport/finish"},transportFirst:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/transport/first"},transportLast:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/transport/last"},transportUpload:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/transport/upload"},transportPoint:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/transport/point"},messageList:{DEV:"./doc/json/messageList.json",REMOTE:"/notice"},messageDel:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/notice/delete"},favoriteList:{DEV:"./doc/json/favoriteList.json",REMOTE:"/RestApi/favoriteList"},favoriteDel:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/favorite/delete"},uploadUserIcon:{DEV:"./doc/json/ajaxDone.json",REMOTE:"/company/driver/upload"},getUrl:function(t){return this.baseUrl[this.ENV]+t[this._flag()].replace("{token}",UserInfo.token)},getVerifyImgUrl:function(){return this.baseUrl[this.ENV]+this._verifyImg[this._flag()]+"?t="+(new Date).getTime()},getLoginUrl:function(){return this.baseUrl[this.ENV]+this._login[this._flag()]}}};function ajaxError(t,e,n){401!=t.status?$.alert.toast("网络异常，请稍后再试！"):$.gotoLogin()}function pageRender(t,e){e=template.render(t,e);this.html(e).initUI()}function _phpDateFormat(t,e){return t?new Date(1e3*t).formatDate(e||"yyyy-MM-dd HH:mm:ss"):""}$._ajax=$.ajax,$.extend({ajax:function(t){var e={token:UserInfo.token||""},t=$.extend({data:{},header:e},t);"DEV"==biz.server.ENV&&(t.type="GET"),$._ajax(t)},fetchAjax:function(t){var e=$.extend({key:"",url:"",data:{},type:"GET",success:null},t),n="dwz_json_"+e.key;if(!e.key||!e.url)throw new Error("fetchAjax: key and url is required");$.ajax({type:e.type,url:e.url,dataType:"json",data:e.data,cache:!1,global:!1,success:function(t){$.setStorage(n,t),e.success&&e.success(t)},error:function(){var t=$.getStorage(n);t&&e.success&&e.success(t)}})}}),$.extend(biz,{safeAreaTop:0,fixStatusBar:function(t){t.find("header").css({"padding-top":biz.safeAreaTop+"px"})},hasPermission:function(t){t=api.hasPermission({list:t});return console.log(JSON.stringify(t)),t},requestPermission:function(t,n){api.requestPermission({list:t,code:100001},function(t,e){console.log(JSON.stringify(t)),n&&n(t)})},initPermission:function(t){$.each(Object.keys(t),function(t,e){var n=biz.hasPermission([e]);n&&n[0]&&n[0].granted||biz.requestPermission([e])})},checkPermission:function(n,t){var e=biz.hasPermission([n]);return!!(e&&e[0]&&e[0].granted)||(api.confirm({title:"提醒",msg:"没有获得 "+(t||n)+" 权限\n是否前往设置？",buttons:["去设置","取消"]},function(t,e){1==t.buttonIndex&&biz.requestPermission([n])}),!1)},updateApp:function(t){"android"==api.systemType&&api.download({url:t.source,report:!0},function(t,e){t&&0==t.state&&api.toast({msg:"正在下载应用"+t.percent+"%",duration:2e3}),t&&1==t.state&&(t=t.savePath,api.installApp({appUri:t}))}),"ios"==api.systemType&&api.installApp({appUri:t.source})},checkUpdate:function(){api.require("mam").checkUpdate(function(t,e){var n,a;t?1==(n=t.result).update&&0==n.closed?(a="新版本型号:"+n.version+";更新提示语:"+n.updateTip+";发布时间:"+n.time,n.closed?api.alert({title:"有新的版本,是否下载并安装 ",msg:a,buttons:["确定"]},function(t,e){1==t.buttonIndex&&biz.updateApp(n)}):api.confirm({title:"有新的版本,是否下载并安装 ",msg:a,buttons:["确定","取消"]},function(t,e){1==t.buttonIndex&&biz.updateApp(n)})):2==t.buttonIndex&&api.closeWidget({silent:!0}):$.alert.toast(e.msg)})},createDriving:function(t,a){var e=$.extend({map:null,pointStart:{lng:0,lat:0},pointEnd:{lng:0,lat:0},policy:AMap.DrivingPolicy.REAL_TRAFFIC},t),t=new AMap.Driving({map:e.map,hideMarkers:!0,policy:e.policy});return t.search(new AMap.LngLat(e.pointStart.lng,e.pointStart.lat),new AMap.LngLat(e.pointEnd.lng,e.pointEnd.lat),function(t,e){var n={};e.routes&&(n=e.routes[0]),"complete"===t?console.log("绘制驾车路线完成"):console.log("获取驾车数据失败："+e),a&&a(n)}),t},location:{lastTime:0,timestamp:0,truck_id:"",transport_id:"",lng:120,lat:30,zoom:8,updTransport:function(){$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transportList),dataType:"json",data:{pageNum:1,status:1},cache:!1,global:!1,success:function(t){$.isAjaxOkStatus(t)&&t.data.list&&t.data.list.length&&(biz.location.truck_id=t.data.list[0].truck_id,biz.location.transport_id=t.data.list[0].id)},error:ajaxError})}},startLocation:function(){var n,t;biz.location.lastTime||(biz.location.updTransport(),n=$(document),"android"==api.systemType&&((t=api.require("audioStreamer")).openPlayer({path:"http://www.7788sc.com/ui/mp3/1.mp3"},function(t){console.log(JSON.stringify(t))}),t.setLoop({loop:!0})),(t=api.require("bmLocation")).configManager({accuracy:"battery_saving",filter:1,activityType:"automotiveNavigation",locationTimeout:10,reGeocodeTimeout:10,coordinateType:"BMK09LL"}),t.start({locatingWithReGeocode:!0,backgroundLocation:!0},function(t){var e;t.status&&(biz.location.lat=t.location.latitude,biz.location.lng=t.location.longitude,biz.location.timestamp=Math.round((new Date).getTime()),n.trigger("location.change",biz.location),biz.location.lastTime+1e4<biz.location.timestamp&&(e=biz.server.getUrl(biz.server.transportPoint),t={transport_id:biz.location.transport_id,truck_id:biz.location.truck_id,gathertime:Math.round(biz.location.timestamp/1e3),lng:biz.location.lng,lat:biz.location.lat},biz.location.lastTime=biz.location.timestamp,biz.location.transport_id&&$.ajax({type:"POST",url:e,dataType:"json",data:t,cache:!1,global:!1,success:function(t){console.log(JSON.stringify(t))},error:ajaxError})))}))}});var CommonStore={data:[],getData:function(t){for(var e=$.extend({selectedId:""},t),n=[],a=0;a<this.data.length;a++)n.push(this.data[a]),n[a].selected=n[a].id==e.selectedId;return n},getItem:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].id==t)return this.data[e];return{}}},SexStore=$.extend({},CommonStore,{data:[{id:1,name:"男"},{id:2,name:"女"}]}),TransportStatus=$.extend({},CommonStore,{data:[{id:"0",icon:"status-pending",name:"待出发"},{id:"1",icon:"status-fail",name:"运输中"},{id:"2",icon:"status-pass",name:"已完成"}]});$.extend(template.defaults.imports,{phpDateFormat:function(t){return _phpDateFormat(t,"yyyy-MM-dd")},filterInputNum:function(t){return t||""},showSex:function(t){return SexStore.getItem(t).name},showTransportStatus:function(t,e){return TransportStatus.getItem(t)[e||"name"]},showImg:function(t,e){return t||e||"images/pic/laws01.png"},showUserIcon:function(t){return t||"images/my-photo-default.png"}});var UserInfo={token:"",mobile:"",realname:"",sex:1,idcard:"",isauth:!1,logins:0,address:"",user_type:"",headimgurl:""},UserInfoUtil={update:function(t){console.log(JSON.stringify(t)),null!=t.uid&&(UserInfo.uid=t.uid),null!=t.realname&&(UserInfo.realname=t.realname),null!=t.mobile&&(UserInfo.mobile=t.mobile),null!=t.mobile_hidden&&(UserInfo.mobile_hidden=t.mobile_hidden),null!=t.token&&(UserInfo.token=t.token),null!=t.user_type&&(UserInfo.user_type=t.user_type),null!=t.sex&&(UserInfo.sex=1==t.sex?1:2),null!=t.photo&&(UserInfo.headimgurl=t.photo),null!=t.isauth&&(UserInfo.isauth=t.isauth),null!=t.logins&&(UserInfo.logins=t.logins),null!=t.idcard&&(UserInfo.idcard=t.idcard),null!=t.address&&(UserInfo.address=t.address),$.setStorage("APP_USER_INFO",UserInfo)},clear:function(){UserInfo={},$.setStorage("APP_USER_INFO",UserInfo)}};function initUserInfo(){UserInfo.token||(UserInfo=$.getStorage("APP_USER_INFO")||{}),console.log(JSON.stringify(UserInfo)),UserInfo.token&&$.ajax({type:"POST",url:biz.server.getUrl(biz.server.userProfile),dataType:"json",data:{},cache:!1,global:!1,success:function(t){console.log(JSON.stringify(t)),t[dwz.config.keys.statusCode]==dwz.config.statusCode.ok?UserInfoUtil.update(t.data):($.alert.toast(t[dwz.config.keys.message]),UserInfoUtil.clear()),dwz.checkAjaxLogin(t)},error:ajaxError})}function authCheck(t){if(UserInfo.isauth)return!0;return!dwz.inArray(t.getRequestURI(),["tpl/driver.html"])||($.dialog.open({url:"tpl/my/authCheck.html"}),!1)}function loginRender(t,e){var n={form_url:biz.server.getLoginUrl(),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode),login_sms_url:biz.server.getUrl(biz.server.loginSms)},n=template.render(t,n);this.html(n).initUI()}function forgetPwdRender(t,e){var n={form_url:biz.server.getUrl(biz.server.forgetPwd),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode)},n=template.render(t,n);this.html(n).initUI()}function changePwdRender(t,e){var n={form_url:biz.server.getUrl(biz.server.changePwd),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode),UserInfo:UserInfo},n=template.render(t,n);this.html(n).initUI()}function changeMobileRender(t,e){var n={form_url:biz.server.getUrl(biz.server.changeMobile),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode),UserInfo:UserInfo},n=template.render(t,n);this.html(n).initUI()}function registerRender(t,e){var n={form_url:biz.server.getUrl(biz.server.register),sms_code_url:biz.server.getUrl(biz.server.sendSmsCode)},n=template.render(t,n);this.html(n).initUI()}function loginAjaxDone(t){console.log(JSON.stringify(t)),$.isAjaxOkStatus(t)?(UserInfoUtil.update(t.data),$.dialog.close(),$.navTab.open({url:"tpl/home.html?dwz_callback=renderHome",tabid:"home"})):$.alert.error(t.info)}function forgetAjaxDone(t){console.log(JSON.stringify(t)),$.isAjaxOkStatus(t)?($.gotoLogin(),$.alert.success(t.info)):$.alert.error(t.info)}function authAjaxDone(t){console.log(JSON.stringify(t)),$.navView.close(!0,!0),$.isAjaxOkStatus(t)?(UserInfoUtil.update(t.data),$.dialog.open({url:"tpl/my/authOk.html"})):(t.info&&$.alert.error(t.info),$.dialog.open({url:"tpl/my/authError.html"}))}function submitUserRealInfo(t){t=$(t);if(!t.valid())return!1;t=t.serializeMap();return bizUtil.userRealVerify(t),!1}$.fn.extend({fleshVerifyImg:function(){return this.each(function(){$(this).touchwipe({touch:function(){$(this).attr("src",biz.server.getVerifyImgUrl())}})})},sendVerifyMs:function(){return this.each(function(){$(this).click(function(){var t,n,a,i=$(this),e=i.attr("rel"),r=i.attr("data-op"),e=i.parentsUnitBox().find(e).val();e&&e.isMobile()?(t=60,n=$('<span class="count">重发('+t+"s)</span>").appendTo(this.parentNode),i.hide(),a=setInterval(function(){n.text("重发("+t+"s)"),--t<=1&&(clearInterval(a),n.remove(),i.show())},1e3),$.ajax({type:"POST",dataType:"json",url:i.attr("data-href"),data:{mobile:e,sign:md5(e+"ln-#*UR0QsgY51^2Bz"),type:r},success:function(t){console.log(JSON.stringify(t));var e=t[dwz.config.keys.message]||t.info;t[dwz.config.keys.statusCode]==dwz.config.statusCode.error?($.alert.error(e),clearInterval(a),n.remove(),i.show()):e&&$.alert.success(e)}})):$.alert.error("请输入您的11位手机号码")})})}}),dwz.urlInterceptor=function(t){var e=!!UserInfo.token;return e||dwz.inArray(t.getRequestURI(),["tpl/user/login.html","tpl/user/forgetPwd.html","tpl/user/register.html"])&&(e=!0),e?authCheck(t):($.gotoLogin(),!1)};var bizUtil={userRealVerify:function(n,a){var i,t;biz.checkPermission("camera","摄像头")&&((i=api.require("baiduFaceLive")).closeFaceDetectView(function(t,e){}),t=api.safeArea.top,i.openFaceDetectView({rect:{x:0,y:20<t?t:0,w:api.frameWidth,h:window.screen.availHeight},fixedOn:api.frameName,fixed:!0,soundType:0,isSound:!0},function(t,e){console.log(JSON.stringify(t)),console.log(JSON.stringify(e)),"success"==t.evenType?(i.closeFaceDetectView(function(t,e){}),a?a(t,e):(api.showProgress({title:"正在上传图片...",text:"先喝杯茶...",modal:!0}),n.idcard||$.alert.error("身份证号必须"),n.realname||$.alert.error("真实姓名必须"),api.ajax({url:biz.server.getUrl(biz.server.userRealVerify),method:"post",data:{values:{img:t.data.bestImage,idcard:n.idcard,name:n.realname,token:UserInfo.token}}},function(t,e){console.log(JSON.stringify(t)),api.hideProgress(),t?authAjaxDone(t):console.log(JSON.stringify(e))}))):t.message&&$.alert.toast(t.message)}))}};function renderHome(t,e){var n=this,a=$.templateWrap(t),t={UserInfo:UserInfo},t=template.render(a.tpl,t);n.html(t).initUI();var i=$("#home_form"),r=$("#home-announce-box");i.requestList=function(t){var e=i.serializeArray();$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transport),dataType:"json",data:e,cache:!1,global:!1,success:function(t){$.isAjaxOkStatus(t)&&(t=template.render(a["tpl-transport"],t),n.find("#transport-card-box").html(t))},error:ajaxError}),$.ajax({type:"POST",url:biz.server.getUrl(biz.server.announce),dataType:"json",data:e,cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&$.isAjaxOkStatus(t)&&(t=template.render(a["tpl-list"],t),r.html(t))},error:ajaxError})},$.listForm(i)}function renderAbout(t,e){t=template.render(t,{version:window.api?"v"+api.appVersion:"",env:biz.server.ENV});this.html(t).initUI()}biz.announce={listRender:function(t,e){var n=$.templateWrap(t),e=template.render(n.tpl,{UserInfo:UserInfo,params:e});this.html(e).initUI();var a=this.find("form.dwz-list-form"),i=a.find("ul.dwz-list-box");a.requestList=function(e){$.ajax({type:"POST",url:biz.server.getUrl(biz.server.announceList),dataType:"json",data:a.serializeArray(),cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&$.isAjaxOkStatus(t)&&(a.total=t.total||t.data.length,a.total&&a.find(".empty_box").hide(),t=template.render(n["tpl-list"],t),e?i.append(t):i.html(t))},error:ajaxError})},$.listForm(a)},detailRender:function(e,t){var n=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.announceDetail),dataType:"json",data:{announce_id:t.id},cache:!1,global:!1,success:function(t){console.log(t);t=template.render(e,{UserInfo:UserInfo,vo:t.data});n.html(t).initUI()},error:ajaxError})}},biz.transport={indexRender:function(t,e){e=template.render(t,{params:e});this.html(e).initUI()},listRender:function(t,e){var n=$.templateWrap(t),e=template.render(n.tpl,{UserInfo:UserInfo,params:e});this.html(e).initUI();var a=this.find("form.dwz-list-form"),i=a.find("ul.dwz-list-box");a.requestList=function(e){$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transportList),dataType:"json",data:a.serializeArray(),cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&$.isAjaxOkStatus(t)&&(a.total=t.data.total||t.data.list?t.data.list.length:0,a.total&&a.find(".empty_box").hide(),t=template.render(n["tpl-list"],t.data),e?i.append(t):i.html(t))},error:ajaxError})},$.listForm(a)},detailRender:function(t,e){var a=this,i=$.templateWrap(t),t=template.render(i.tpl,{params:e});a.html(t).initUI();var r=a.find(".sheet-box"),t=a.find(".dwz-map-box"),o=new AMap.Map(t.get(0),{zoom:biz.location.zoom}),s={car:$.amap.addMarker({map:o,position:[biz.location.lng,biz.location.lat],content:'<div class="center-marker"><img src="./images/icon/marker-car.svg" class="icon-md"></div>'}),start:null,end:null};$(document).on("location.change",function(t){var e,n,a,i=new AMap.LngLat(biz.location.lng,biz.location.lat);s.car.setPosition(i),o.setCenter(i),s.start&&(biz.location.lng||biz.location.lat)&&(e=s.start.getPosition(),a=s.end.getPosition(),n=new AMap.LngLat(biz.location.lng,biz.location.lat),i=$.amap.calRotation({map:o,startPos:n,endPos:a}),s.car.setAngle(i),a=[e,n,a],s.polyline?s.polyline.setPath(a):s.polyline=new AMap.Polyline({map:o,path:a,lineCap:"round",isOutline:!0,outlineColor:"white",showDir:!0,strokeColor:"blue",strokeWeight:4,borderWeight:2,strokeOpacity:.5}))}),a.on(dwz.event.type.pageClear,function(){$(document).off("location.change")});var l=a.find("ul.receive-box"),r=a.find("div.sheet-box"),t=a.find("form.dwz-list-form");t.on("submit",function(){return $.ajax({type:"POST",url:biz.server.getUrl(biz.server.transportDetail),dataType:"json",data:{transport_id:e.id},cache:!1,global:!1,success:function(e){var t,n;console.log(e),dwz.checkAjaxLogin(e)&&(n={UserInfo:UserInfo,vo:e.data,receive:e.data.receive||{},ship:e.data.ship||{}},t=template.render(i["tpl-sheet-box"],n),r.html(t).initUI(),n=template.render(i["tpl-receive-box"],n),l.html(n),a.find(".dwz-btn-start").touchwipe({wipeRight:function(){var t=$(this);t.hasClass("wipe-hover")||(t.addClass("wipe-hover"),setTimeout(function(){t.removeClass("wipe-hover")},3e3),biz.transport.transportStart(e.data))}}),a.find(".dwz-btn-finish").touchwipe({wipeRight:function(){var t=$(this);t.hasClass("wipe-hover")||(t.addClass("wipe-hover"),setTimeout(function(){t.removeClass("wipe-hover")},3e3),biz.transport.transportFinish(e.data))}}),biz.transport.vo=e.data,n=new AMap.LngLat(parseFloat(e.data.ship.lng),parseFloat(e.data.ship.lat)),o.setCenter(n),s.start=$.amap.addMarker({map:o,position:n,content:'<div class="center-marker"><img src="./images/icon/marker-start.svg" class="icon-md"></div>'}),s.end=$.amap.addMarker({map:o,position:[parseFloat(e.data.receive.lng),parseFloat(e.data.receive.lat)],content:'<div class="dwz-marker icon-md"><img src="./images/icon/marker-end.svg"></div>'}),$(document).trigger("location.change",biz.location))},error:ajaxError}),!1}),t.trigger("submit")},driving:function(t,a){var i=this,r=$.templateWrap(t),t=template.render(r.tpl,{params:a});i.html(t).initUI();var t=i.find(".dwz-map-box"),o=new AMap.Map(t.get(0),{zoom:biz.location.zoom}),s=new AMap.LngLat(biz.location.lng,biz.location.lat),t=new AMap.LngLat(parseFloat(a.lng),parseFloat(a.lat));o.setCenter(s);$.amap.addMarker({map:o,position:s,content:'<div class="center-marker"><img src="./images/icon/marker-start.svg" class="icon-md"></div>'}),$.amap.addMarker({map:o,position:t,content:'<div class="dwz-marker icon-md"><img src="./images/icon/marker-end.svg"></div>'});var l=biz.createDriving({map:o,pointStart:s,pointEnd:t},function(t){t=template.render(r["tpl-nav-info"],t);i.find(".dwz-nav-info").html(t)}),e=i.find("form.dwz-form"),c=e.find("div.sheet-box"),u=e.find("input[name=end]"),d=e.find("ul.dwz-list");e.on("submit",function(t){console.log("search poi..."),t.preventDefault(),c.removeClass("fold");t=u.val().trim();t&&api.ajax({url:e.attr("action"),method:"get",data:{values:{keywords:t}}},function(t,e){var n;1==t.status&&(n=[{name:a.name,address:a.address,lng:a.lng,lat:a.lat}],t.pois.forEach(function(t){var e=t.location.split(",");n.push({name:t.cityname+t.adname+t.name,address:t.address,lng:parseFloat(e[0]),lat:parseFloat(e[1])})}),t=template.render(r["tpl-list"],{list:n}),d.html(t),d.find("li.item").touchwipe({touch:function(){var t=$(this);u.val(t.attr("data-name")),c.addClass("fold"),l&&l.clear();t=new AMap.LngLat(parseFloat(t.attr("data-lng")),parseFloat(t.attr("data-lat")));l=biz.createDriving({map:o,pointStart:s,pointEnd:t},function(t){t=template.render(r["tpl-nav-info"],t);i.find(".dwz-nav-info").html(t)})}}))})});var n=!1;u.on("compositionstart compositionend input focus",function(t){switch(console.log(t.type,n),t.type){case"compositionstart":n=!0;break;case"compositionend":n=!1;default:n||e.trigger("submit")}})},firstRender:function(e,t){var n=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transportDetail),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&(t=template.render(e,{vo:t.data,location:biz.location,form_url:biz.server.getUrl(biz.server.transportFirst)}),n.html(t).initUI(),n.find("a.old-img-del").click(biz.transport.delPic))}})},lastRender:function(e,t){var n=this;$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transportDetail),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&(t=template.render(e,{vo:t.data,location:biz.location,form_url:biz.server.getUrl(biz.server.transportLast)}),n.html(t).initUI(),n.find("a.old-img-del").click(biz.transport.delPic))}})},delPic:function(t){var e=$(this),n=e.parentsUntil(function(){return $(this).is("li.thumbnail")}),a=e.attr("data-id"),i=e.attr("data-img-url"),e=e.attr("data-field");i?$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transportPicDel),dataType:"json",data:{id:a,imgUrl:i,field:e},cache:!1,global:!1,success:function(t){$.checkAjaxLogin(t)&&($.ajaxDone(t),$.isAjaxOkStatus(t)&&n.remove())},error:ajaxError}):n.remove(),t.stopPropagation()},confirmFirst:function(t){return $.alert.confirm("出发前先录入发货过磅信息",{okCall:function(){$.navView.open({url:"tpl/transport/first.html?dwz_callback=biz.transport.firstRender",data:t,rel:"transportFirst"})}}),!1},transportStart:function(t){if(!t.chemicals_weigh_first_commit)return biz.transport.confirmFirst(t);$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transportStart),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){$.checkAjaxLogin(t)&&(navViewAjaxDoneReload(t),biz.location.updTransport())},error:ajaxError})},confirmFinish:function(t){return $.alert.confirm("完成前先录入卸货过磅信息",{okCall:function(){$.navView.open({url:"tpl/transport/last.html?dwz_callback=biz.transport.lastRender",data:t,rel:"transportFinish"})}}),!1},transportFinish:function(t){if(!t.chemicals_weigh_last_commit)return biz.transport.confirmFinish(t);$.ajax({type:"POST",url:biz.server.getUrl(biz.server.transportFinish),dataType:"json",data:{transport_id:t.id},cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&(navViewAjaxDoneReload(t),biz.location.updTransport())},error:ajaxError})},formSubmitWeigh:function(t){console.log("formSubmitWeigh()....");var e=$(t),n=$("#upload-weigh_pic"),a=$("#upload-weigh_site_pic");if(n.size()&&0==n.find(".thumbnail").size())return $.alert.error("请选择上传磅单图片"),!1;if(a.size()&&0==a(".thumbnail").size())return $.alert.error("请选择上传现场图片"),!1;a=e.find("input.dwz-sign-input");return a.size()&&!a.val()&&e.find(".dwz-sign-box").size()?($.alert.error("您还没有完成签字！"),!1):validateCallback(t,function(t){console.log(JSON.stringify(t)),$.isAjaxOkStatus(t)?navViewAjaxDoneClose(t):$.ajaxDone(t)})},mapNav:function(){var t,e=biz.transport.vo;e&&($.navView.close(!0,!0),t=biz.location,e=e.receive,api.require("aMapNavigation").start({start:{lon:t.lng,lat:t.lat},end:{lon:e.lng,lat:e.lat},type:"drive",strategy:"fast",mode:"GPS",styles:{preference:{night:!1,compass:!1,crossImg:!1,degree:30,yawReCal:!1,jamReCal:!1,alwaysBright:!1}}},function(t,e){t?console.log(JSON.stringify(t)):console.log(JSON.stringify(e))}))}},biz.message={removeItem:function(t){var e=$.extend({id:0},t);$.ajax({type:"POST",url:biz.server.getUrl(biz.server.messageDel),dataType:"json",data:{id:e.id},cache:!1,global:!1,success:function(t){console.log(t),$.isAjaxOkStatus(t)&&$.navTab.getBox().find('ul.list li[data-id="'+e.id+'"]').remove()},error:ajaxError})},listRender:function(t){var n=$.templateWrap(t),t=template.render(n.tpl,{UserInfo:UserInfo});this.html(t).initUI();var a=this.find("form.dwz-list-form"),i=a.find("ul.list");a.requestList=function(e){var t=a.serializeArray();console.log(JSON.stringify(t)),$.ajax({type:"GET",url:biz.server.getUrl(biz.server.messageList),dataType:"json",data:t,cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&$.isAjaxOkStatus(t)&&(a.total=t.data.total||t.data.length,a.total&&a.find(".empty_box").hide(),t=template.render(n["tpl-list"],t.data),e?i=$(t).appendTo(i).touchOpenRight():i.html(t).find(".dwz-open-right").touchOpenRight())},error:ajaxError})},$.listForm(a)}},biz.favorite={removeItem:function(t){var e=$.extend({id:0},t);$.ajax({type:"POST",url:biz.server.getUrl(biz.server.favoriteDel),dataType:"json",data:{id:e.id},cache:!1,global:!1,success:function(t){console.log(t),$.isAjaxOkStatus(t)&&$.navTab.getBox().find('ul.list li[data-id="'+e.id+'"]').remove()},error:ajaxError})},listRender:function(t){var n=$.templateWrap(t),t=template.render(n.tpl,{UserInfo:UserInfo});this.html(t).initUI();var a=this.find("form.dwz-list-form"),i=a.find("ul.list");a.requestList=function(e){var t=a.serializeArray();console.log(JSON.stringify(t)),$.ajax({type:"GET",url:biz.server.getUrl(biz.server.favoriteList),dataType:"json",data:t,cache:!1,global:!1,success:function(t){dwz.checkAjaxLogin(t)&&$.isAjaxOkStatus(t)&&(a.total=t.data.total||t.data.length,a.total&&a.find(".empty_box").hide(),t=template.render(n["tpl-list"],t.data),e?i=$(t).appendTo(i).touchOpenRight():i.html(t).find(".dwz-open-right").touchOpenRight())},error:ajaxError})},$.listForm(a)}},biz.my={render:function(t){t=template.render(t,{UserInfo:UserInfo});this.html(t).initUI()},settingRender:function(t){t=template.render(t,{UserInfo:UserInfo});this.html(t).initUI(),$("#exitSystemButton").touchwipe({touch:function(){$.alert.confirm("确定要退出登录吗？",{okCall:function(){UserInfoUtil.clear(),$.gotoLogin()},cancelCall:function(){}})}}),this.find(".dwz-user-icon").touchwipe({touch:function(){dwz.plus.chooseImage({title:"修改用户头像",maximum:1,callback:function(t){t&&$.navView.open({url:"tpl/my/settingsIcon.html",rel:"mySettingsIcon",data:{imgPath:t},callback:biz.my.settingIconRender})}})}})},settingIconRender:function(t,n){t=template.render(t,{UserInfo:UserInfo});this.html(t).initUI();t=biz.safeAreaTop+44;FNImageClip=api.require("FNImageClip"),FNImageClip.open({rect:{x:0,y:t,w:api.winWidth,h:api.winHeight-t},srcPath:n.imgPath,highDefinition:!1,isHideGrid:!0,style:{mask:"rgba(0,0,0,0.6)",clip:{w:300,h:300,x:(api.winWidth-300)/2,y:(api.winHeight-300)/2,borderColor:"#0f0",borderWidth:3,appearance:"rectangle"}},mode:"image",fixedOn:api.frameName},function(t,e){t?console.log(JSON.stringify(t)):alert(JSON.stringify(e))}),this.find("header .back-btn").touchwipe({touch:function(){$.navView.close(!0,!0),FNImageClip.close()}}),this.find("header .txt-button").touchwipe({touch:function(){FNImageClip.save({destPath:"fs://image/croppic_"+(new Date).getTime()+".jpg",copyToAlbum:!1,quality:1},function(t,e){t?(console.log(JSON.stringify(t)),FNImageClip.close(),$.navView.close(!0,!0),dwz.plus.getBase64Image({destinationType:"url",imgPath:t.destPath,maxWidth:300,maxHeight:300,callback:function(e){console.log(e),$.isFunction(n.callbackFn)?n.callbackFn(e):$.ajax({type:"POST",dataType:"json",global:!0,url:biz.server.getUrl(biz.server.uploadUserIcon),data:{type:4,imgUrl:e},success:function(t){t.info&&$.alert.toast(t.info);t=$("#my_user_icon_img");0<t.size()&&t.attr("src",e);t=$("#setting_user_icon_img");0<t.size()&&t.attr("src",e),UserInfoUtil.update({photo:e})}})}})):alert(JSON.stringify(e))})}})},authRender:function(t,e){e={UserInfo:UserInfo,sex_list:SexStore.getData({selectedId:UserInfo.sex}),user_type:e.user_type},e=template.render(t,e);this.html(e).initUI()}};